(this["webpackJsonphyperobjects-language-example"]=this["webpackJsonphyperobjects-language-example"]||[]).push([[0],{2:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Ar})),n.d(e,"b",(function(){return _r})),n.d(e,"c",(function(){return Or})),n.d(e,"d",(function(){return Ir})),n.d(e,"e",(function(){return Mr})),n.d(e,"f",(function(){return Pr})),n.d(e,"g",(function(){return jr})),n.d(e,"h",(function(){return Er})),n.d(e,"i",(function(){return Dr})),n.d(e,"j",(function(){return Sr})),n.d(e,"k",(function(){return Lr})),n.d(e,"l",(function(){return zr})),n.d(e,"m",(function(){return Rr})),n.d(e,"n",(function(){return Nr})),n.d(e,"o",(function(){return Gr}));var r=n(26),i=n(25),a=n(17),o=n(21),s=n(10),c=n(12),u=n(18),l=n(19),h=n(5),f=n(0),d=n.n(f),p=n(110),m=n(257),g=n.n(m),y=n(171),v=n(159),x=n(38),b=n(344),w=n(235),j=n(83),O=(n(343),n(157)),k=n.n(O),E=n(77),C=n.n(E),P=n(234),S=n(230),I=n(161),M=n(231),D=n(9),A=n(64),T=n(50),L=n(40),R=n(49),z=n(261),N=n.n(z),G=n(178),F=n(237),B=n.n(F),q=n(262),Y=n.n(q),X="UPDATE_KEYS_PRESSED",W="MOVE_POINT",U="SET_DRAGGED_POINT",V="STOP_DRAGGING",H="SET_DRAGGED_QUADRATIC_CONTROL_POINT",J="SET_DRAGGED_CUBIC_CONTROL_POINT",Z="SET_DRAGGED_ARC_CONTROL_POINT",Q="START_SELECTION",K="SELECT_BOX",$="ADD_TO_SELECTION",tt="REMOVE_FROM_SELECTION",et="MOVE_SELECTION",nt="RESET_SELECTION",rt="ANIMATE",it="PLAY",at="PAUSE",ot="REWIND",st="SET_FRAME",ct="CLICKED_GEOMETRY",ut="INPUT_SET_VALUE",lt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};var ht=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",o=16,s=32,c=64,u=128,l=256,h=1/0,f=9007199254740991,d=NaN,p=4294967295,m=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",o],["flip",512],["partial",s],["partialRight",c],["rearg",l]],g="[object Arguments]",y="[object Array]",v="[object Boolean]",x="[object Date]",b="[object Error]",w="[object Function]",_="[object GeneratorFunction]",j="[object Map]",O="[object Number]",k="[object Object]",E="[object Promise]",C="[object RegExp]",P="[object Set]",S="[object String]",I="[object Symbol]",M="[object WeakMap]",D="[object ArrayBuffer]",A="[object DataView]",T="[object Float32Array]",L="[object Float64Array]",R="[object Int8Array]",z="[object Int16Array]",N="[object Int32Array]",G="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",q="[object Uint32Array]",Y=/\b__p \+= '';/g,X=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,H=RegExp(U.source),J=RegExp(V.source),Z=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tt=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(nt.source),it=/^\s+/,at=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ht=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,mt=/^[-+]0x[0-9a-f]+$/i,gt=/^0b[01]+$/i,yt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,xt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,jt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ot="\\u2700-\\u27bf",kt="a-z\\xdf-\\xf6\\xf8-\\xff",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",Ct="\\ufe0e\\ufe0f",Pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",St="['\u2019]",It="[\\ud800-\\udfff]",Mt="["+Pt+"]",Dt="["+jt+"]",At="\\d+",Tt="[\\u2700-\\u27bf]",Lt="["+kt+"]",Rt="[^\\ud800-\\udfff"+Pt+At+Ot+kt+Et+"]",zt="\\ud83c[\\udffb-\\udfff]",Nt="[^\\ud800-\\udfff]",Gt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ft="[\\ud800-\\udbff][\\udc00-\\udfff]",Bt="["+Et+"]",qt="(?:"+Lt+"|"+Rt+")",Yt="(?:"+Bt+"|"+Rt+")",Xt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Wt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ut="(?:"+Dt+"|"+zt+")"+"?",Vt="[\\ufe0e\\ufe0f]?",Ht=Vt+Ut+("(?:\\u200d(?:"+[Nt,Gt,Ft].join("|")+")"+Vt+Ut+")*"),Jt="(?:"+[Tt,Gt,Ft].join("|")+")"+Ht,Zt="(?:"+[Nt+Dt+"?",Dt,Gt,Ft,It].join("|")+")",Qt=RegExp(St,"g"),Kt=RegExp(Dt,"g"),$t=RegExp(zt+"(?="+zt+")|"+Zt+Ht,"g"),te=RegExp([Bt+"?"+Lt+"+"+Xt+"(?="+[Mt,Bt,"$"].join("|")+")",Yt+"+"+Wt+"(?="+[Mt,Bt+qt,"$"].join("|")+")",Bt+"?"+qt+"+"+Xt,Bt+"+"+Wt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",At,Jt].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+jt+Ct+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,ae={};ae[T]=ae[L]=ae[R]=ae[z]=ae[N]=ae[G]=ae[F]=ae[B]=ae[q]=!0,ae[g]=ae[y]=ae[D]=ae[v]=ae[A]=ae[x]=ae[b]=ae[w]=ae[j]=ae[O]=ae[k]=ae[C]=ae[P]=ae[S]=ae[M]=!1;var oe={};oe[g]=oe[y]=oe[D]=oe[A]=oe[v]=oe[x]=oe[T]=oe[L]=oe[R]=oe[z]=oe[N]=oe[j]=oe[O]=oe[k]=oe[C]=oe[P]=oe[S]=oe[I]=oe[G]=oe[F]=oe[B]=oe[q]=!0,oe[b]=oe[w]=oe[M]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,ue=parseInt,le="object"==typeof lt&&lt&&lt.Object===Object&&lt,he="object"==typeof self&&self&&self.Object===Object&&self,fe=le||he||Function("return this")(),de=e&&!e.nodeType&&e,pe=de&&t&&!t.nodeType&&t,me=pe&&pe.exports===de,ge=me&&le.process,ye=function(){try{var t=pe&&pe.require&&pe.require("util").types;return t||ge&&ge.binding&&ge.binding("util")}catch(e){}}(),ve=ye&&ye.isArrayBuffer,xe=ye&&ye.isDate,be=ye&&ye.isMap,we=ye&&ye.isRegExp,_e=ye&&ye.isSet,je=ye&&ye.isTypedArray;function Oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ke(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function Ee(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ce(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Pe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Se(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function Ie(t,e){return!!(null==t?0:t.length)&&Fe(t,e,0)>-1}function Me(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function De(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ae(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Te(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function Le(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Re(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ze=Xe("length");function Ne(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ge(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function Fe(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ge(t,qe,n)}function Be(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function qe(t){return t!==t}function Ye(t,e){var n=null==t?0:t.length;return n?Ve(t,e)/n:d}function Xe(t){return function(e){return null==e?n:e[t]}}function We(t){return function(e){return null==t?n:t[e]}}function Ue(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function Ve(t,e){for(var r,i=-1,a=t.length;++i<a;){var o=e(t[i]);o!==n&&(r=r===n?o:r+o)}return r}function He(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Je(t){return t?t.slice(0,pn(t)+1).replace(it,""):t}function Ze(t){return function(e){return t(e)}}function Qe(t,e){return De(e,(function(e){return t[e]}))}function Ke(t,e){return t.has(e)}function $e(t,e){for(var n=-1,r=t.length;++n<r&&Fe(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length;n--&&Fe(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var nn=We({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),rn=We({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(t){return"\\"+se[t]}function on(t){return ee.test(t)}function sn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function un(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function hn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fn(t){return on(t)?function(t){var e=$t.lastIndex=0;for(;$t.test(t);)++e;return e}(t):ze(t)}function dn(t){return on(t)?function(t){return t.match($t)||[]}(t):function(t){return t.split("")}(t)}function pn(t){for(var e=t.length;e--&&at.test(t.charAt(e)););return e}var mn=We({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function t(e){var at=(e=null==e?fe:gn.defaults(fe.Object(),e,gn.pick(fe,re))).Array,lt=e.Date,jt=e.Error,Ot=e.Function,kt=e.Math,Et=e.Object,Ct=e.RegExp,Pt=e.String,St=e.TypeError,It=at.prototype,Mt=Ot.prototype,Dt=Et.prototype,At=e["__core-js_shared__"],Tt=Mt.toString,Lt=Dt.hasOwnProperty,Rt=0,zt=function(){var t=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Nt=Dt.toString,Gt=Tt.call(Et),Ft=fe._,Bt=Ct("^"+Tt.call(Lt).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=me?e.Buffer:n,Yt=e.Symbol,Xt=e.Uint8Array,Wt=qt?qt.allocUnsafe:n,Ut=cn(Et.getPrototypeOf,Et),Vt=Et.create,Ht=Dt.propertyIsEnumerable,Jt=It.splice,Zt=Yt?Yt.isConcatSpreadable:n,$t=Yt?Yt.iterator:n,ee=Yt?Yt.toStringTag:n,se=function(){try{var t=fa(Et,"defineProperty");return t({},"",{}),t}catch(e){}}(),le=e.clearTimeout!==fe.clearTimeout&&e.clearTimeout,he=lt&&lt.now!==fe.Date.now&&lt.now,de=e.setTimeout!==fe.setTimeout&&e.setTimeout,pe=kt.ceil,ge=kt.floor,ye=Et.getOwnPropertySymbols,ze=qt?qt.isBuffer:n,We=e.isFinite,yn=It.join,vn=cn(Et.keys,Et),xn=kt.max,bn=kt.min,wn=lt.now,_n=e.parseInt,jn=kt.random,On=It.reverse,kn=fa(e,"DataView"),En=fa(e,"Map"),Cn=fa(e,"Promise"),Pn=fa(e,"Set"),Sn=fa(e,"WeakMap"),In=fa(Et,"create"),Mn=Sn&&new Sn,Dn={},An=Ga(kn),Tn=Ga(En),Ln=Ga(Cn),Rn=Ga(Pn),zn=Ga(Sn),Nn=Yt?Yt.prototype:n,Gn=Nn?Nn.valueOf:n,Fn=Nn?Nn.toString:n;function Bn(t){if(rs(t)&&!Uo(t)&&!(t instanceof Wn)){if(t instanceof Xn)return t;if(Lt.call(t,"__wrapped__"))return Fa(t)}return new Xn(t)}var qn=function(){function t(){}return function(e){if(!ns(e))return{};if(Vt)return Vt(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Yn(){}function Xn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Jn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}function Zn(t){var e=this.__data__=new Vn(t);this.size=e.size}function Qn(t,e){var n=Uo(t),r=!n&&Wo(t),i=!n&&!r&&Zo(t),a=!n&&!r&&!i&&hs(t),o=n||r||i||a,s=o?He(t.length,Pt):[],c=s.length;for(var u in t)!e&&!Lt.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xa(u,c))||s.push(u);return s}function Kn(t){var e=t.length;return e?t[Jr(0,e-1)]:n}function $n(t,e){return Ra(Ii(t),cr(e,0,t.length))}function tr(t){return Ra(Ii(t))}function er(t,e,r){(r!==n&&!qo(t[e],r)||r===n&&!(e in t))&&or(t,e,r)}function nr(t,e,r){var i=t[e];Lt.call(t,e)&&qo(i,r)&&(r!==n||e in t)||or(t,e,r)}function rr(t,e){for(var n=t.length;n--;)if(qo(t[n][0],e))return n;return-1}function ir(t,e,n,r){return dr(t,(function(t,i,a){e(r,t,n(t),a)})),r}function ar(t,e){return t&&Mi(e,As(e),t)}function or(t,e,n){"__proto__"==e&&se?se(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(t,e){for(var r=-1,i=e.length,a=at(i),o=null==t;++r<i;)a[r]=o?n:Ps(t,e[r]);return a}function cr(t,e,r){return t===t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function ur(t,e,r,i,a,o){var s,c=1&e,u=2&e,l=4&e;if(r&&(s=a?r(t,i,a,o):r(t)),s!==n)return s;if(!ns(t))return t;var h=Uo(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Lt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!c)return Ii(t,s)}else{var f=ma(t),d=f==w||f==_;if(Zo(t))return Oi(t,c);if(f==k||f==g||d&&!a){if(s=u||d?{}:ya(t),!c)return u?function(t,e){return Mi(t,pa(t),e)}(t,function(t,e){return t&&Mi(e,Ts(e),t)}(s,t)):function(t,e){return Mi(t,da(t),e)}(t,ar(s,t))}else{if(!oe[f])return a?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case D:return ki(t);case v:case x:return new r(+t);case A:return function(t,e){var n=e?ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case T:case L:case R:case z:case N:case G:case F:case B:case q:return Ei(t,n);case j:case P:return new r;case O:case S:return new r(t);case C:return function(t){var e=new t.constructor(t.source,pt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case I:return i=t,Gn?Et(Gn.call(i)):{}}var i}(t,f,c)}}o||(o=new Zn);var p=o.get(t);if(p)return p;o.set(t,s),cs(t)?t.forEach((function(n){s.add(ur(n,e,r,n,t,o))})):is(t)&&t.forEach((function(n,i){s.set(i,ur(n,e,r,i,t,o))}));var m=h?n:(l?u?aa:ia:u?Ts:As)(t);return Ee(m||t,(function(n,i){m&&(n=t[i=n]),nr(s,i,ur(n,e,r,i,t,o))})),s}function lr(t,e,r){var i=r.length;if(null==t)return!i;for(t=Et(t);i--;){var a=r[i],o=e[a],s=t[a];if(s===n&&!(a in t)||!o(s))return!1}return!0}function hr(t,e,i){if("function"!=typeof t)throw new St(r);return Da((function(){t.apply(n,i)}),e)}function fr(t,e,n,r){var i=-1,a=Ie,o=!0,s=t.length,c=[],u=e.length;if(!s)return c;n&&(e=De(e,Ze(n))),r?(a=Me,o=!1):e.length>=200&&(a=Ke,o=!1,e=new Jn(e));t:for(;++i<s;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h===h){for(var f=u;f--;)if(e[f]===h)continue t;c.push(l)}else a(e,h,r)||c.push(l)}return c}Bn.templateSettings={escape:Z,evaluate:Q,interpolate:K,variable:"",imports:{_:Bn}},Bn.prototype=Yn.prototype,Bn.prototype.constructor=Bn,Xn.prototype=qn(Yn.prototype),Xn.prototype.constructor=Xn,Wn.prototype=qn(Yn.prototype),Wn.prototype.constructor=Wn,Un.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Un.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Un.prototype.get=function(t){var e=this.__data__;if(In){var r=e[t];return r===i?n:r}return Lt.call(e,t)?e[t]:n},Un.prototype.has=function(t){var e=this.__data__;return In?e[t]!==n:Lt.call(e,t)},Un.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=In&&e===n?i:e,this},Vn.prototype.clear=function(){this.__data__=[],this.size=0},Vn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,!0)},Vn.prototype.get=function(t){var e=this.__data__,r=rr(e,t);return r<0?n:e[r][1]},Vn.prototype.has=function(t){return rr(this.__data__,t)>-1},Vn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(En||Vn),string:new Un}},Hn.prototype.delete=function(t){var e=la(this,t).delete(t);return this.size-=e?1:0,e},Hn.prototype.get=function(t){return la(this,t).get(t)},Hn.prototype.has=function(t){return la(this,t).has(t)},Hn.prototype.set=function(t,e){var n=la(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Jn.prototype.add=Jn.prototype.push=function(t){return this.__data__.set(t,i),this},Jn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.clear=function(){this.__data__=new Vn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Vn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(t,e),this.size=n.size,this};var dr=Ti(wr),pr=Ti(_r,!0);function mr(t,e){var n=!0;return dr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function gr(t,e,r){for(var i=-1,a=t.length;++i<a;){var o=t[i],s=e(o);if(null!=s&&(c===n?s===s&&!ls(s):r(s,c)))var c=s,u=o}return u}function yr(t,e){var n=[];return dr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=va),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?vr(s,e-1,n,r,i):Ae(i,s):r||(i[i.length]=s)}return i}var xr=Li(),br=Li(!0);function wr(t,e){return t&&xr(t,e,As)}function _r(t,e){return t&&br(t,e,As)}function jr(t,e){return Se(e,(function(e){return $o(t[e])}))}function Or(t,e){for(var r=0,i=(e=bi(e,t)).length;null!=t&&r<i;)t=t[Na(e[r++])];return r&&r==i?t:n}function kr(t,e,n){var r=e(t);return Uo(t)?r:Ae(r,n(t))}function Er(t){return null==t?t===n?"[object Undefined]":"[object Null]":ee&&ee in Et(t)?function(t){var e=Lt.call(t,ee),r=t[ee];try{t[ee]=n;var i=!0}catch(o){}var a=Nt.call(t);i&&(e?t[ee]=r:delete t[ee]);return a}(t):function(t){return Nt.call(t)}(t)}function Cr(t,e){return t>e}function Pr(t,e){return null!=t&&Lt.call(t,e)}function Sr(t,e){return null!=t&&e in Et(t)}function Ir(t,e,r){for(var i=r?Me:Ie,a=t[0].length,o=t.length,s=o,c=at(o),u=1/0,l=[];s--;){var h=t[s];s&&e&&(h=De(h,Ze(e))),u=bn(h.length,u),c[s]=!r&&(e||a>=120&&h.length>=120)?new Jn(s&&h):n}h=t[0];var f=-1,d=c[0];t:for(;++f<a&&l.length<u;){var p=h[f],m=e?e(p):p;if(p=r||0!==p?p:0,!(d?Ke(d,m):i(l,m,r))){for(s=o;--s;){var g=c[s];if(!(g?Ke(g,m):i(t[s],m,r)))continue t}d&&d.push(m),l.push(p)}}return l}function Mr(t,e,r){var i=null==(t=Pa(t,e=bi(e,t)))?t:t[Na(Qa(e))];return null==i?n:Oe(i,t,r)}function Dr(t){return rs(t)&&Er(t)==g}function Ar(t,e,r,i,a){return t===e||(null==t||null==e||!rs(t)&&!rs(e)?t!==t&&e!==e:function(t,e,r,i,a,o){var s=Uo(t),c=Uo(e),u=s?y:ma(t),l=c?y:ma(e),h=(u=u==g?k:u)==k,f=(l=l==g?k:l)==k,d=u==l;if(d&&Zo(t)){if(!Zo(e))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new Zn),s||hs(t)?na(t,e,r,i,a,o):function(t,e,n,r,i,a,o){switch(n){case A:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!a(new Xt(t),new Xt(e)));case v:case x:case O:return qo(+t,+e);case b:return t.name==e.name&&t.message==e.message;case C:case S:return t==e+"";case j:var s=sn;case P:var c=1&r;if(s||(s=ln),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;r|=2,o.set(t,e);var l=na(s(t),s(e),r,i,a,o);return o.delete(t),l;case I:if(Gn)return Gn.call(t)==Gn.call(e)}return!1}(t,e,u,r,i,a,o);if(!(1&r)){var p=h&&Lt.call(t,"__wrapped__"),m=f&&Lt.call(e,"__wrapped__");if(p||m){var w=p?t.value():t,_=m?e.value():e;return o||(o=new Zn),a(w,_,r,i,o)}}if(!d)return!1;return o||(o=new Zn),function(t,e,r,i,a,o){var s=1&r,c=ia(t),u=c.length,l=ia(e).length;if(u!=l&&!s)return!1;var h=u;for(;h--;){var f=c[h];if(!(s?f in e:Lt.call(e,f)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var m=!0;o.set(t,e),o.set(e,t);var g=s;for(;++h<u;){var y=t[f=c[h]],v=e[f];if(i)var x=s?i(v,y,f,e,t,o):i(y,v,f,t,e,o);if(!(x===n?y===v||a(y,v,r,i,o):x)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(m=!1)}return o.delete(t),o.delete(e),m}(t,e,r,i,a,o)}(t,e,r,i,Ar,a))}function Tr(t,e,r,i){var a=r.length,o=a,s=!i;if(null==t)return!o;for(t=Et(t);a--;){var c=r[a];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<o;){var u=(c=r[a])[0],l=t[u],h=c[1];if(s&&c[2]){if(l===n&&!(u in t))return!1}else{var f=new Zn;if(i)var d=i(l,h,u,t,e,f);if(!(d===n?Ar(h,l,3,i,f):d))return!1}}return!0}function Lr(t){return!(!ns(t)||(e=t,zt&&zt in e))&&($o(t)?Bt:yt).test(Ga(t));var e}function Rr(t){return"function"==typeof t?t:null==t?ac:"object"==typeof t?Uo(t)?qr(t[0],t[1]):Br(t):pc(t)}function zr(t){if(!Oa(t))return vn(t);var e=[];for(var n in Et(t))Lt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Nr(t){if(!ns(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=Oa(t),n=[];for(var r in t)("constructor"!=r||!e&&Lt.call(t,r))&&n.push(r);return n}function Gr(t,e){return t<e}function Fr(t,e){var n=-1,r=Ho(t)?at(t.length):[];return dr(t,(function(t,i,a){r[++n]=e(t,i,a)})),r}function Br(t){var e=ha(t);return 1==e.length&&e[0][2]?Ea(e[0][0],e[0][1]):function(n){return n===t||Tr(n,t,e)}}function qr(t,e){return wa(t)&&ka(e)?Ea(Na(t),e):function(r){var i=Ps(r,t);return i===n&&i===e?Ss(r,t):Ar(e,i,3)}}function Yr(t,e,r,i,a){t!==e&&xr(e,(function(o,s){if(a||(a=new Zn),ns(o))!function(t,e,r,i,a,o,s){var c=Ia(t,r),u=Ia(e,r),l=s.get(u);if(l)return void er(t,r,l);var h=o?o(c,u,r+"",t,e,s):n,f=h===n;if(f){var d=Uo(u),p=!d&&Zo(u),m=!d&&!p&&hs(u);h=u,d||p||m?Uo(c)?h=c:Jo(c)?h=Ii(c):p?(f=!1,h=Oi(u,!0)):m?(f=!1,h=Ei(u,!0)):h=[]:os(u)||Wo(u)?(h=c,Wo(c)?h=xs(c):ns(c)&&!$o(c)||(h=ya(u))):f=!1}f&&(s.set(u,h),a(h,u,i,o,s),s.delete(u));er(t,r,h)}(t,e,s,r,Yr,i,a);else{var c=i?i(Ia(t,s),o,s+"",t,e,a):n;c===n&&(c=o),er(t,s,c)}}),Ts)}function Xr(t,e){var r=t.length;if(r)return xa(e+=e<0?r:0,r)?t[e]:n}function Wr(t,e,n){e=e.length?De(e,(function(t){return Uo(t)?function(e){return Or(e,1===t.length?t[0]:t)}:t})):[ac];var r=-1;e=De(e,Ze(ua()));var i=Fr(t,(function(t,n,i){var a=De(e,(function(e){return e(t)}));return{criteria:a,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;for(;++r<o;){var c=Ci(i[r],a[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Ur(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=Or(t,o);n(s,o)&&ti(a,bi(o,t),s)}return a}function Vr(t,e,n,r){var i=r?Be:Fe,a=-1,o=e.length,s=t;for(t===e&&(e=Ii(e)),n&&(s=De(t,Ze(n)));++a<o;)for(var c=0,u=e[a],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==t&&Jt.call(s,c,1),Jt.call(t,c,1);return t}function Hr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;xa(i)?Jt.call(t,i,1):fi(t,i)}}return t}function Jr(t,e){return t+ge(jn()*(e-t+1))}function Zr(t,e){var n="";if(!t||e<1||e>f)return n;do{e%2&&(n+=t),(e=ge(e/2))&&(t+=t)}while(e);return n}function Qr(t,e){return Aa(Ca(t,e,ac),t+"")}function Kr(t){return Kn(qs(t))}function $r(t,e){var n=qs(t);return Ra(n,cr(e,0,n.length))}function ti(t,e,r,i){if(!ns(t))return t;for(var a=-1,o=(e=bi(e,t)).length,s=o-1,c=t;null!=c&&++a<o;){var u=Na(e[a]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(a!=s){var h=c[u];(l=i?i(h,u,c):n)===n&&(l=ns(h)?h:xa(e[a+1])?[]:{})}nr(c,u,l),c=c[u]}return t}var ei=Mn?function(t,e){return Mn.set(t,e),t}:ac,ni=se?function(t,e){return se(t,"toString",{configurable:!0,enumerable:!1,value:nc(e),writable:!0})}:ac;function ri(t){return Ra(qs(t))}function ii(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=at(i);++r<i;)a[r]=t[r+e];return a}function ai(t,e){var n;return dr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function oi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=t[a];null!==o&&!ls(o)&&(n?o<=e:o<e)?r=a+1:i=a}return i}return si(t,e,ac,n)}function si(t,e,r,i){var a=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=r(e))!==e,c=null===e,u=ls(e),l=e===n;a<o;){var h=ge((a+o)/2),f=r(t[h]),d=f!==n,p=null===f,m=f===f,g=ls(f);if(s)var y=i||m;else y=l?m&&(i||d):c?m&&d&&(i||!p):u?m&&d&&!p&&(i||!g):!p&&!g&&(i?f<=e:f<e);y?a=h+1:o=h}return bn(o,4294967294)}function ci(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!qo(s,c)){var c=s;a[i++]=0===o?0:o}}return a}function ui(t){return"number"==typeof t?t:ls(t)?d:+t}function li(t){if("string"==typeof t)return t;if(Uo(t))return De(t,li)+"";if(ls(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function hi(t,e,n){var r=-1,i=Ie,a=t.length,o=!0,s=[],c=s;if(n)o=!1,i=Me;else if(a>=200){var u=e?null:Zi(t);if(u)return ln(u);o=!1,i=Ke,c=new Jn}else c=e?[]:s;t:for(;++r<a;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue t;e&&c.push(h),s.push(l)}else i(c,h,n)||(c!==s&&c.push(h),s.push(l))}return s}function fi(t,e){return null==(t=Pa(t,e=bi(e,t)))||delete t[Na(Qa(e))]}function di(t,e,n,r){return ti(t,e,n(Or(t,e)),r)}function pi(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?ii(t,r?0:a,r?a+1:i):ii(t,r?a+1:0,r?i:a)}function mi(t,e){var n=t;return n instanceof Wn&&(n=n.value()),Te(e,(function(t,e){return e.func.apply(e.thisArg,Ae([t],e.args))}),n)}function gi(t,e,n){var r=t.length;if(r<2)return r?hi(t[0]):[];for(var i=-1,a=at(r);++i<r;)for(var o=t[i],s=-1;++s<r;)s!=i&&(a[i]=fr(a[i]||o,t[s],e,n));return hi(vr(a,1),e,n)}function yi(t,e,r){for(var i=-1,a=t.length,o=e.length,s={};++i<a;){var c=i<o?e[i]:n;r(s,t[i],c)}return s}function vi(t){return Jo(t)?t:[]}function xi(t){return"function"==typeof t?t:ac}function bi(t,e){return Uo(t)?t:wa(t,e)?[t]:za(bs(t))}var wi=Qr;function _i(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:ii(t,e,r)}var ji=le||function(t){return fe.clearTimeout(t)};function Oi(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function ki(t){var e=new t.constructor(t.byteLength);return new Xt(e).set(new Xt(t)),e}function Ei(t,e){var n=e?ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ci(t,e){if(t!==e){var r=t!==n,i=null===t,a=t===t,o=ls(t),s=e!==n,c=null===e,u=e===e,l=ls(e);if(!c&&!l&&!o&&t>e||o&&s&&u&&!c&&!l||i&&s&&u||!r&&u||!a)return 1;if(!i&&!o&&!l&&t<e||l&&r&&a&&!i&&!o||c&&r&&a||!s&&a||!u)return-1}return 0}function Pi(t,e,n,r){for(var i=-1,a=t.length,o=n.length,s=-1,c=e.length,u=xn(a-o,0),l=at(c+u),h=!r;++s<c;)l[s]=e[s];for(;++i<o;)(h||i<a)&&(l[n[i]]=t[i]);for(;u--;)l[s++]=t[i++];return l}function Si(t,e,n,r){for(var i=-1,a=t.length,o=-1,s=n.length,c=-1,u=e.length,l=xn(a-s,0),h=at(l+u),f=!r;++i<l;)h[i]=t[i];for(var d=i;++c<u;)h[d+c]=e[c];for(;++o<s;)(f||i<a)&&(h[d+n[o]]=t[i++]);return h}function Ii(t,e){var n=-1,r=t.length;for(e||(e=at(r));++n<r;)e[n]=t[n];return e}function Mi(t,e,r,i){var a=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var c=e[o],u=i?i(r[c],t[c],c,r,t):n;u===n&&(u=t[c]),a?or(r,c,u):nr(r,c,u)}return r}function Di(t,e){return function(n,r){var i=Uo(n)?ke:ir,a=e?e():{};return i(n,t,ua(r,2),a)}}function Ai(t){return Qr((function(e,r){var i=-1,a=r.length,o=a>1?r[a-1]:n,s=a>2?r[2]:n;for(o=t.length>3&&"function"==typeof o?(a--,o):n,s&&ba(r[0],r[1],s)&&(o=a<3?n:o,a=1),e=Et(e);++i<a;){var c=r[i];c&&t(e,c,i,o)}return e}))}function Ti(t,e){return function(n,r){if(null==n)return n;if(!Ho(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Et(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Li(t){return function(e,n,r){for(var i=-1,a=Et(e),o=r(e),s=o.length;s--;){var c=o[t?s:++i];if(!1===n(a[c],c,a))break}return e}}function Ri(t){return function(e){var r=on(e=bs(e))?dn(e):n,i=r?r[0]:e.charAt(0),a=r?_i(r,1).join(""):e.slice(1);return i[t]()+a}}function zi(t){return function(e){return Te($s(Ws(e).replace(Qt,"")),t,"")}}function Ni(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=qn(t.prototype),r=t.apply(n,e);return ns(r)?r:n}}function Gi(t){return function(e,r,i){var a=Et(e);if(!Ho(e)){var o=ua(r,3);e=As(e),r=function(t){return o(a[t],t,a)}}var s=t(e,r,i);return s>-1?a[o?e[s]:s]:n}}function Fi(t){return ra((function(e){var i=e.length,a=i,o=Xn.prototype.thru;for(t&&e.reverse();a--;){var s=e[a];if("function"!=typeof s)throw new St(r);if(o&&!c&&"wrapper"==sa(s))var c=new Xn([],!0)}for(a=c?a:i;++a<i;){var u=sa(s=e[a]),l="wrapper"==u?oa(s):n;c=l&&_a(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[sa(l[0])].apply(c,l[3]):1==s.length&&_a(s)?c[u]():c.thru(s)}return function(){var t=arguments,n=t[0];if(c&&1==t.length&&Uo(n))return c.plant(n).value();for(var r=0,a=i?e[r].apply(this,t):n;++r<i;)a=e[r].call(this,a);return a}}))}function Bi(t,e,r,i,a,o,s,c,l,h){var f=e&u,d=1&e,p=2&e,m=24&e,g=512&e,y=p?n:Ni(t);return function n(){for(var u=arguments.length,v=at(u),x=u;x--;)v[x]=arguments[x];if(m)var b=ca(n),w=en(v,b);if(i&&(v=Pi(v,i,a,m)),o&&(v=Si(v,o,s,m)),u-=w,m&&u<h){var _=un(v,b);return Hi(t,e,Bi,n.placeholder,r,v,_,c,l,h-u)}var j=d?r:this,O=p?j[t]:t;return u=v.length,c?v=Sa(v,c):g&&u>1&&v.reverse(),f&&l<u&&(v.length=l),this&&this!==fe&&this instanceof n&&(O=y||Ni(O)),O.apply(j,v)}}function qi(t,e){return function(n,r){return function(t,e,n,r){return wr(t,(function(t,i,a){e(r,n(t),i,a)})),r}(n,t,e(r),{})}}function Yi(t,e){return function(r,i){var a;if(r===n&&i===n)return e;if(r!==n&&(a=r),i!==n){if(a===n)return i;"string"==typeof r||"string"==typeof i?(r=li(r),i=li(i)):(r=ui(r),i=ui(i)),a=t(r,i)}return a}}function Xi(t){return ra((function(e){return e=De(e,Ze(ua())),Qr((function(n){var r=this;return t(e,(function(t){return Oe(t,r,n)}))}))}))}function Wi(t,e){var r=(e=e===n?" ":li(e)).length;if(r<2)return r?Zr(e,t):e;var i=Zr(e,pe(t/fn(e)));return on(e)?_i(dn(i),0,t).join(""):i.slice(0,t)}function Ui(t){return function(e,r,i){return i&&"number"!=typeof i&&ba(e,r,i)&&(r=i=n),e=ms(e),r===n?(r=e,e=0):r=ms(r),function(t,e,n,r){for(var i=-1,a=xn(pe((e-t)/(n||1)),0),o=at(a);a--;)o[r?a:++i]=t,t+=n;return o}(e,r,i=i===n?e<r?1:-1:ms(i),t)}}function Vi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Hi(t,e,r,i,a,o,u,l,h,f){var d=8&e;e|=d?s:c,4&(e&=~(d?c:s))||(e&=-4);var p=[t,e,a,d?o:n,d?u:n,d?n:o,d?n:u,l,h,f],m=r.apply(n,p);return _a(t)&&Ma(m,p),m.placeholder=i,Ta(m,t,e)}function Ji(t){var e=kt[t];return function(t,n){if(t=vs(t),(n=null==n?0:bn(gs(n),292))&&We(t)){var r=(bs(t)+"e").split("e");return+((r=(bs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Zi=Pn&&1/ln(new Pn([,-0]))[1]==h?function(t){return new Pn(t)}:lc;function Qi(t){return function(e){var n=ma(e);return n==j?sn(e):n==P?hn(e):function(t,e){return De(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ki(t,e,i,h,f,d,p,m){var g=2&e;if(!g&&"function"!=typeof t)throw new St(r);var y=h?h.length:0;if(y||(e&=-97,h=f=n),p=p===n?p:xn(gs(p),0),m=m===n?m:gs(m),y-=f?f.length:0,e&c){var v=h,x=f;h=f=n}var b=g?n:oa(t),w=[t,e,i,h,f,v,x,d,p,m];if(b&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==u&&8==n||r==u&&n==l&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var h=t[3];t[3]=h?Pi(h,c,e[4]):c,t[4]=h?un(t[3],a):e[4]}(c=e[5])&&(h=t[5],t[5]=h?Si(h,c,e[6]):c,t[6]=h?un(t[5],a):e[6]);(c=e[7])&&(t[7]=c);r&u&&(t[8]=null==t[8]?e[8]:bn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(w,b),t=w[0],e=w[1],i=w[2],h=w[3],f=w[4],!(m=w[9]=w[9]===n?g?0:t.length:xn(w[9]-y,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||e==o?function(t,e,r){var i=Ni(t);return function a(){for(var o=arguments.length,s=at(o),c=o,u=ca(a);c--;)s[c]=arguments[c];var l=o<3&&s[0]!==u&&s[o-1]!==u?[]:un(s,u);return(o-=l.length)<r?Hi(t,e,Bi,a.placeholder,n,s,l,n,n,r-o):Oe(this&&this!==fe&&this instanceof a?i:t,this,s)}}(t,e,m):e!=s&&33!=e||f.length?Bi.apply(n,w):function(t,e,n,r){var i=1&e,a=Ni(t);return function e(){for(var o=-1,s=arguments.length,c=-1,u=r.length,l=at(u+s),h=this&&this!==fe&&this instanceof e?a:t;++c<u;)l[c]=r[c];for(;s--;)l[c++]=arguments[++o];return Oe(h,i?n:this,l)}}(t,e,i,h);else var _=function(t,e,n){var r=1&e,i=Ni(t);return function e(){return(this&&this!==fe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,i);return Ta((b?ei:Ma)(_,w),t,e)}function $i(t,e,r,i){return t===n||qo(t,Dt[r])&&!Lt.call(i,r)?e:t}function ta(t,e,r,i,a,o){return ns(t)&&ns(e)&&(o.set(e,t),Yr(t,e,n,ta,o),o.delete(e)),t}function ea(t){return os(t)?n:t}function na(t,e,r,i,a,o){var s=1&r,c=t.length,u=e.length;if(c!=u&&!(s&&u>c))return!1;var l=o.get(t),h=o.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,p=2&r?new Jn:n;for(o.set(t,e),o.set(e,t);++f<c;){var m=t[f],g=e[f];if(i)var y=s?i(g,m,f,e,t,o):i(m,g,f,t,e,o);if(y!==n){if(y)continue;d=!1;break}if(p){if(!Re(e,(function(t,e){if(!Ke(p,e)&&(m===t||a(m,t,r,i,o)))return p.push(e)}))){d=!1;break}}else if(m!==g&&!a(m,g,r,i,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function ra(t){return Aa(Ca(t,n,Ua),t+"")}function ia(t){return kr(t,As,da)}function aa(t){return kr(t,Ts,pa)}var oa=Mn?function(t){return Mn.get(t)}:lc;function sa(t){for(var e=t.name+"",n=Dn[e],r=Lt.call(Dn,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function ca(t){return(Lt.call(Bn,"placeholder")?Bn:t).placeholder}function ua(){var t=Bn.iteratee||oc;return t=t===oc?Rr:t,arguments.length?t(arguments[0],arguments[1]):t}function la(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ha(t){for(var e=As(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ka(i)]}return e}function fa(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return Lr(r)?r:n}var da=ye?function(t){return null==t?[]:(t=Et(t),Se(ye(t),(function(e){return Ht.call(t,e)})))}:yc,pa=ye?function(t){for(var e=[];t;)Ae(e,da(t)),t=Ut(t);return e}:yc,ma=Er;function ga(t,e,n){for(var r=-1,i=(e=bi(e,t)).length,a=!1;++r<i;){var o=Na(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&es(i)&&xa(o,i)&&(Uo(t)||Wo(t))}function ya(t){return"function"!=typeof t.constructor||Oa(t)?{}:qn(Ut(t))}function va(t){return Uo(t)||Wo(t)||!!(Zt&&t&&t[Zt])}function xa(t,e){var n=typeof t;return!!(e=null==e?f:e)&&("number"==n||"symbol"!=n&&xt.test(t))&&t>-1&&t%1==0&&t<e}function ba(t,e,n){if(!ns(n))return!1;var r=typeof e;return!!("number"==r?Ho(n)&&xa(e,n.length):"string"==r&&e in n)&&qo(n[e],t)}function wa(t,e){if(Uo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ls(t))||(tt.test(t)||!$.test(t)||null!=e&&t in Et(e))}function _a(t){var e=sa(t),n=Bn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=oa(n);return!!r&&t===r[0]}(kn&&ma(new kn(new ArrayBuffer(1)))!=A||En&&ma(new En)!=j||Cn&&ma(Cn.resolve())!=E||Pn&&ma(new Pn)!=P||Sn&&ma(new Sn)!=M)&&(ma=function(t){var e=Er(t),r=e==k?t.constructor:n,i=r?Ga(r):"";if(i)switch(i){case An:return A;case Tn:return j;case Ln:return E;case Rn:return P;case zn:return M}return e});var ja=At?$o:vc;function Oa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function ka(t){return t===t&&!ns(t)}function Ea(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in Et(r)))}}function Ca(t,e,r){return e=xn(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=xn(n.length-e,0),o=at(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=at(e+1);++i<e;)s[i]=n[i];return s[e]=r(o),Oe(t,this,s)}}function Pa(t,e){return e.length<2?t:Or(t,ii(e,0,-1))}function Sa(t,e){for(var r=t.length,i=bn(e.length,r),a=Ii(t);i--;){var o=e[i];t[i]=xa(o,r)?a[o]:n}return t}function Ia(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Ma=La(ei),Da=de||function(t,e){return fe.setTimeout(t,e)},Aa=La(ni);function Ta(t,e,n){var r=e+"";return Aa(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ee(m,(function(n){var r="_."+n[0];e&n[1]&&!Ie(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(ct):[]}(r),n)))}function La(t){var e=0,r=0;return function(){var i=wn(),a=16-(i-r);if(r=i,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Ra(t,e){var r=-1,i=t.length,a=i-1;for(e=e===n?i:e;++r<e;){var o=Jr(r,a),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var za=function(t){var e=Ro(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e}));function Na(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ga(t){if(null!=t){try{return Tt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Fa(t){if(t instanceof Wn)return t.clone();var e=new Xn(t.__wrapped__,t.__chain__);return e.__actions__=Ii(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ba=Qr((function(t,e){return Jo(t)?fr(t,vr(e,1,Jo,!0)):[]})),qa=Qr((function(t,e){var r=Qa(e);return Jo(r)&&(r=n),Jo(t)?fr(t,vr(e,1,Jo,!0),ua(r,2)):[]})),Ya=Qr((function(t,e){var r=Qa(e);return Jo(r)&&(r=n),Jo(t)?fr(t,vr(e,1,Jo,!0),n,r):[]}));function Xa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=xn(r+i,0)),Ge(t,ua(e,3),i)}function Wa(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var a=i-1;return r!==n&&(a=gs(r),a=r<0?xn(i+a,0):bn(a,i-1)),Ge(t,ua(e,3),a,!0)}function Ua(t){return(null==t?0:t.length)?vr(t,1):[]}function Va(t){return t&&t.length?t[0]:n}var Ha=Qr((function(t){var e=De(t,vi);return e.length&&e[0]===t[0]?Ir(e):[]})),Ja=Qr((function(t){var e=Qa(t),r=De(t,vi);return e===Qa(r)?e=n:r.pop(),r.length&&r[0]===t[0]?Ir(r,ua(e,2)):[]})),Za=Qr((function(t){var e=Qa(t),r=De(t,vi);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?Ir(r,n,e):[]}));function Qa(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Ka=Qr($a);function $a(t,e){return t&&t.length&&e&&e.length?Vr(t,e):t}var to=ra((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return Hr(t,De(e,(function(t){return xa(t,n)?+t:t})).sort(Ci)),r}));function eo(t){return null==t?t:On.call(t)}var no=Qr((function(t){return hi(vr(t,1,Jo,!0))})),ro=Qr((function(t){var e=Qa(t);return Jo(e)&&(e=n),hi(vr(t,1,Jo,!0),ua(e,2))})),io=Qr((function(t){var e=Qa(t);return e="function"==typeof e?e:n,hi(vr(t,1,Jo,!0),n,e)}));function ao(t){if(!t||!t.length)return[];var e=0;return t=Se(t,(function(t){if(Jo(t))return e=xn(t.length,e),!0})),He(e,(function(e){return De(t,Xe(e))}))}function oo(t,e){if(!t||!t.length)return[];var r=ao(t);return null==e?r:De(r,(function(t){return Oe(e,n,t)}))}var so=Qr((function(t,e){return Jo(t)?fr(t,e):[]})),co=Qr((function(t){return gi(Se(t,Jo))})),uo=Qr((function(t){var e=Qa(t);return Jo(e)&&(e=n),gi(Se(t,Jo),ua(e,2))})),lo=Qr((function(t){var e=Qa(t);return e="function"==typeof e?e:n,gi(Se(t,Jo),n,e)})),ho=Qr(ao);var fo=Qr((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,oo(t,r)}));function po(t){var e=Bn(t);return e.__chain__=!0,e}function mo(t,e){return e(t)}var go=ra((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,a=function(e){return sr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Wn&&xa(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:mo,args:[a],thisArg:n}),new Xn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(a)}));var yo=Di((function(t,e,n){Lt.call(t,n)?++t[n]:or(t,n,1)}));var vo=Gi(Xa),xo=Gi(Wa);function bo(t,e){return(Uo(t)?Ee:dr)(t,ua(e,3))}function wo(t,e){return(Uo(t)?Ce:pr)(t,ua(e,3))}var _o=Di((function(t,e,n){Lt.call(t,n)?t[n].push(e):or(t,n,[e])}));var jo=Qr((function(t,e,n){var r=-1,i="function"==typeof e,a=Ho(t)?at(t.length):[];return dr(t,(function(t){a[++r]=i?Oe(e,t,n):Mr(t,e,n)})),a})),Oo=Di((function(t,e,n){or(t,n,e)}));function ko(t,e){return(Uo(t)?De:Fr)(t,ua(e,3))}var Eo=Di((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Co=Qr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ba(t,e[0],e[1])?e=[]:n>2&&ba(e[0],e[1],e[2])&&(e=[e[0]]),Wr(t,vr(e,1),[])})),Po=he||function(){return fe.Date.now()};function So(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Ki(t,u,n,n,n,n,e)}function Io(t,e){var i;if("function"!=typeof e)throw new St(r);return t=gs(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var Mo=Qr((function(t,e,n){var r=1;if(n.length){var i=un(n,ca(Mo));r|=s}return Ki(t,r,e,n,i)})),Do=Qr((function(t,e,n){var r=3;if(n.length){var i=un(n,ca(Do));r|=s}return Ki(e,r,t,n,i)}));function Ao(t,e,i){var a,o,s,c,u,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new St(r);function m(e){var r=a,i=o;return a=o=n,h=e,c=t.apply(i,r)}function g(t){return h=t,u=Da(v,e),f?m(t):c}function y(t){var r=t-l;return l===n||r>=e||r<0||d&&t-h>=s}function v(){var t=Po();if(y(t))return x(t);u=Da(v,function(t){var n=e-(t-l);return d?bn(n,s-(t-h)):n}(t))}function x(t){return u=n,p&&a?m(t):(a=o=n,c)}function b(){var t=Po(),r=y(t);if(a=arguments,o=this,l=t,r){if(u===n)return g(l);if(d)return ji(u),u=Da(v,e),m(l)}return u===n&&(u=Da(v,e)),c}return e=vs(e)||0,ns(i)&&(f=!!i.leading,s=(d="maxWait"in i)?xn(vs(i.maxWait)||0,e):s,p="trailing"in i?!!i.trailing:p),b.cancel=function(){u!==n&&ji(u),h=0,a=l=o=u=n},b.flush=function(){return u===n?c:x(Po())},b}var To=Qr((function(t,e){return hr(t,1,e)})),Lo=Qr((function(t,e,n){return hr(t,vs(e)||0,n)}));function Ro(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new St(r);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Ro.Cache||Hn),n}function zo(t){if("function"!=typeof t)throw new St(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ro.Cache=Hn;var No=wi((function(t,e){var n=(e=1==e.length&&Uo(e[0])?De(e[0],Ze(ua())):De(vr(e,1),Ze(ua()))).length;return Qr((function(r){for(var i=-1,a=bn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return Oe(t,this,r)}))})),Go=Qr((function(t,e){var r=un(e,ca(Go));return Ki(t,s,n,e,r)})),Fo=Qr((function(t,e){var r=un(e,ca(Fo));return Ki(t,c,n,e,r)})),Bo=ra((function(t,e){return Ki(t,l,n,n,n,e)}));function qo(t,e){return t===e||t!==t&&e!==e}var Yo=Vi(Cr),Xo=Vi((function(t,e){return t>=e})),Wo=Dr(function(){return arguments}())?Dr:function(t){return rs(t)&&Lt.call(t,"callee")&&!Ht.call(t,"callee")},Uo=at.isArray,Vo=ve?Ze(ve):function(t){return rs(t)&&Er(t)==D};function Ho(t){return null!=t&&es(t.length)&&!$o(t)}function Jo(t){return rs(t)&&Ho(t)}var Zo=ze||vc,Qo=xe?Ze(xe):function(t){return rs(t)&&Er(t)==x};function Ko(t){if(!rs(t))return!1;var e=Er(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function $o(t){if(!ns(t))return!1;var e=Er(t);return e==w||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ts(t){return"number"==typeof t&&t==gs(t)}function es(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function ns(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function rs(t){return null!=t&&"object"==typeof t}var is=be?Ze(be):function(t){return rs(t)&&ma(t)==j};function as(t){return"number"==typeof t||rs(t)&&Er(t)==O}function os(t){if(!rs(t)||Er(t)!=k)return!1;var e=Ut(t);if(null===e)return!0;var n=Lt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Tt.call(n)==Gt}var ss=we?Ze(we):function(t){return rs(t)&&Er(t)==C};var cs=_e?Ze(_e):function(t){return rs(t)&&ma(t)==P};function us(t){return"string"==typeof t||!Uo(t)&&rs(t)&&Er(t)==S}function ls(t){return"symbol"==typeof t||rs(t)&&Er(t)==I}var hs=je?Ze(je):function(t){return rs(t)&&es(t.length)&&!!ae[Er(t)]};var fs=Vi(Gr),ds=Vi((function(t,e){return t<=e}));function ps(t){if(!t)return[];if(Ho(t))return us(t)?dn(t):Ii(t);if($t&&t[$t])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[$t]());var e=ma(t);return(e==j?sn:e==P?ln:qs)(t)}function ms(t){return t?(t=vs(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function gs(t){var e=ms(t),n=e%1;return e===e?n?e-n:e:0}function ys(t){return t?cr(gs(t),0,p):0}function vs(t){if("number"==typeof t)return t;if(ls(t))return d;if(ns(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ns(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Je(t);var n=gt.test(t);return n||vt.test(t)?ue(t.slice(2),n?2:8):mt.test(t)?d:+t}function xs(t){return Mi(t,Ts(t))}function bs(t){return null==t?"":li(t)}var ws=Ai((function(t,e){if(Oa(e)||Ho(e))Mi(e,As(e),t);else for(var n in e)Lt.call(e,n)&&nr(t,n,e[n])})),_s=Ai((function(t,e){Mi(e,Ts(e),t)})),js=Ai((function(t,e,n,r){Mi(e,Ts(e),t,r)})),Os=Ai((function(t,e,n,r){Mi(e,As(e),t,r)})),ks=ra(sr);var Es=Qr((function(t,e){t=Et(t);var r=-1,i=e.length,a=i>2?e[2]:n;for(a&&ba(e[0],e[1],a)&&(i=1);++r<i;)for(var o=e[r],s=Ts(o),c=-1,u=s.length;++c<u;){var l=s[c],h=t[l];(h===n||qo(h,Dt[l])&&!Lt.call(t,l))&&(t[l]=o[l])}return t})),Cs=Qr((function(t){return t.push(n,ta),Oe(Rs,n,t)}));function Ps(t,e,r){var i=null==t?n:Or(t,e);return i===n?r:i}function Ss(t,e){return null!=t&&ga(t,e,Sr)}var Is=qi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),t[e]=n}),nc(ac)),Ms=qi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),Lt.call(t,e)?t[e].push(n):t[e]=[n]}),ua),Ds=Qr(Mr);function As(t){return Ho(t)?Qn(t):zr(t)}function Ts(t){return Ho(t)?Qn(t,!0):Nr(t)}var Ls=Ai((function(t,e,n){Yr(t,e,n)})),Rs=Ai((function(t,e,n,r){Yr(t,e,n,r)})),zs=ra((function(t,e){var n={};if(null==t)return n;var r=!1;e=De(e,(function(e){return e=bi(e,t),r||(r=e.length>1),e})),Mi(t,aa(t),n),r&&(n=ur(n,7,ea));for(var i=e.length;i--;)fi(n,e[i]);return n}));var Ns=ra((function(t,e){return null==t?{}:function(t,e){return Ur(t,e,(function(e,n){return Ss(t,n)}))}(t,e)}));function Gs(t,e){if(null==t)return{};var n=De(aa(t),(function(t){return[t]}));return e=ua(e),Ur(t,n,(function(t,n){return e(t,n[0])}))}var Fs=Qi(As),Bs=Qi(Ts);function qs(t){return null==t?[]:Qe(t,As(t))}var Ys=zi((function(t,e,n){return e=e.toLowerCase(),t+(n?Xs(e):e)}));function Xs(t){return Ks(bs(t).toLowerCase())}function Ws(t){return(t=bs(t))&&t.replace(bt,nn).replace(Kt,"")}var Us=zi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Vs=zi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Hs=Ri("toLowerCase");var Js=zi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Zs=zi((function(t,e,n){return t+(n?" ":"")+Ks(e)}));var Qs=zi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=Ri("toUpperCase");function $s(t,e,r){return t=bs(t),(e=r?n:e)===n?function(t){return ne.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var tc=Qr((function(t,e){try{return Oe(t,n,e)}catch(r){return Ko(r)?r:new jt(r)}})),ec=ra((function(t,e){return Ee(e,(function(e){e=Na(e),or(t,e,Mo(t[e],t))})),t}));function nc(t){return function(){return t}}var rc=Fi(),ic=Fi(!0);function ac(t){return t}function oc(t){return Rr("function"==typeof t?t:ur(t,1))}var sc=Qr((function(t,e){return function(n){return Mr(n,t,e)}})),cc=Qr((function(t,e){return function(n){return Mr(t,n,e)}}));function uc(t,e,n){var r=As(e),i=jr(e,r);null!=n||ns(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=jr(e,As(e)));var a=!(ns(n)&&"chain"in n)||!!n.chain,o=$o(t);return Ee(i,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),i=n.__actions__=Ii(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ae([this.value()],arguments))})})),t}function lc(){}var hc=Xi(De),fc=Xi(Pe),dc=Xi(Re);function pc(t){return wa(t)?Xe(Na(t)):function(t){return function(e){return Or(e,t)}}(t)}var mc=Ui(),gc=Ui(!0);function yc(){return[]}function vc(){return!1}var xc=Yi((function(t,e){return t+e}),0),bc=Ji("ceil"),wc=Yi((function(t,e){return t/e}),1),_c=Ji("floor");var jc=Yi((function(t,e){return t*e}),1),Oc=Ji("round"),kc=Yi((function(t,e){return t-e}),0);return Bn.after=function(t,e){if("function"!=typeof e)throw new St(r);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},Bn.ary=So,Bn.assign=ws,Bn.assignIn=_s,Bn.assignInWith=js,Bn.assignWith=Os,Bn.at=ks,Bn.before=Io,Bn.bind=Mo,Bn.bindAll=ec,Bn.bindKey=Do,Bn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Uo(t)?t:[t]},Bn.chain=po,Bn.chunk=function(t,e,r){e=(r?ba(t,e,r):e===n)?1:xn(gs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,o=0,s=at(pe(i/e));a<i;)s[o++]=ii(t,a,a+=e);return s},Bn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},Bn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=at(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ae(Uo(n)?Ii(n):[n],vr(e,1))},Bn.cond=function(t){var e=null==t?0:t.length,n=ua();return t=e?De(t,(function(t){if("function"!=typeof t[1])throw new St(r);return[n(t[0]),t[1]]})):[],Qr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Oe(i[0],this,n))return Oe(i[1],this,n)}}))},Bn.conforms=function(t){return function(t){var e=As(t);return function(n){return lr(n,t,e)}}(ur(t,1))},Bn.constant=nc,Bn.countBy=yo,Bn.create=function(t,e){var n=qn(t);return null==e?n:ar(n,e)},Bn.curry=function t(e,r,i){var a=Ki(e,8,n,n,n,n,n,r=i?n:r);return a.placeholder=t.placeholder,a},Bn.curryRight=function t(e,r,i){var a=Ki(e,o,n,n,n,n,n,r=i?n:r);return a.placeholder=t.placeholder,a},Bn.debounce=Ao,Bn.defaults=Es,Bn.defaultsDeep=Cs,Bn.defer=To,Bn.delay=Lo,Bn.difference=Ba,Bn.differenceBy=qa,Bn.differenceWith=Ya,Bn.drop=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,(e=r||e===n?1:gs(e))<0?0:e,i):[]},Bn.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,0,(e=i-(e=r||e===n?1:gs(e)))<0?0:e):[]},Bn.dropRightWhile=function(t,e){return t&&t.length?pi(t,ua(e,3),!0,!0):[]},Bn.dropWhile=function(t,e){return t&&t.length?pi(t,ua(e,3),!0):[]},Bn.fill=function(t,e,r,i){var a=null==t?0:t.length;return a?(r&&"number"!=typeof r&&ba(t,e,r)&&(r=0,i=a),function(t,e,r,i){var a=t.length;for((r=gs(r))<0&&(r=-r>a?0:a+r),(i=i===n||i>a?a:gs(i))<0&&(i+=a),i=r>i?0:ys(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},Bn.filter=function(t,e){return(Uo(t)?Se:yr)(t,ua(e,3))},Bn.flatMap=function(t,e){return vr(ko(t,e),1)},Bn.flatMapDeep=function(t,e){return vr(ko(t,e),h)},Bn.flatMapDepth=function(t,e,r){return r=r===n?1:gs(r),vr(ko(t,e),r)},Bn.flatten=Ua,Bn.flattenDeep=function(t){return(null==t?0:t.length)?vr(t,h):[]},Bn.flattenDepth=function(t,e){return(null==t?0:t.length)?vr(t,e=e===n?1:gs(e)):[]},Bn.flip=function(t){return Ki(t,512)},Bn.flow=rc,Bn.flowRight=ic,Bn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Bn.functions=function(t){return null==t?[]:jr(t,As(t))},Bn.functionsIn=function(t){return null==t?[]:jr(t,Ts(t))},Bn.groupBy=_o,Bn.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},Bn.intersection=Ha,Bn.intersectionBy=Ja,Bn.intersectionWith=Za,Bn.invert=Is,Bn.invertBy=Ms,Bn.invokeMap=jo,Bn.iteratee=oc,Bn.keyBy=Oo,Bn.keys=As,Bn.keysIn=Ts,Bn.map=ko,Bn.mapKeys=function(t,e){var n={};return e=ua(e,3),wr(t,(function(t,r,i){or(n,e(t,r,i),t)})),n},Bn.mapValues=function(t,e){var n={};return e=ua(e,3),wr(t,(function(t,r,i){or(n,r,e(t,r,i))})),n},Bn.matches=function(t){return Br(ur(t,1))},Bn.matchesProperty=function(t,e){return qr(t,ur(e,1))},Bn.memoize=Ro,Bn.merge=Ls,Bn.mergeWith=Rs,Bn.method=sc,Bn.methodOf=cc,Bn.mixin=uc,Bn.negate=zo,Bn.nthArg=function(t){return t=gs(t),Qr((function(e){return Xr(e,t)}))},Bn.omit=zs,Bn.omitBy=function(t,e){return Gs(t,zo(ua(e)))},Bn.once=function(t){return Io(2,t)},Bn.orderBy=function(t,e,r,i){return null==t?[]:(Uo(e)||(e=null==e?[]:[e]),Uo(r=i?n:r)||(r=null==r?[]:[r]),Wr(t,e,r))},Bn.over=hc,Bn.overArgs=No,Bn.overEvery=fc,Bn.overSome=dc,Bn.partial=Go,Bn.partialRight=Fo,Bn.partition=Eo,Bn.pick=Ns,Bn.pickBy=Gs,Bn.property=pc,Bn.propertyOf=function(t){return function(e){return null==t?n:Or(t,e)}},Bn.pull=Ka,Bn.pullAll=$a,Bn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Vr(t,e,ua(n,2)):t},Bn.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Vr(t,e,n,r):t},Bn.pullAt=to,Bn.range=mc,Bn.rangeRight=gc,Bn.rearg=Bo,Bn.reject=function(t,e){return(Uo(t)?Se:yr)(t,zo(ua(e,3)))},Bn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=ua(e,3);++r<a;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return Hr(t,i),n},Bn.rest=function(t,e){if("function"!=typeof t)throw new St(r);return Qr(t,e=e===n?e:gs(e))},Bn.reverse=eo,Bn.sampleSize=function(t,e,r){return e=(r?ba(t,e,r):e===n)?1:gs(e),(Uo(t)?$n:$r)(t,e)},Bn.set=function(t,e,n){return null==t?t:ti(t,e,n)},Bn.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:ti(t,e,r,i)},Bn.shuffle=function(t){return(Uo(t)?tr:ri)(t)},Bn.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&ba(t,e,r)?(e=0,r=i):(e=null==e?0:gs(e),r=r===n?i:gs(r)),ii(t,e,r)):[]},Bn.sortBy=Co,Bn.sortedUniq=function(t){return t&&t.length?ci(t):[]},Bn.sortedUniqBy=function(t,e){return t&&t.length?ci(t,ua(e,2)):[]},Bn.split=function(t,e,r){return r&&"number"!=typeof r&&ba(t,e,r)&&(e=r=n),(r=r===n?p:r>>>0)?(t=bs(t))&&("string"==typeof e||null!=e&&!ss(e))&&!(e=li(e))&&on(t)?_i(dn(t),0,r):t.split(e,r):[]},Bn.spread=function(t,e){if("function"!=typeof t)throw new St(r);return e=null==e?0:xn(gs(e),0),Qr((function(n){var r=n[e],i=_i(n,0,e);return r&&Ae(i,r),Oe(t,this,i)}))},Bn.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},Bn.take=function(t,e,r){return t&&t.length?ii(t,0,(e=r||e===n?1:gs(e))<0?0:e):[]},Bn.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,(e=i-(e=r||e===n?1:gs(e)))<0?0:e,i):[]},Bn.takeRightWhile=function(t,e){return t&&t.length?pi(t,ua(e,3),!1,!0):[]},Bn.takeWhile=function(t,e){return t&&t.length?pi(t,ua(e,3)):[]},Bn.tap=function(t,e){return e(t),t},Bn.throttle=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new St(r);return ns(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),Ao(t,e,{leading:i,maxWait:e,trailing:a})},Bn.thru=mo,Bn.toArray=ps,Bn.toPairs=Fs,Bn.toPairsIn=Bs,Bn.toPath=function(t){return Uo(t)?De(t,Na):ls(t)?[t]:Ii(za(bs(t)))},Bn.toPlainObject=xs,Bn.transform=function(t,e,n){var r=Uo(t),i=r||Zo(t)||hs(t);if(e=ua(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:ns(t)&&$o(a)?qn(Ut(t)):{}}return(i?Ee:wr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Bn.unary=function(t){return So(t,1)},Bn.union=no,Bn.unionBy=ro,Bn.unionWith=io,Bn.uniq=function(t){return t&&t.length?hi(t):[]},Bn.uniqBy=function(t,e){return t&&t.length?hi(t,ua(e,2)):[]},Bn.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?hi(t,n,e):[]},Bn.unset=function(t,e){return null==t||fi(t,e)},Bn.unzip=ao,Bn.unzipWith=oo,Bn.update=function(t,e,n){return null==t?t:di(t,e,xi(n))},Bn.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:di(t,e,xi(r),i)},Bn.values=qs,Bn.valuesIn=function(t){return null==t?[]:Qe(t,Ts(t))},Bn.without=so,Bn.words=$s,Bn.wrap=function(t,e){return Go(xi(e),t)},Bn.xor=co,Bn.xorBy=uo,Bn.xorWith=lo,Bn.zip=ho,Bn.zipObject=function(t,e){return yi(t||[],e||[],nr)},Bn.zipObjectDeep=function(t,e){return yi(t||[],e||[],ti)},Bn.zipWith=fo,Bn.entries=Fs,Bn.entriesIn=Bs,Bn.extend=_s,Bn.extendWith=js,uc(Bn,Bn),Bn.add=xc,Bn.attempt=tc,Bn.camelCase=Ys,Bn.capitalize=Xs,Bn.ceil=bc,Bn.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=vs(r))===r?r:0),e!==n&&(e=(e=vs(e))===e?e:0),cr(vs(t),e,r)},Bn.clone=function(t){return ur(t,4)},Bn.cloneDeep=function(t){return ur(t,5)},Bn.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:n)},Bn.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:n)},Bn.conformsTo=function(t,e){return null==e||lr(t,e,As(e))},Bn.deburr=Ws,Bn.defaultTo=function(t,e){return null==t||t!==t?e:t},Bn.divide=wc,Bn.endsWith=function(t,e,r){t=bs(t),e=li(e);var i=t.length,a=r=r===n?i:cr(gs(r),0,i);return(r-=e.length)>=0&&t.slice(r,a)==e},Bn.eq=qo,Bn.escape=function(t){return(t=bs(t))&&J.test(t)?t.replace(V,rn):t},Bn.escapeRegExp=function(t){return(t=bs(t))&&rt.test(t)?t.replace(nt,"\\$&"):t},Bn.every=function(t,e,r){var i=Uo(t)?Pe:mr;return r&&ba(t,e,r)&&(e=n),i(t,ua(e,3))},Bn.find=vo,Bn.findIndex=Xa,Bn.findKey=function(t,e){return Ne(t,ua(e,3),wr)},Bn.findLast=xo,Bn.findLastIndex=Wa,Bn.findLastKey=function(t,e){return Ne(t,ua(e,3),_r)},Bn.floor=_c,Bn.forEach=bo,Bn.forEachRight=wo,Bn.forIn=function(t,e){return null==t?t:xr(t,ua(e,3),Ts)},Bn.forInRight=function(t,e){return null==t?t:br(t,ua(e,3),Ts)},Bn.forOwn=function(t,e){return t&&wr(t,ua(e,3))},Bn.forOwnRight=function(t,e){return t&&_r(t,ua(e,3))},Bn.get=Ps,Bn.gt=Yo,Bn.gte=Xo,Bn.has=function(t,e){return null!=t&&ga(t,e,Pr)},Bn.hasIn=Ss,Bn.head=Va,Bn.identity=ac,Bn.includes=function(t,e,n,r){t=Ho(t)?t:qs(t),n=n&&!r?gs(n):0;var i=t.length;return n<0&&(n=xn(i+n,0)),us(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Fe(t,e,n)>-1},Bn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=xn(r+i,0)),Fe(t,e,i)},Bn.inRange=function(t,e,r){return e=ms(e),r===n?(r=e,e=0):r=ms(r),function(t,e,n){return t>=bn(e,n)&&t<xn(e,n)}(t=vs(t),e,r)},Bn.invoke=Ds,Bn.isArguments=Wo,Bn.isArray=Uo,Bn.isArrayBuffer=Vo,Bn.isArrayLike=Ho,Bn.isArrayLikeObject=Jo,Bn.isBoolean=function(t){return!0===t||!1===t||rs(t)&&Er(t)==v},Bn.isBuffer=Zo,Bn.isDate=Qo,Bn.isElement=function(t){return rs(t)&&1===t.nodeType&&!os(t)},Bn.isEmpty=function(t){if(null==t)return!0;if(Ho(t)&&(Uo(t)||"string"==typeof t||"function"==typeof t.splice||Zo(t)||hs(t)||Wo(t)))return!t.length;var e=ma(t);if(e==j||e==P)return!t.size;if(Oa(t))return!zr(t).length;for(var n in t)if(Lt.call(t,n))return!1;return!0},Bn.isEqual=function(t,e){return Ar(t,e)},Bn.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?Ar(t,e,n,r):!!i},Bn.isError=Ko,Bn.isFinite=function(t){return"number"==typeof t&&We(t)},Bn.isFunction=$o,Bn.isInteger=ts,Bn.isLength=es,Bn.isMap=is,Bn.isMatch=function(t,e){return t===e||Tr(t,e,ha(e))},Bn.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,Tr(t,e,ha(e),r)},Bn.isNaN=function(t){return as(t)&&t!=+t},Bn.isNative=function(t){if(ja(t))throw new jt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(t)},Bn.isNil=function(t){return null==t},Bn.isNull=function(t){return null===t},Bn.isNumber=as,Bn.isObject=ns,Bn.isObjectLike=rs,Bn.isPlainObject=os,Bn.isRegExp=ss,Bn.isSafeInteger=function(t){return ts(t)&&t>=-9007199254740991&&t<=f},Bn.isSet=cs,Bn.isString=us,Bn.isSymbol=ls,Bn.isTypedArray=hs,Bn.isUndefined=function(t){return t===n},Bn.isWeakMap=function(t){return rs(t)&&ma(t)==M},Bn.isWeakSet=function(t){return rs(t)&&"[object WeakSet]"==Er(t)},Bn.join=function(t,e){return null==t?"":yn.call(t,e)},Bn.kebabCase=Us,Bn.last=Qa,Bn.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var a=i;return r!==n&&(a=(a=gs(r))<0?xn(i+a,0):bn(a,i-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,a):Ge(t,qe,a,!0)},Bn.lowerCase=Vs,Bn.lowerFirst=Hs,Bn.lt=fs,Bn.lte=ds,Bn.max=function(t){return t&&t.length?gr(t,ac,Cr):n},Bn.maxBy=function(t,e){return t&&t.length?gr(t,ua(e,2),Cr):n},Bn.mean=function(t){return Ye(t,ac)},Bn.meanBy=function(t,e){return Ye(t,ua(e,2))},Bn.min=function(t){return t&&t.length?gr(t,ac,Gr):n},Bn.minBy=function(t,e){return t&&t.length?gr(t,ua(e,2),Gr):n},Bn.stubArray=yc,Bn.stubFalse=vc,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=jc,Bn.nth=function(t,e){return t&&t.length?Xr(t,gs(e)):n},Bn.noConflict=function(){return fe._===this&&(fe._=Ft),this},Bn.noop=lc,Bn.now=Po,Bn.pad=function(t,e,n){t=bs(t);var r=(e=gs(e))?fn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Wi(ge(i),n)+t+Wi(pe(i),n)},Bn.padEnd=function(t,e,n){t=bs(t);var r=(e=gs(e))?fn(t):0;return e&&r<e?t+Wi(e-r,n):t},Bn.padStart=function(t,e,n){t=bs(t);var r=(e=gs(e))?fn(t):0;return e&&r<e?Wi(e-r,n)+t:t},Bn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_n(bs(t).replace(it,""),e||0)},Bn.random=function(t,e,r){if(r&&"boolean"!=typeof r&&ba(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=ms(t),e===n?(e=t,t=0):e=ms(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var a=jn();return bn(t+a*(e-t+ce("1e-"+((a+"").length-1))),e)}return Jr(t,e)},Bn.reduce=function(t,e,n){var r=Uo(t)?Te:Ue,i=arguments.length<3;return r(t,ua(e,4),n,i,dr)},Bn.reduceRight=function(t,e,n){var r=Uo(t)?Le:Ue,i=arguments.length<3;return r(t,ua(e,4),n,i,pr)},Bn.repeat=function(t,e,r){return e=(r?ba(t,e,r):e===n)?1:gs(e),Zr(bs(t),e)},Bn.replace=function(){var t=arguments,e=bs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Bn.result=function(t,e,r){var i=-1,a=(e=bi(e,t)).length;for(a||(a=1,t=n);++i<a;){var o=null==t?n:t[Na(e[i])];o===n&&(i=a,o=r),t=$o(o)?o.call(t):o}return t},Bn.round=Oc,Bn.runInContext=t,Bn.sample=function(t){return(Uo(t)?Kn:Kr)(t)},Bn.size=function(t){if(null==t)return 0;if(Ho(t))return us(t)?fn(t):t.length;var e=ma(t);return e==j||e==P?t.size:zr(t).length},Bn.snakeCase=Js,Bn.some=function(t,e,r){var i=Uo(t)?Re:ai;return r&&ba(t,e,r)&&(e=n),i(t,ua(e,3))},Bn.sortedIndex=function(t,e){return oi(t,e)},Bn.sortedIndexBy=function(t,e,n){return si(t,e,ua(n,2))},Bn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=oi(t,e);if(r<n&&qo(t[r],e))return r}return-1},Bn.sortedLastIndex=function(t,e){return oi(t,e,!0)},Bn.sortedLastIndexBy=function(t,e,n){return si(t,e,ua(n,2),!0)},Bn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=oi(t,e,!0)-1;if(qo(t[n],e))return n}return-1},Bn.startCase=Zs,Bn.startsWith=function(t,e,n){return t=bs(t),n=null==n?0:cr(gs(n),0,t.length),e=li(e),t.slice(n,n+e.length)==e},Bn.subtract=kc,Bn.sum=function(t){return t&&t.length?Ve(t,ac):0},Bn.sumBy=function(t,e){return t&&t.length?Ve(t,ua(e,2)):0},Bn.template=function(t,e,r){var i=Bn.templateSettings;r&&ba(t,e,r)&&(e=n),t=bs(t),e=js({},e,i,$i);var a,o,s=js({},e.imports,i.imports,$i),c=As(s),u=Qe(s,c),l=0,h=e.interpolate||wt,f="__p += '",d=Ct((e.escape||wt).source+"|"+h.source+"|"+(h===K?dt:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),p="//# sourceURL="+(Lt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(d,(function(e,n,r,i,s,c){return r||(r=i),f+=t.slice(l,c).replace(_t,an),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e})),f+="';\n";var m=Lt.call(e,"variable")&&e.variable;if(m){if(ht.test(m))throw new jt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(Y,""):f).replace(X,"$1").replace(W,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=tc((function(){return Ot(c,p+"return "+f).apply(n,u)}));if(g.source=f,Ko(g))throw g;return g},Bn.times=function(t,e){if((t=gs(t))<1||t>f)return[];var n=p,r=bn(t,p);e=ua(e),t-=p;for(var i=He(r,e);++n<t;)e(n);return i},Bn.toFinite=ms,Bn.toInteger=gs,Bn.toLength=ys,Bn.toLower=function(t){return bs(t).toLowerCase()},Bn.toNumber=vs,Bn.toSafeInteger=function(t){return t?cr(gs(t),-9007199254740991,f):0===t?t:0},Bn.toString=bs,Bn.toUpper=function(t){return bs(t).toUpperCase()},Bn.trim=function(t,e,r){if((t=bs(t))&&(r||e===n))return Je(t);if(!t||!(e=li(e)))return t;var i=dn(t),a=dn(e);return _i(i,$e(i,a),tn(i,a)+1).join("")},Bn.trimEnd=function(t,e,r){if((t=bs(t))&&(r||e===n))return t.slice(0,pn(t)+1);if(!t||!(e=li(e)))return t;var i=dn(t);return _i(i,0,tn(i,dn(e))+1).join("")},Bn.trimStart=function(t,e,r){if((t=bs(t))&&(r||e===n))return t.replace(it,"");if(!t||!(e=li(e)))return t;var i=dn(t);return _i(i,$e(i,dn(e))).join("")},Bn.truncate=function(t,e){var r=30,i="...";if(ns(e)){var a="separator"in e?e.separator:a;r="length"in e?gs(e.length):r,i="omission"in e?li(e.omission):i}var o=(t=bs(t)).length;if(on(t)){var s=dn(t);o=s.length}if(r>=o)return t;var c=r-fn(i);if(c<1)return i;var u=s?_i(s,0,c).join(""):t.slice(0,c);if(a===n)return u+i;if(s&&(c+=u.length-c),ss(a)){if(t.slice(c).search(a)){var l,h=u;for(a.global||(a=Ct(a.source,bs(pt.exec(a))+"g")),a.lastIndex=0;l=a.exec(h);)var f=l.index;u=u.slice(0,f===n?c:f)}}else if(t.indexOf(li(a),c)!=c){var d=u.lastIndexOf(a);d>-1&&(u=u.slice(0,d))}return u+i},Bn.unescape=function(t){return(t=bs(t))&&H.test(t)?t.replace(U,mn):t},Bn.uniqueId=function(t){var e=++Rt;return bs(t)+e},Bn.upperCase=Qs,Bn.upperFirst=Ks,Bn.each=bo,Bn.eachRight=wo,Bn.first=Va,uc(Bn,function(){var t={};return wr(Bn,(function(e,n){Lt.call(Bn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Bn.VERSION="4.17.21",Ee(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Bn[t].placeholder=Bn})),Ee(["drop","take"],(function(t,e){Wn.prototype[t]=function(r){r=r===n?1:xn(gs(r),0);var i=this.__filtered__&&!e?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=bn(r,i.__takeCount__):i.__views__.push({size:bn(r,p),type:t+(i.__dir__<0?"Right":"")}),i},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ee(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ua(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ee(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),Ee(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(ac)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=Qr((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return Mr(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(zo(ua(t)))},Wn.prototype.slice=function(t,e){t=gs(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Wn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=gs(e))<0?r.dropRight(-e):r.take(e-t)),r)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(p)},wr(Wn.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),a=Bn[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);a&&(Bn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,c=e instanceof Wn,u=s[0],l=c||Uo(e),h=function(t){var e=a.apply(Bn,Ae([t],s));return i&&f?e[0]:e};l&&r&&"function"==typeof u&&1!=u.length&&(c=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,m=c&&!d;if(!o&&l){e=m?e:new Wn(this);var g=t.apply(e,s);return g.__actions__.push({func:mo,args:[h],thisArg:n}),new Xn(g,f)}return p&&m?t.apply(this,s):(g=this.thru(h),p?i?g.value()[0]:g.value():g)})})),Ee(["pop","push","shift","sort","splice","unshift"],(function(t){var e=It[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Bn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Uo(i)?i:[],t)}return this[n]((function(n){return e.apply(Uo(n)?n:[],t)}))}})),wr(Wn.prototype,(function(t,e){var n=Bn[e];if(n){var r=n.name+"";Lt.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:e,func:n})}})),Dn[Bi(n,2).name]=[{name:"wrapper",func:n}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=Ii(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ii(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ii(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Uo(t),r=e<0,i=n?t.length:0,a=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=bn(e,t+o);break;case"takeRight":t=xn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,c=s-o,u=r?s:o-1,l=this.__iteratees__,h=l.length,f=0,d=bn(c,this.__takeCount__);if(!n||!r&&i==c&&d==c)return mi(t,this.__actions__);var p=[];t:for(;c--&&f<d;){for(var m=-1,g=t[u+=e];++m<h;){var y=l[m],v=y.iteratee,x=y.type,b=v(g);if(2==x)g=b;else if(!b){if(1==x)continue t;break t}}p[f++]=g}return p},Bn.prototype.at=go,Bn.prototype.chain=function(){return po(this)},Bn.prototype.commit=function(){return new Xn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===n&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Bn.prototype.plant=function(t){for(var e,r=this;r instanceof Yn;){var i=Fa(r);i.__index__=0,i.__values__=n,e?a.__wrapped__=i:e=i;var a=i;r=r.__wrapped__}return a.__wrapped__=t,e},Bn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:mo,args:[eo],thisArg:n}),new Xn(e,this.__chain__)}return this.thru(eo)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,$t&&(Bn.prototype[$t]=function(){return this}),Bn}();pe?((pe.exports=gn)._=gn,de._=gn):fe._=gn}).call(lt)})),ft="POINT",dt="GROUP",pt="POLYGON",mt="PATH",gt="LINE",yt="TEXT",vt="RECTANGLE",xt="POINT_TYPE_LINEAR",bt="POINT_TYPE_QUADRATIC",wt="POINT_TYPE_CUBIC",_t="POINT_TYPE_ARC",jt="INPUT",Ot="INPUT_TEXT",kt=function(t,e){switch(e.type){case U:return e.point_id===t.id?Object(h.a)(Object(h.a)({},t),{},{dragging:!0}):Object(h.a)(Object(h.a)({},t),{},{dragging:!1});case Z:return e.point_id,t.id,Object(h.a)(Object(h.a)({},t),{},{dragging:!1});case J:return e.point_id===t.id?Object(h.a)(Object(h.a)({},t),{},{c:t.c.map((function(t,n){return e.i===n?Object(h.a)(Object(h.a)({},t),{},{dragging:!0}):Object(h.a)({},t)})),dragging:!1}):Object(h.a)(Object(h.a)({},t),{},{dragging:!1});case H:return e.point_id===t.id?Object(h.a)(Object(h.a)({},t),{},{q:Object(h.a)(Object(h.a)({},t.q),{},{dragging:!0}),dragging:!1}):Object(h.a)(Object(h.a)({},t),{},{dragging:!1});case W:if(t.dragging||ht.get(e.payload,"overrideDragging",!1)&&e.payload.point_id===t.id){var n=ht.get(e.payload,"x",t.x),r=ht.get(e.payload,"y",t.y),i=ht.get(e.payload,"z",t.z);if(!1!==t.constraint){if(ht.isFunction(t.constraint)){var a=t.constraint(e.payload.model).nearest({x:n,y:r});return Object(h.a)(Object(h.a)({},t),{},{x:a.x,y:a.y})}if(t.constraint.type===dt){var o=t.constraint.nearest({x:n,y:r});return Object(h.a)(Object(h.a)({},t),{},{x:o.x,y:o.y})}if(t.constraint.type===mt){var s=t.constraint.nearest({x:n,y:r});return Object(h.a)(Object(h.a)({},t),{},{x:s.x,y:s.y})}}return t.constraints.x.min&&(n<t.constraints.x.min&&(n=t.constraints.x.min),n>t.constraints.x.max&&(n=t.constraints.x.max)),t.constraints.y.min&&(r<t.constraints.y.min&&(r=t.constraints.y.min),r>t.constraints.y.max&&(r=t.constraints.y.max)),t.constraints.z.min&&(i<t.constraints.z.min&&(i=t.constraints.z.min),i>t.constraints.z.max&&(i=t.constraints.z.max)),Object(h.a)(Object(h.a)({},t),{},{x:n,y:r,z:i})}if(t.q.dragging)return Object(h.a)(Object(h.a)({},t),{},{q:Object(h.a)(Object(h.a)({},t.q),{},{x:e.payload.x,y:e.payload.y})});if(t.c)return Object(h.a)(Object(h.a)({},t),{},{c:t.c.map((function(t){return t.dragging?Object(h.a)(Object(h.a)({},t),{},{x:e.payload.x,y:e.payload.y}):t}))});if(t.constraint){if(ht.isFunction(t.constraint)){var c=t.x,u=t.y,l=t.constraint(e.payload.model).nearest({x:c,y:u});return Object(h.a)(Object(h.a)({},t),{},{x:l.x,y:l.y})}return t}return t;case V:var f=t.q,d=t.c,p=!1,m=!1;return f&&(p=Object(h.a)(Object(h.a)({},f),{},{dragging:!1})),d&&(m=d.map((function(t){return Object(h.a)(Object(h.a)({},t),{},{dragging:!1})}))),Object(h.a)(Object(h.a)({},t),{},{dragging:!1,q:p,c:m});case K:return Object(h.a)(Object(h.a)({},t),{},{selected:e.payload.containsPoint(t)});case nt:return Object(h.a)(Object(h.a)({},t),{},{selected:!1});case et:return t.selected?Object(h.a)(Object(h.a)({},t),{},{x:t.x+e.payload.dx,y:t.y+e.payload.dy}):t;default:return t}},Et=function(t,e){switch(e.type){case U:case Z:case J:case H:return e.geometry_id===t.id?Object(h.a)(Object(h.a)({},t),{},{points:t.points.map((function(t){return kt(t,e)}))}):t;case W:case V:return Object(h.a)(Object(h.a)({},t),{},{_pointsFlattened:!1,_segments:!1,_area:null,points:t.points.map((function(t,n,r){return kt(t,e)}))});case K:case nt:case $:case tt:case et:return Object(h.a)(Object(h.a)({},t),{},{points:t.points.map((function(t,n,r){return kt(t,e)}))});default:return t}},Ct=function(t,e){switch(e.type){case X:return Object(h.a)(Object(h.a)({},t),{},{keysPressed:e.payload});case W:return Object(h.a)(Object(h.a)({},t),{},{mousePosition:{x:e.payload.x,y:e.payload.y},geometries:Pt(t.geometries,(function(t){return Et(t,e)}))});case U:case Z:case J:case H:return Object(h.a)(Object(h.a)({},t),{},{draggingAPoint:!0,geometries:Pt(t.geometries,(function(t){return Et(t,e)}))});case V:return Object(h.a)(Object(h.a)({},t),{},{draggingAPoint:!1,geometries:Pt(t.geometries,(function(t){return Et(t,e)}))});case Q:return Object(h.a)(Object(h.a)({},t),{},{draggingAPoint:!1,selectingPoints:!1});case K:return Object(h.a)(Object(h.a)({},t),{},{selectingPoints:!0,selectedPoints:!0,geometries:Pt(t.geometries,(function(t){return Et(t,e)}))});case nt:return Object(h.a)(Object(h.a)({},t),{},{selectingPoints:!1,draggingAPoint:!1,selectedPoints:!1,geometries:Pt(t.geometries,(function(t){return Et(t,e)}))});case $:case tt:case et:return Object(h.a)(Object(h.a)({},t),{},{geometries:Pt(t.geometries,(function(t){return Et(t,e)}))});case ut:return Object(h.a)(Object(h.a)({},t),{},{inputs:Pt(t.inputs,(function(t,n){return e.payload.name===n?Object(h.a)(Object(h.a)({},t),{},{value:e.payload.value}):t}))});case"SET_FOCUSSED":return Object(h.a)(Object(h.a)({},t),{},{focussed:!0});case"DISABLE_FOCUSSED":return Object(h.a)(Object(h.a)({},t),{},{focussed:!1});case rt:return t.runAnimations(),t.loopAnimation&&t.animation_frame>t.endFrame?Object(h.a)(Object(h.a)({},t),{},{animation_frame:t.startFrame}):Object(h.a)(Object(h.a)({},t),{},{animation_frame:t.animation_frame+1});case it:return Object(h.a)(Object(h.a)({},t),{},{playing:!0});case at:return Object(h.a)(Object(h.a)({},t),{},{playing:!1});case st:return Object(h.a)(Object(h.a)({},t),{},{animation_frame:e.payload});case ot:return Object(h.a)(Object(h.a)({},t),{},{animation_frame:0});default:return t}};function Pt(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r),n}),{})}function St(t,e){var n=Object(p.path)();if(0===t.length)return n.toString();var r=t[0];return t.forEach((function(t,i,a){0===i?n.moveTo(t.x,t.y):("POINT_TYPE_QUADRATIC"===t.curveType?n.quadraticCurveTo(t.q.x,t.q.y,t.x,t.y):"POINT_TYPE_CUBIC"===t.curveType?n.bezierCurveTo(t.c[0].x,t.c[0].y,t.c[1].x,t.c[1].y,t.x,t.y):n.lineTo(t.x,t.y),i===a.length-1&&e&&("POINT_TYPE_QUADRATIC"===r.curveType?n.quadraticCurveTo(r.q.x,r.q.y,r.x,r.y):"POINT_TYPE_CUBIC"===r.curveType&&n.bezierCurveTo(r.c[0].x,r.c[0].y,r.c[1].x,r.c[1].y,r.x,r.y),n.closePath()))})),n.toString()}var It=d.a.memo((function(t){var e=t.radius,n=t.point,r=t.unit,i=t.scaling;return d.a.createElement("g",{style:{userSelect:"none"}},d.a.createElement("text",{opacity:.5,x:"".concat(n.x).concat(r),y:"".concat(n.y+(e+10)/i.y).concat(r),alignmentBaseline:"hanging",textAnchor:"middle",fontSize:12/i.x,className:"point-coordinate"},Math.round(n.x)),d.a.createElement("text",{alignmentBaseline:"middle",opacity:.5,x:"".concat(n.x+(e+10)/i.x).concat(r),y:"".concat(n.y).concat(r),fontSize:12/i.x,className:"point-coordinate"},Math.round(n.y)))}),(function(t,e){return ht.isEqual(t,e)})),Mt=d.a.createContext("model"),Dt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props.point,e=this.props.scaling,n=this.props.unit,r=this.context,i=t.constraints.x,a=t.constraints.y,o=t.constraints.z,s=!1,c={x:0,y:0,w:r.size.width,h:r.size.height};i.min&&(s=!0,c.x=i.min);var u=null;i.max&&(s=!0,c.w=i.max-c.x,0===c.w&&(u=d.a.createElement("line",{x1:i.min,x2:i.max,y1:a.min,y2:a.max,stroke:"black",strokeWidth:1/e.x,opacity:.5}))),a.min&&(c.y=a.min,s=!0),a.max&&(s=!0,c.h=a.max-c.y,0===c.h&&(u=d.a.createElement("line",{x1:i.min,x2:i.max,y1:a.min,y2:a.max,stroke:"black",strokeWidth:1/e.x,opacity:.5}))),o.min&&(s=!0),o.max&&(s=!0);var l=!1;return(t.dragging&&s||t.constraints.show)&&(l=!0),l?d.a.createElement("g",null,u,d.a.createElement("rect",{x:"".concat(c.x).concat(n),y:"".concat(c.y).concat(n),width:c.w,height:c.h,fill:"transparent",stroke:"black",strokeWidth:1/e.x,opacity:.5})):null}}]),n}(d.a.Component);Dt.contextType=Mt;var At=function(t){var e=t.rectangle;return d.a.createElement("rect",{style:{pointerEvents:"none"},fill:"transparent",stroke:"grey",strokeWidth:1,x:e.p1.x,y:e.p1.y,width:e.width(),height:e.height()})},Tt=d.a.memo((function(t){var e=t.path,n=t.scaling,r=e.segments();return d.a.createElement("g",{className:"segments-lengths-labels"},r.map((function(t,r){var i="".concat(e.id,"-segment-").concat(r),a=t.getLength(),o="".concat(ht.round(a,1)).concat(e.displayUnit);return 10*o.length>a*n.x?null:d.a.createElement("g",{key:r},d.a.createElement("path",{id:i,className:"segment-path",d:St([t.p1,t.p2],!1),fill:"transparent",stroke:"transparent"}),d.a.createElement("text",{textAnchor:"middle",className:"segment-length",fontSize:10/n.x},d.a.createElement("textPath",{startOffset:"50%",baselineShift:3/n.x,href:"#".concat(i)},o)))})))})),Lt=function(t){var e=t.p,n=t.c,r=t.unit,i=t.scaling,a=t.fillColor,o=t.fillOpacity,s=t.strokeColor,c=t.strokeOpacity,u=t.strokeWidth,l=t.radius,h=t.previous_point;return d.a.createElement(d.a.Fragment,null,d.a.createElement("circle",{cx:"".concat(n[0].x).concat(r),cy:"".concat(n[0].y).concat(r),r:"".concat(l/i.x).concat(r),fill:a,fillOpacity:o,stroke:s,strokeWidth:u/i.x,strokeOpacity:c}),d.a.createElement("circle",{cx:"".concat(n[1].x).concat(r),cy:"".concat(n[1].y).concat(r),r:"".concat(l/i.x).concat(r),fill:a,fillOpacity:o,stroke:s,strokeWidth:u/i.x,strokeOpacity:c}),d.a.createElement("line",{className:"control-point-line",x1:"".concat(n[1].x).concat(r),y1:"".concat(n[1].y).concat(r),x2:"".concat(e.x).concat(r),y2:"".concat(e.y).concat(r),stroke:s,strokeWidth:u/i.x,strokeOpacity:.5,strokeDasharray:"5 5"}),h&&d.a.createElement("line",{className:"control-point-line",x1:"".concat(n[0].x).concat(r),y1:"".concat(n[0].y).concat(r),x2:"".concat(h.x).concat(r),y2:"".concat(h.y).concat(r),stroke:s,strokeWidth:u/i.x,strokeOpacity:.5,strokeDasharray:"5 5"}))},Rt=function(t){var e=t.p,n=t.q,r=t.unit,i=t.scaling,a=t.fillColor,o=t.fillOpacity,s=t.strokeColor,c=t.strokeOpacity,u=t.strokeWidth,l=t.radius,h=t.previous_point;return d.a.createElement(d.a.Fragment,null,d.a.createElement("circle",{cx:"".concat(n.x).concat(r),cy:"".concat(n.y).concat(r),r:"".concat(l/i.x).concat(r),fill:a,fillOpacity:o,stroke:s,strokeWidth:u/i.x,strokeOpacity:c}),d.a.createElement("line",{className:"control-point-line",x1:"".concat(n.x).concat(r),y1:"".concat(n.y).concat(r),x2:"".concat(e.x).concat(r),y2:"".concat(e.y).concat(r),stroke:s,strokeWidth:u/i.x,strokeOpacity:.5,strokeDasharray:"5 5"}),h&&d.a.createElement("line",{className:"control-point-line",x1:"".concat(n.x).concat(r),y1:"".concat(n.y).concat(r),x2:"".concat(h.x).concat(r),y2:"".concat(h.y).concat(r),stroke:s,strokeWidth:u/i.x,strokeOpacity:.5,strokeDasharray:"5 5"}))},zt=d.a.memo((function(t){var e=t.point,n=t.showCoordinates,r=t.scaling,i=t.fillColor,a=t.fillOpacity,o=t.strokeOpacity,s=t.strokeColor,c=t.strokeWidth,u=t.unit,l=t.geometryRadius,h=t.previous_point,f=e.radius;return l&&(f=l),d.a.createElement(d.a.Fragment,null,d.a.createElement("circle",{className:"preview-point",cx:"".concat(e.x).concat(u),cy:"".concat(e.y).concat(u),r:"".concat(f/r.x).concat(u),fill:i,fillOpacity:a,stroke:s,strokeWidth:c/r.x,strokeOpacity:o}),e.label?d.a.createElement("text",{x:e.x,y:e.dragging&&n?e.y+(f+11)/r.x*1.5:e.y+f/r.x*1.5,alignmentBaseline:"hanging",textAnchor:"middle",className:"point-label",fontSize:12/r.x},e.label):null,e.q&&d.a.createElement(Rt,{p:e,q:e.q,showCoordinates:n,scaling:r,fillColor:i,fillOpacity:a,strokeOpacity:o,strokeColor:s,strokeWidth:c,unit:u,radius:f,previous_point:h}),e.c&&d.a.createElement(Lt,{p:e,c:e.c,showCoordinates:n,scaling:r,fillColor:i,fillOpacity:a,strokeOpacity:o,strokeColor:s,strokeWidth:c,unit:u,radius:f,previous_point:h}))}),(function(t,e){var n=t.point.getValues(),r=e.point.getValues();return t.point.selected===e.point.selected&&(!n.some((function(t,e){return t!==r[e]}))&&(!!_.isEqual(t.scaling,e.scaling)&&(t.selected===e.selected&&(t.dragging===e.dragging&&(!e.q||!t.q||e.q.x===t.q.x&&e.q.y===t.q.y)))))}));function Nt(t,e,n,r){return!ht.get(e,"selected",!1)&&!ht.get(e,"dragging",!1)&&(i=e,a=t,Math.abs(i.x-a.x)+Math.abs(i.y-a.y)>2*n/r.x);var i,a}var Gt=d.a.memo((function(t){var e=t.geometry,n=t.modelDispatch,r=t.scaling,i=t.onPointClickCallback,a=t.onPathClickCallback,s=t.setEditingPoint,c=t.showCoordinates,u=t.selectingPoints,l=t.startDraggingSelection,h=t.modelSpaceMouseCoords,p=Object(f.useState)(!1),m=Object(o.a)(p,2),g=m[0],y=m[1],v=null,x="geometry-".concat(e.type," ");x+="path ",x+=e.cssClasses;var b=e.closedPath?e._fillOpacity:0;e.editable&&(v=e.points.map((function(t,a,o){var f=e._r?e._r:t.radius,p=_.get(t,"q",!1),m=_.get(t,"c",!1),g=[t];p&&g.push(p),m&&(g=g.concat(m));var y=!1;t.c&&a>0||t.q&&a>0?y=o[a-1]:0===a&&(y=o[o.length-1]);var v=_.get(o,a+1,o[0]);return g.every((function(t){return Nt(h,t,f,r)}))?d.a.createElement(zt,{key:t.id,point:t,scaling:r,showCoordinates:c,unit:e.unit,fillColor:e.controls.fill,fillOpacity:e.controls.fillOpacity,strokeWidth:e.controls.strokeWidth,strokeColor:e.controls.stroke,strokeOpacity:e.controls.strokeOpacity,geometryRadius:e._r,previous_point:y,next_point:v}):d.a.createElement(Bt,{geometryRadius:e._r,key:t.id,point:t,scaling:r,unit:e.unit,fillColor:e.controls.fill,fillOpacity:e.controls.fillOpacity,strokeWidth:e.controls.strokeWidth,strokeColor:e.controls.stroke,strokeOpacity:e.controls.strokeOpacityValue,geometry_id:e.id,geometryKey:e.key,previous_point:y,next_point:v,modelDispatch:n,onClickCallback:!!i&&function(){return i(e,t,a)},setEditingPoint:s,showCoordinates:c,startDraggingSelection:l,selectingPoints:u})})));var w={pointerEvents:"none"};a&&(w.pointerEvents="auto",x+=" click-callback",g&&(w.cursor="pointer"));var j=e._strokeDasharray;_.isNumber(j)&&(j/=r.x);var O=e._strokeWidth;return e._scaledStrokeWidth&&(O/=r.x),d.a.createElement("g",null,a&&g&&d.a.createElement(At,{rectangle:e.getBounds(),scaling:r}),e.showBounds&&d.a.createElement(At,{rectangle:e.getBounds(),scaling:r}),e.showSegmentLengthLabels&&d.a.createElement(Tt,{path:e,scaling:r}),d.a.createElement("path",{className:x,d:St(e.points,e.closedPath),fill:e._fill,fillOpacity:b,stroke:e._stroke,strokeWidth:O,strokeOpacity:e._strokeOpacity,opacity:e._opacity,strokeLinecap:e._strokeLinecap,strokeLinejoin:e._strokeLinejoin,strokeDasharray:j,onClick:function(){a&&a(e),n({type:ct,geometry_id:e.id})},style:w,onMouseOver:function(){a&&y(!0)},onMouseLeave:function(){a&&y(!1)}}),v)}));Gt.defaultProps={onPointClickCallback:!1,onPathClickCallback:!1,modelSpaceMouseCoords:{x:0,y:0}};var Ft=function(t){var e=t.point,n=t.scaling,r=(t.unit,Object(f.useContext)(Mt)),i=1,a=3;!1===e.dragging&&(i=.1,a=.5);var o=e.constraint;return ht.isFunction(o)&&(o=o(r)),o.type===dt?(o.radius(a),o.opacity(i),d.a.createElement(qt,{geometry:o,scaling:n})):o.type===mt?(o.opacity(i),d.a.createElement(Gt,{geometry:o,scaling:n})):null},Bt=d.a.memo((function(t){var e=t.point,n=t.unit,r=t.geometry_id,i=t.previous_point,a=t.modelDispatch,o=t.fillColor,s=t.fillOpacity,c=t.strokeOpacity,u=t.strokeColor,l=t.strokeWidth,h=t.scaling,f=t.onClickCallback,p=t.radius,m=t.geometryRadius,g=t.showCoordinates,y=t.setEditingPoint,v=t.selectingPoints,x=t.startDraggingSelection,b=t.geometryKey,w=.5,_="5 5";e.fill&&(o=e.fill);var j="geometry-".concat(e.type," "),O="".concat(e.type," ");j+="point ",O+=" point ",void 0!==e.cssClasses&&(j+=e.cssClasses+" "),void 0!==a&&(j+=" editable ",O+=" editable "),f&&(j+=" clickable ");var k=p;m&&(k=m),e.selected&&(j+=" selected ");var E=null,C=null,P=[];if(e.dragging&&g&&P.push(d.a.createElement(It,{key:"point",unit:n,point:e,radius:k,scaling:h})),e.q){e.q.dragging&&P.push(d.a.createElement(It,{key:"q-point",unit:n,point:e.q,radius:k,scaling:h})),E=d.a.createElement("circle",{cx:"".concat(e.q.x).concat(n),cy:"".concat(e.q.y).concat(n),r:"".concat(k/h.x).concat(n),fill:o,fillOpacity:s,stroke:u,strokeWidth:l/h.x,strokeOpacity:c,className:O+" qubic",onMouseDown:function(t){void 0!==a&&(a({type:H,point_id:e.id,geometry_id:r}),t.preventDefault())},onTouchStart:function(t){void 0!==a&&a({type:H,point_id:e.id,geometry_id:r})}});var S=null;void 0!==i&&(S=d.a.createElement("path",{className:"control-point-line",stroke:u,strokeWidth:l/h.x,strokeOpacity:w,strokeDasharray:_,d:St([{x:e.q.x,y:e.q.y},{x:i.x,y:i.y}],!1)})),C=d.a.createElement("g",null,d.a.createElement("path",{className:"control-point-line",stroke:u,strokeWidth:l/h.x,strokeOpacity:w,strokeDasharray:_,d:St([{x:e.q.x,y:e.q.y},{x:e.x,y:e.y}],!1)}),S)}else e.c?(E=e.c.map((function(t,i){return t.dragging&&P.push(d.a.createElement(It,{key:"c-point-".concat(i),unit:n,point:t,radius:k/h.x,scaling:h})),d.a.createElement("circle",{cx:"".concat(t.x).concat(n),cy:"".concat(t.y).concat(n),fill:o,fillOpacity:s,stroke:u,strokeWidth:l/h.x,strokeOpacity:c,r:"".concat(k/h.x).concat(n),key:i,className:O+" cubic",onMouseDown:function(t){void 0!==a&&!1===v&&(a({type:J,point_id:e.id,i:i,geometry_id:r}),t.preventDefault())},onTouchStart:function(t){void 0!==a&&!1===v&&a({type:J,point_id:e.id,i:i,geometry_id:r})}})})),C=e.c.map((function(t,n){return 0===n&&void 0!==i?d.a.createElement("path",{className:"control-point-line",key:n,stroke:u,strokeWidth:l/h.x,strokeOpacity:w,strokeDasharray:_,d:St([{x:t.x,y:t.y},{x:i.x,y:i.y}],!1)}):d.a.createElement("path",{className:"control-point-line",key:n,stroke:u,strokeWidth:l/h.x,strokeOpacity:w,strokeDasharray:_,d:St([{x:t.x,y:t.y},{x:e.x,y:e.y}],!1)})}))):e.a&&(E=d.a.createElement("g",null));return d.a.createElement("g",null,P,C,E,d.a.createElement(Dt,{scaling:h,point:e,unit:n}),e.constraint?d.a.createElement(Ft,{point:e,scaling:h,unit:n}):null,d.a.createElement("circle",{className:j,onMouseDown:function(t){0===t.button&&(f?f():void 0!==a&&(!1===v?a({type:U,point_id:e.id,geometry_id:r}):x(t)),t.preventDefault())},onTouchStart:function(t){void 0!==a&&!1===v&&a({type:U,point_id:e.id,geometry_id:r})},onContextMenu:function(t){y({point_id:e.id,geometry_id:r,geometry_key:b}),t.preventDefault()},cx:"".concat(e.x).concat(n),cy:"".concat(e.y).concat(n),r:"".concat(k/h.x).concat(n),fill:o,fillOpacity:s,stroke:u,strokeWidth:l/h.x,strokeOpacity:c}),e.label?d.a.createElement("text",{x:e.x,y:e.dragging&&g?e.y+(k+11)/h.x*1.5:e.y+k/h.x*1.5,alignmentBaseline:"hanging",textAnchor:"middle",className:"point-label",fontSize:12/h.x},e.label):null)}),(function(t,e){var n=t.point.getValues(),r=e.point.getValues();return t.point.selected===e.point.selected&&(!n.some((function(t,e){return t!==r[e]}))&&(!!ht.isEqual(t.scaling,e.scaling)&&(t.onClickCallback===e.onClickCallback&&(t.selected===e.selected&&(t.dragging===e.dragging&&(!e.q||!t.q||e.q.x===t.q.x&&e.q.y===t.q.y))))))}));Bt.defaultProps={showCoordinates:!1,radius:6,scaling:{x:1,y:1},onClickCallback:!1,geometryKey:!1};var qt=function(t){var e=t.geometry,n=t.modelDispatch,r=t.scaling,i=t.onPointClickCallback,a=t.setEditingPoint,o=t.showCoordinates,s=t.startDraggingSelection,c=t.selectingPoints,u=t.modelSpaceMouseCoords;return d.a.createElement("g",null,e.showBounds&&d.a.createElement(At,{rectangle:e.getBounds(),scaling:r}),e.points.map((function(t,l){var h=e._r?e._r:t.radius,f=_.get(t,"q",!1),p=_.get(t,"c",!1),m=[t];return f&&m.push(f),p&&(m=m.concat(p)),m.some((function(t){return Nt(u,t,h,r)}))?d.a.createElement(zt,{point:t,key:t.id,scaling:r,showCoordinates:o,unit:e.unit,fillColor:e.controls.fill,fillOpacity:e.controls.fillOpacity,strokeWidth:e.controls.strokeWidth,strokeColor:e.controls.stroke,strokeOpacity:e.controls.strokeOpacity,geometryRadius:e._r}):d.a.createElement(Bt,{geometryRadius:e._r,key:t.id,point:t,unit:e.unit,fillColor:e.controls.fill,fillOpacity:e.controls.fillOpacity,strokeWidth:e.controls.strokeWidth,strokeColor:e.controls.stroke,strokeOpacity:e.controls.strokeOpacity,scaling:r,geometry_id:e.id,geometryKey:e.key,modelDispatch:n,onClickCallback:!!i&&function(){return i(e,t,l)},setEditingPoint:a,showCoordinates:o,startDraggingSelection:s,selectingPoints:c})})))};qt.defaultProps={modelSpaceMouseCoords:{x:0,y:0}};var Yt=function(t){var e=t.geometry;t.modelDispatch;return d.a.createElement("g",null,d.a.createElement("path",{className:e.cssClasses,d:St(e.points,e.closed)}))},Xt=d.a.memo((function(t){var e=t.geometry,n=t.modelDispatch,r=t.scaling,i=t.onPointClickCallback,a=(t.onLineClickCallback,t.setEditingPoint),o=t.showCoordinates,s=t.selectingPoints,c=t.startDraggingSelection,u=t.modelSpaceMouseCoords,l=ht.get(e,"points[0]",!1),h=ht.get(e,"points[1]",!1);if(!ht.every([l,h]))return null;var f=e.extendToBounds(),p=null,m=e._strokeWidth;return e._scaledStrokeWidth&&(m/=r.x),e.editable&&(p=e.points.map((function(t,l,h){var f=e._r?e._r:t.radius,p=ht.get(t,"q",!1),m=ht.get(t,"c",!1),g=[t];p&&g.push(p),m&&(g=g.concat(m));var y=!1;t.c&&l>0||t.q&&l>0?y=h[l-1]:0===l&&(y=h[h.length-1]);var v=ht.get(h,l+1,h[0]);return g.every((function(t){return Nt(u,t,f,r)}))?d.a.createElement(zt,{key:t.id,point:t,scaling:r,showCoordinates:o,unit:e.unit,fillColor:e.controls.fill,fillOpacity:e.controls.fillOpacity,strokeWidth:e.controls.strokeWidth,strokeColor:e.controls.stroke,strokeOpacity:e.controls.strokeOpacity,geometryRadius:e._r,previous_point:y,next_point:v}):d.a.createElement(Bt,{geometryRadius:e._r,key:t.id,point:t,scaling:r,unit:e.unit,fillColor:e.controls.fill,fillOpacity:e.controls.fillOpacity,strokeWidth:e.controls.strokeWidth,strokeColor:e.controls.stroke,strokeOpacity:e.controls.strokeOpacityValue,geometry_id:e.id,geometryKey:e.key,previous_point:y,next_point:v,modelDispatch:n,onClickCallback:!!i&&function(){return i(e,t,l)},setEditingPoint:a,showCoordinates:o,startDraggingSelection:c,selectingPoints:s})}))),d.a.createElement("g",{className:"line"},d.a.createElement("line",{stroke:e._stroke,strokeWidth:m,x1:l.x,y1:l.y,x2:h.x,y2:h.y}),e._showExtend&&d.a.createElement("line",{stroke:e._stroke,strokeWidth:m,opacity:.2,x1:f[0].x,y1:f[0].y,x2:f[1].x,y2:f[1].y}),p)})),Wt=[{name:"roboto-extra-light",file:"fonts/RobotoMono-ExtraLight.ttf"},{name:"roboto-extra-light-italic",file:"fonts/RobotoMono-ExtraLightItalic.ttf"},{name:"roboto-light",file:"fonts/RobotoMono-Light.ttf"},{name:"roboto-light-italic",file:"fonts/RobotoMono-LightItalic.ttf"},{name:"roboto-medium",file:"fonts/RobotoMono-Medium.ttf"},{name:"roboto-medium-italic",file:"fonts/RobotoMono-MediumItalic.ttf"},{name:"roboto-regular",file:"fonts/RobotoMono-Regular.ttf"},{name:"roboto-semi-bold",file:"fonts/RobotoMono-SemiBold.ttf"},{name:"roboto-semi-bold-italic",file:"fonts/RobotoMono-SemiBoldItalic.ttf"},{name:"roboto-bold",file:"fonts/RobotoMono-Bold.ttf"},{name:"roboto-bold-italic",file:"fonts/RobotoMono-BoldItalic.ttf"},{name:"futura",file:"fonts/Futura-Medium.otf"},{name:"europa",file:"fonts/europa-regular.otf"},{name:"europa-italic",file:"fonts/europa-regular-italic.otf"},{name:"europa-bold",file:"fonts/europa-bold.otf"},{name:"europa-bold-italic",file:"fonts/europa-bold-italic.otf"},{name:"europa-light",file:"fonts/europa-light.otf"},{name:"europa-light-italic",file:"fonts/europa-light-italic.otf"},{name:"custom-monospace",file:"fonts/monospace.ttf"},{name:"source-code-pro-extra-light",file:"fonts/source-code-pro/SourceCodePro-ExtraLight.ttf"},{name:"source-code-pro-extra-light-italic",file:"fonts/source-code-pro/SourceCodePro-ExtraLightItalic.ttf"},{name:"source-code-pro-light",file:"fonts/source-code-pro/SourceCodePro-Light.ttf"},{name:"source-code-pro-light-italic",file:"fonts/source-code-pro/SourceCodePro-LightItalic.ttf"},{name:"source-code-pro-regular",file:"fonts/source-code-pro/SourceCodePro-Regular.ttf"},{name:"source-code-pro-medium",file:"fonts/source-code-pro/SourceCodePro-Medium.ttf"},{name:"source-code-pro-medium-italic",file:"fonts/source-code-pro/SourceCodePro-MediumItalic.ttf"},{name:"source-code-pro-semi-bold",file:"fonts/source-code-pro/SourceCodePro-SemiBold.ttf"},{name:"source-code-pro-semi-bold-italic",file:"fonts/source-code-pro/SourceCodePro-SemiBoldItalic.ttf"},{name:"source-code-pro-bold",file:"fonts/source-code-pro/SourceCodePro-Bold.ttf"},{name:"source-code-pro-bold-italic",file:"fonts/source-code-pro/SourceCodePro-BoldItalic.ttf"},{name:"source-code-pro-black",file:"fonts/source-code-pro/SourceCodePro-Black.ttf"},{name:"source-code-pro-black-italic",file:"fonts/source-code-pro/SourceCodePro-BlackItalic.ttf"}],Ut={};function Vt(t){g.a.load(t,(function(e,n){e?console.log("loading font error: ",e):Ut[t]=n}))}Wt.forEach((function(t){Vt(t.file)}));var Ht=function(t){var e=t.geometry,n=(t.modelDispatch,{fontSize:e._fontSize/2,textAnchor:e._textAnchor}),r="";if(void 0!==ht.find(Wt,(function(t){return t.name===e._fontFamily}))){var i=ht.find(Wt,(function(t){return t.name===e._fontFamily}));ht.has(Ut,i.file)?r=Ut[i.file].getD(e.text,n):Vt(i.file)}return d.a.createElement("g",null,!1,d.a.createElement("g",{transform:"translate(".concat(e.x,", ").concat(e.y,") rotate(").concat(ht.get(e,"_rotation",0)/Math.PI*180,")")},d.a.createElement("path",{d:r,fill:e._fill,fillOpacity:e._fillOpacity,stroke:e._stroke,strokeOpacity:e._strokeOpacity})))},Jt=d.a.memo((function(t){var e=t.geometry,n=(t.geometryKey,t.modelDispatch),r=t.scaling,i=t.onPointClickCallback,a=t.onGeometryClickCallback,o=t.setEditingPoint,s=t.showPointCoordinates,c=t.selectingPoints,u=t.startDraggingSelection,l=t.modelSpaceMouseCoords;switch(e.type){case dt:return d.a.createElement(qt,{scaling:r,geometry:e,modelDispatch:n,onPointClickCallback:i,setEditingPoint:o,showCoordinates:s,selectingPoints:c,startDraggingSelection:u,modelSpaceMouseCoords:l});case pt:return d.a.createElement(Yt,{geometry:e,modelDispatch:n});case mt:return d.a.createElement(Gt,{scaling:r,geometry:e,modelDispatch:n,onPointClickCallback:i,onPathClickCallback:a,setEditingPoint:o,showCoordinates:s,selectingPoints:c,startDraggingSelection:u,modelSpaceMouseCoords:l});case gt:return d.a.createElement(Xt,{scaling:r,geometry:e,modelDispatch:n,onPointClickCallback:i,onPathClickCallback:a,setEditingPoint:o,showCoordinates:s,selectingPoints:c,startDraggingSelection:u,modelSpaceMouseCoords:l});case yt:return d.a.createElement(Ht,{scaling:r,geometry:e,modelDispatch:n});default:return d.a.createElement("g",null,d.a.createElement("text",null,"No type set for ",e.name))}}),(function(t,e){if(e.modelHasUpdated)return!1;if(!ht.isUndefined(t)||!ht.isUndefined(e))return!1;if(t.geometry.points&&e.geoemtry.points){if(t.geometry.points.length!==e.geometry.points.length)return!1;var n=ht.flattenDeep(t.geometry.points.map((function(t){return t.getValues()}))),r=ht.flattenDeep(e.geometry.points.map((function(t){return t.getValues()})));if(!ht.isEqual(n,r))return!1;var i=t.geometry.points.map((function(t){return t.selected})),a=e.geometry.points.map((function(t){return t.selected}));if(i.some((function(t,e){return t!==a[e]})))return!1}return t.setEditingPoint===e.setEditingPoint&&(t.selectingPoints===e.selectingPoints&&(t.onPointClickCallback===e.onPointClickCallback&&t.scaling.x===e.scaling.x))})),Zt=function(t){var e=t.input,n=t.inputName,r=t.modelDispatch,i=ht.get(e,"range[0]",0),a=ht.get(e,"range[1]",1);return ht.isNumber(i)||(i=parseFloat(i)),ht.isNumber(a)||(a=parseFloat(a)),d.a.createElement("div",{className:"input"},d.a.createElement("p",null,n),d.a.createElement(b.a,{value:ht.get(e,"value",i),min:i,max:a,step:.01,valueLabelDisplay:"auto",onChange:function(t,e){r({type:ut,payload:{name:n,value:e}})}}))},Qt=function(t){var e=t.input,n=t.inputName,r=t.modelDispatch;return d.a.createElement("div",{className:"input"},d.a.createElement("p",null,n),d.a.createElement(y.a,{size:"mini",value:_.get(e,"value",""),onChange:function(t){r({type:ut,payload:{name:n,value:t.target.value}})},fluid:!0,style:{marginTop:10,marginBottom:10}}))},Kt=function(t){var e=t.modelDispatch,n=Object(f.useContext)(Mt),r=n.name,i=n.inputs,a=n.inputsList;return d.a.createElement(v.a,{className:"inputs"},d.a.createElement(v.a.Content,null,d.a.createElement("h3",null,r),a.map((function(t){var n=i[t];return n.type===jt?d.a.createElement(Zt,{key:t,inputName:t,input:n,modelDispatch:e}):n.type===Ot?d.a.createElement(Qt,{key:t,inputName:t,input:n,modelDispatch:e}):null}))))},$t=function(t,e,n){switch(e.type){case U:var r=function(t,e){var n=ht.keys(t.geometries).map((function(e){return Object(h.a)(Object(h.a)({},t.geometries[e]),{},{key:e})})),r=ht.find(n,(function(t){return t.id===e.geometry_id})),i=ht.find(r.points,(function(t){return t.id===e.point_id}));return{key:r.key,geometry:r,point:i}}(t,e);n(r,e);break;case ct:var i=function(t,e){var n=ht.keys(t.geometries).map((function(e){return Object(h.a)(Object(h.a)({},t.geometries[e]),{},{key:e})})),r=ht.find(n,(function(t){return t.id===e.geometry_id}));return{key:r.key,geometry:r}}(t,e);n(i,e);default:return}};var te=function(t){var e=t.playing,n=t.playCallback,r=t.pauseCallback,i=t.rewindCallback,a=t.animation_frame;return d.a.createElement("div",{className:"frame-controls animation"},e?d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:r},d.a.createElement("i",{className:"pe-7s-close pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Pause animation ",d.a.createElement("i",{className:"animation-frame"},"frame: ",a))):d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:n},d.a.createElement("i",{className:"pe-7s-play pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Start animation ",d.a.createElement("i",{className:"animation-frame"},"frame: ",a))),d.a.createElement("br",null),d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:i},d.a.createElement("i",{className:"pe-7s-prev pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Rewind animation ",d.a.createElement("i",{className:"animation-frame"},"frame: ",a))))};function ee(t,e){var n=document.createElement("a"),r=new Blob([e],{type:"text/plain;charset=utf-8"}),i=URL.createObjectURL(r);if(n.setAttribute("href",i),n.setAttribute("download",t),document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),n.dispatchEvent(a)}else n.click()}te.defaultProps={playing:!1,playCallback:function(){console.log("set AnimationControls playCallback prop")},pauseCallback:function(){console.log("set AnimationControls pauseCallback prop")},rewindCallback:function(){console.log("set AnimationControls rewindCallback prop")}};var ne=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.mountedCallback()}},{key:"render",value:function(){var t=this.props.model,e=t.size.width,n=t.size.height,r={x:1,y:1,z:1},i=this.props.unit;return d.a.createElement("svg",{id:this.props.svgID,version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0".concat(i),y:"0".concat(i),width:"".concat(e*t.imageExportScaling).concat(i),height:"".concat(n*t.imageExportScaling).concat(i),style:{background:t.background},className:"svg-export",viewBox:"0 0 ".concat(e*t.imageExportScaling," ").concat(n*t.imageExportScaling)},d.a.createElement("rect",{x:0,y:0,width:e,height:n,fill:t.background}),d.a.createElement("g",{transform:"scale(".concat(t.imageExportScaling,")")},this.props.geometries.map((function(e,n){var a="mm";return void 0===e?null:("GROUP"===e.type&&(a=""),void 0!==e&&(e._export||t.exportAll)?d.a.createElement(Jt,{key:n,geometry:Object(h.a)(Object(h.a)({},e),{},{unit:a,editable:!1}),unit:i,scaling:r}):null)})),t.exportAll?this.props.editableGeometries.map((function(e,n){return void 0===e?null:void 0!==e&&(e._export||t.exportAll)?d.a.createElement(Jt,{key:n,geometry:Object(h.a)(Object(h.a)({},e),{},{unit:"px",editable:!0}),unit:i,scaling:r}):null})):d.a.createElement(d.a.Fragment,null,this.props.editableGeometries.filter((function(t){return t._export})).map((function(e,n){return void 0===e?null:void 0!==e&&(e._export||t.exportAll)?d.a.createElement(Jt,{key:n,geometry:Object(h.a)(Object(h.a)({},e),{},{unit:"px",editable:!0}),unit:i,scaling:r}):null})))))}}]),n}(f.Component);function re(t,e,n){var r=(new XMLSerializer).serializeToString(document.getElementById(t));!function(t,e,n,r,i){var a="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t))),o=document.createElement("canvas"),s=o.getContext("2d");o.width=e,o.height=n;var c=new Image;c.onload=function(){s.clearRect(0,0,e,n),s.drawImage(c,0,0,e,n),o.toBlob((function(t){var e=Math.round(t.length/1024)+" KB";i&&i(t,e)}))},c.src=a}(r=(r=r.replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href"),n.size.width,n.size.height,0,(function(t,n){saveAs(t,"".concat(e,".png"))}))}ne.defaultProps={mountedCallback:function(){console.log("set component mounted callback")},unit:"mm"};var ie=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).downloadSVG=r.downloadSVG.bind(Object(a.a)(r)),r.downloadPNG=r.downloadPNG.bind(Object(a.a)(r)),r.downloadGCode=r.downloadGCode.bind(Object(a.a)(r)),r.downloadJSON=r.downloadJSON.bind(Object(a.a)(r)),r.triggerSVGExport=r.triggerSVGExport.bind(Object(a.a)(r)),r.triggerPNGExport=r.triggerPNGExport.bind(Object(a.a)(r)),r.triggerPDFExport=r.triggerPDFExport.bind(Object(a.a)(r)),r.triggerDownload=r.triggerDownload.bind(Object(a.a)(r)),r.state={renderSVG:!1,export:!1},r}return Object(c.a)(n,[{key:"triggerSVGExport",value:function(){this.setState({renderSVG:!0,export:"SVG"})}},{key:"triggerPDFExport",value:function(){this.setState({renderSVG:!0,export:"PDF"})}},{key:"triggerPNGExport",value:function(){if(2===this.props.model.dimensions)this.setState({renderSVG:!0,export:"PNG"});else if(3===this.props.model.dimensions){var t=document.getElementById(this.props.canvasID),e="".concat(this.props.name);t.toBlob((function(t){Object(w.saveAs)(t,e)}))}}},{key:"triggerDownload",value:function(){"SVG"===this.state.export?this.downloadSVG():"PNG"===this.state.export?this.downloadPNG():"PDF"===this.state.export&&this.downloadPDF()}},{key:"downloadSVG",value:function(){this.props.svg_id?function(t,e){var n="svg-name";e&&(n=e);var r=document.getElementById(t);r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("style","enable-background:new 0 0 768 1366;"),r.setAttribute("xml:space","preserve");var i=r.outerHTML,a=new Blob(['<?xml version="1.0" encoding="utf-8" standalone="no"?>\r\n',i],{type:"image/svg+xml;charset=utf-8"}),o=URL.createObjectURL(a),s=document.createElement("a");s.href=o,s.download="".concat(n,".svg"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}(this.props.svg_id,this.props.name):console.log("svg id is not set"),setTimeout(function(){this.setState({renderSVG:!1,export:!1})}.bind(this),50)}},{key:"downloadPNG",value:function(){re(this.props.svg_id,this.props.name,this.props.model),setTimeout(function(){this.setState({renderSVG:!1,export:!1})}.bind(this),50)}},{key:"downloadPDF",value:function(){var t=this,e=this.props.model,n=[_.toNumber(e.size.width),_.toNumber(e.size.height)],r=n[0]>n[1]?"landscape":"portrait";console.log("exporting pdf with format: ",n,r);var i=new j.e({unit:"mm",format:n,orientation:r});i.setFont("Helvetica");var a=document.getElementById(this.props.svg_id);i.svg(a,{x:0,y:0,width:e.size.width,height:e.size.height}).then((function(){i.save("".concat(e.name,".pdf")),setTimeout(function(){this.setState({renderSVG:!1,export:!1})}.bind(t),50)}))}},{key:"downloadGCode",value:function(){var t=this.props.model,e=t.gcode.generate(t);ee("".concat(t.name,".gcode"),e)}},{key:"downloadJSON",value:function(){var t=this.props.model,e=t.extractGeometries(),n=JSON.stringify(e);ee("".concat(t.name,".json"),n)}},{key:"render",value:function(){var t=this.props.exportTypes,e=!0,n=!0,r=!0,i=!0,a=!0;return _.isArray(t)&&(e=(t=t.map((function(t){return _.toLower(t)}))).includes("svg"),n=t.includes("pdf"),r=t.includes("png"),i=t.includes("gcode"),a=t.includes("json")),d.a.createElement("div",{className:"frame-controls export"},d.a.createElement("p",{style:{marginBottom:2}},"Exports"),e&&d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:this.triggerSVGExport},d.a.createElement("i",{className:"pe-7s-vector pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Download SVG")),n&&d.a.createElement(d.a.Fragment,null,d.a.createElement("br",null),d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:this.triggerPDFExport},"PDF",d.a.createElement("p",{className:"tooltip"},"Download PDF"))),r&&d.a.createElement(d.a.Fragment,null,d.a.createElement("br",null),d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:this.triggerPNGExport},d.a.createElement("i",{className:"pe-7s-photo pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Download PNG"))),i&&d.a.createElement(d.a.Fragment,null,d.a.createElement("br",null),d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:this.downloadGCode},d.a.createElement("i",{className:"pe-7s-download pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Download GCODE"))),a&&d.a.createElement(d.a.Fragment,null,d.a.createElement("br",null),d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:this.downloadJSON},d.a.createElement("i",{className:"pe-7s-download pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Download JSON"))),this.state.renderSVG?d.a.createElement("div",{style:{display:"none"}},d.a.createElement(ne,{model:this.props.model,geometries:this.props.geometries,editableGeometries:this.props.editableGeometries,mountedCallback:this.triggerDownload,svgID:"".concat(this.props.svg_id),unit:"SVG"===this.props.export?"mm":""})):null)}}]),n}(f.Component);ie.defaultProps={svg_id:!1,name:"set name prop",exportTypes:!1};var ae=d.a.memo((function(t){return d.a.createElement("div",{className:"render-settings"},d.a.createElement("p",{className:"label"},"Start frame"),d.a.createElement(y.a,{value:t.startFrame,type:"number",onChange:function(e){t.startFrameCallback(e.target.value)}}),d.a.createElement("p",{className:"label"},"End frame"),d.a.createElement(y.a,{value:t.endFrame,type:"number",onChange:function(e){t.endFrameCallback(e.target.value)}}),d.a.createElement("p",{className:"label"},"Scaling"),d.a.createElement("br",null),d.a.createElement(x.a.Group,{size:"tiny"},d.a.createElement(x.a,{toggle:!0,active:"screen"===t.renderScaling,onPointerDown:function(){return t.setRenderScaling("screen")}},"Screen"),d.a.createElement(x.a,{toggle:!0,active:"model"===t.renderScaling,onPointerDown:function(){return t.setRenderScaling("model")}},"Model")))})),oe=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).state={showSettings:!1},r.toggleSettings=r.toggleSettings.bind(Object(a.a)(r)),r}return Object(c.a)(n,[{key:"toggleSettings",value:function(){this.setState({showSettings:!this.state.showSettings})}},{key:"render",value:function(){return d.a.createElement("div",{className:"frame-controls"},d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:this.props.renderCallback},d.a.createElement("i",{className:"pe-7s-video pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Render animation")),d.a.createElement("br",null),d.a.createElement(x.a,{size:"tiny",className:"control-button",onClick:this.toggleSettings},d.a.createElement("i",{className:"pe-7s-settings pe-2x"}),d.a.createElement("p",{className:"tooltip"},"Animation settings")),this.state.showSettings?d.a.createElement(ae,this.props):null)}}]),n}(f.Component);oe.defaultProps={renderCallback:!1,startFrameCallback:!1,endFrameCallback:!1,startFrame:0,endFrame:0};var se=d.a.memo((function(t){var e=t.model,n=t.frame,r=t.editableGeometries,i=t.displayGeometries;return d.a.createElement("div",{className:"controls"},n.props.animationControls&&e.animated?d.a.createElement(te,{playing:e.playing,playCallback:n.playModel,pauseCallback:n.pauseModel,rewindCallback:n.rewindModel,animation_frame:e.animation_frame}):null,n.props.renderControls&&e.animated?d.a.createElement(oe,{startFrame:n.state.startFrame,endFrame:n.state.endFrame,renderCallback:n.renderModel,startFrameCallback:n.setStartFrame,endFrameCallback:n.setEndFrame,renderScaling:n.state.renderScaling,setRenderScaling:n.setRenderScaling}):null,n.props.exportControls?d.a.createElement(ie,{model:e,editableGeometries:r,geometries:i,svg_id:"".concat(n.state.svgID,"-export"),canvasID:n.props.canvasID,name:e.name,exportTypes:n.props.exportTypes}):null)})),ce=function(t){var e=t.fitToFrame,n=t.moveToZero;return d.a.createElement("div",{className:"zoom-controls"},d.a.createElement("div",{className:"buttons"},d.a.createElement(x.a.Group,{size:"tiny"},d.a.createElement(x.a,{onClick:function(){return e()}},"Fit to window"),d.a.createElement(x.a,{onClick:function(){return n()}},"Move to zero"))))},ue=function(){var t=Object(f.useState)(!1),e=Object(o.a)(t,2),n=e[0],r=e[1];return d.a.createElement("div",{className:"vector-export-menu"},d.a.createElement(x.a,{className:"menu-toggle",onClick:function(){return r(!n)}},"Export"),n&&d.a.createElement(v.a,null,d.a.createElement(v.a.Content,null,d.a.createElement("h3",null,"Export")),d.a.createElement(v.a.Content,null,d.a.createElement(x.a,null,"SVG")),d.a.createElement(v.a.Content,null,d.a.createElement(x.a,null,"PDF"))))};function le(t,e,n){var r=document.createElement("a");document.body.appendChild(r),r.style.cssText="display: none";var i,a=window.URL.createObjectURL(t);r.href=a,r.download=e,r.click(),window.URL.revokeObjectURL(a),r.parentNode.removeChild(r),i=n,setTimeout((function(){var t=function(){setTimeout((function(){window.requestAnimationFrame(i)}),10)},e=function(){setTimeout((function(){window.requestAnimationFrame(t)}),10)};setTimeout((function(){window.requestAnimationFrame(e)}),10)}),10)}k()("rgb(100,0,0)");function he(t){var e=this;this.visibility=ht.get(t,"visibility",!0),this._fill=ht.get(t,"_fill","rgb(200,200,200)"),this._fillChroma={},this._fillOpacity=ht.get(t,"_fillOpacity",.4),this._fillChroma.alpha=function(){return.5},this._stroke=ht.get(t,"_stroke","black"),this._strokeChroma={},this._strokeOpacity=ht.get(t,"_strokeOpacity",1),this._strokeChroma.alpha=function(){return.5},this._strokeWidth=ht.get(t,"_strokeWidth",1),this._scaledStrokeWidth=ht.get(t,"_scaledStrokeWidth",!0),this._r=ht.get(t,"_r",!1),this._opacity=ht.get(t,"_opacity",1),this._strokeLinecap=ht.get(t,"_strokeLinecap","butt"),this._strokeLinejoin=ht.get(t,"_strokeLinejoin","miter"),this._strokeDasharray=ht.get(t,"_strokeDasharray",0),this._showCoordinates=ht.get(t,"_showCoordinates",!1),this._shadowBlur=ht.get(t,"_shadowBlur",0),this._shadowColor=ht.get(t,"_shadowColor","transparent"),this._shadowOpacity=ht.get(t,"_shadowOpacity",1),this._shadowOffsetX=ht.get(t,"_shadowOffsetX",0),this._shadowOffsetY=ht.get(t,"_shadowOffsetY",0),this.controls={fill:ht.get(t,"controls.fill","black"),fillOpacity:ht.get(t,"controls.fillOpacity",.1),stroke:ht.get(t,"controls.stroke","black"),strokeOpacity:ht.get(t,"controls.strokeOpacity",.5),strokeWidth:ht.get(t,"controls.strokeWidth",1)},this.showCoordinates=function(t){return e._showCoordinates=t,e},this.controlsFill=function(t){return this.controls.fill=t,this},this.controlsFillOpacity=function(t){return this.controls.fillOpacity=t,this},this.controlsStroke=function(t){return this.controls.stroke=t,this},this.controlsStrokeWidth=function(t){return this.controls.strokeWidth=t,this},this.controlsStrokeOpacity=function(t){return this.controls.strokeOpacity=t,this},this.fill=function(t){return this._fill=t,this},this.fillOpacity=function(t){return this._fillOpacity=t,this},this.stroke=function(t){return this._stroke=t,this},this.strokeOpacity=function(t){return this._strokeOpacity=t,this},this.strokeWidth=function(t){return this._strokeWidth=t,this},this.scaledStrokeWidth=function(t){return this._scaledStrokeWidth=t,this},this.radius=function(t){return this._r=t,this},this.r=function(t){return this._r=t,this},this.radius=function(t){return this._r=t,this},this.visible=function(t){return this.visibility=t,this},this.opacity=function(t){return this._opacity=t,this},this.strokeLinecap=function(t){return e._strokeLinecap=t,e},this.strokeLinejoin=function(t){return e._strokeLinejoin=t,e},this.strokeDasharray=function(t){return e._strokeDasharray=t,e},this.shadowBlur=function(t){return e._shadowBlur=t,e},this.shadowColor=function(t){return e._shadowColor=t,e},this.shadowOpacity=function(t){return e._shadowOpacity=t,e},this.shadowOffsetX=function(t){return e._shadowOffsetX=t,e},this.shadowOffsetY=function(t){return e._shadowOffsetY=t,e},this.copyStyle=function(t){return e._visibility=t._visibility,e._fill=t._fill,e._fillOpacity=t._fillOpacity,e._stroke=t._stroke,e._strokeOpacity=t._strokeOpacity,e._strokeWidth=t._strokeWidth,e._scaledStrokeWidth=t._scaledStrokeWidth,e._r=t._r,e._opacity=t._opacity,e._strokeLinecap=t._strokeLinecap,e._strokeDasharray=t._strokeDasharray,e._shadowBlur=t._shadowBlur,e._shadowColor=t._shadowColor,e._shadowOpacity=t._shadowOpacity,e._shadowOffsetX=t._shadowOffsetX,e._shadowOffsetY=t._shadowOffsetY,e.type===mt&&(e.showSegmentLengthLabels=ht.get(t,"showSegmentLengthLabels",!1)),e.controls={fill:t.controls.fill,fillOpacity:t.controls.fillOpacity,stroke:t.controls.stroke,strokeOpacity:t.controls.strokeOpacity,strokeWidth:t.controls.strokeWidth},e}}function fe(t,e){if(t)return t.forEach((function(t){t.c?(t.x+=e.x,t.y+=e.y,t.c[0].x+=e.x,t.c[0].y+=e.y,t.c[1].x+=e.x,t.c[1].y+=e.y):t.q?(t.x+=e.x,t.y+=e.y,t.q.x+=e.x,t.q.y+=e.y):(t.x+=e.x,t.y+=e.y)}))}function de(t,e){t&&t.forEach((function(t){t.c?(t.x*=e.x,t.y*=e.y,t.c[0].x*=e.x,t.c[0].y*=e.y,t.c[1].x*=e.x,t.c[1].y*=e.y):t.q?(t.x*=e.x,t.y*=e.y,t.q.x*=e.x,t.q.y*=e.y):(t.x*=e.x,t.y*=e.y)}))}function pe(t,e,n){function r(t){return{x:(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e)+n.x,y:(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e)+n.y}}t&&t.forEach((function(t){var e=r(t);if(t.x=e.x,t.y=e.y,t.c){var n=r(t.c[0]);t.c[0].x=n.x,t.c[0].y=n.y;var i=r(t.c[1]);t.c[1].x=i.x,t.c[1].y=i.y}if(t.q){var a=r(t.q);t.q.x=a.x,t.q.y=a.y}}))}function me(){this.translate=function(t){return fe(this.points,t),this},this.scale=function(t,e){return e&&fe(this.points,{x:-e.x,y:-e.y}),isNaN(t)?de(this.points,t):de(this.points,{x:t,y:t}),e&&fe(this.points,e),this},this.rotate=function(t,e){return pe(this.points,t,e||{x:0,y:0}),this}}function ge(t,e,n,r,i,a){var o=this;this.type="MATRIX",this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=a,this.translate=function(t){var e=t.x,n=t.y;return o.tx+=e*o.a+n*o.c,o.ty+=e*o.b+n*o.d,o},this.transformPoint=function(t){var e=t.x,n=t.y,r=t.copy();return r.x=e*o.a+n*o.c+o.tx,r.y=e*o.b+n*o.d+o.ty,r}}function ye(){var t=this;this.translate=function(e){return fe([t],e),t},this.scale=function(e,n){return n&&fe([t],{x:-n.x,y:-n.y}),isNaN(e)?de([t],e):de([t],{x:e,y:e}),n&&fe([t],n),t},this.rotate=function(e,n){return pe([t],e,n||{x:0,y:0}),t}}function ve(){this.distance=function(t){return e=this,n=t,Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y));var e,n},this.cross=function(t){return this.x*t.y-this.y*t.x},this.dot=function(t){return this.x*t.x+this.y*t.y},this.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.getAngle=function(t){var e=t||new be({x:0,y:0}),n=e.x-this.x,r=e.y-this.y;return Math.atan2(n,r)},this.getDirectedAngle=function(t){return 0}}var xe=0;function be(t){var e=this;xe+=1,ye.call(this),ve.call(this),this.x=ht.get(t,"x",0),this.y=ht.get(t,"y",0),this.z=ht.get(t,"z",0);var n=!1,r=!1,i=!1;this.constraints={show:ht.get(t,"constraints.show",!1),x:{min:ht.get(t,"constraints.x.min",!1),max:ht.get(t,"constraints.x.max",!1)},y:{min:ht.get(t,"constraints.y.min",!1),max:ht.get(t,"constraints.y.max",!1)},z:{min:ht.get(t,"constraints.z.min",!1),max:ht.get(t,"constraints.z.max",!1)}},this.constraint=ht.get(t,"constraint",!1),this.cssClasses=ht.get(t,"cssClasses",[""]),this.r=ht.get(t,"r",!1),this.stroke=ht.get(t,"stroke",!1),this.strokeWidth=ht.get(t,"strokeWidth",!1),this.strokeOpacity=ht.get(t,"strokeOpacity",!1),this.fill=ht.get(t,"fill",!1),this.attributes=ht.get(t,"attributes",{}),this.label=ht.get(t,"label",!1);var a=ht.get(t,"angle",!1),o=ht.get(t,"length",!1);a&&o&&(this.x+=Math.cos(-a+.5*Math.PI)*o,this.y+=Math.sin(-a+.5*Math.PI)*o);var s=!1,c=xt;void 0!==t.q&&t.q?(n=Object(h.a)(Object(h.a)({},t.q),{},{dragging:!1}),s=!0,c=bt):void 0!==t.c&&t.c?(r=t.c,s=!0,c=wt):t.a&&(i=t.a,s=!0,c=_t),this.q=n,this.c=r,this.a=i,this.hasControlPoints=s,this.connectHandles=[!1,!1],this.geometry=!1,this.geometryIndex=!1,this.nextPoint=!1,this.previousPoint=!1,this.type=ft,this.curveType=c,this.dragging=!1,this.selected=!1,this.id=xe,this.type=ft,this.editable=!1,this.matrix=!1,this.addMatrix=function(t,n,r,i,a,o){var s=ht.get(t,"a",!1);if(s){var c=ht.get(t,"b",0),u=ht.get(t,"c",0),l=ht.get(t,"d",0),h=ht.get(t,"tx",0),f=ht.get(t,"ty",0);return e.matrix=new ge(s,c,u,l,h,f),e}return e.matrix=new ge(t,n,r,i,a,o),e},this.removeConnections=function(){function t(t){t.geometry=!1,t.geometryIndex=!1,t.nextPoint=!1,t.previousPoint=!1}return t(this),this.c&&(t(this.c[0]),t(this.c[1])),this.q&&t(this.q),this},this.matrixTransform=function(){return e.matrix.transformPoint(e)},this.extract=function(){return{x:e.x,y:e.y,z:e.z}},this.getValues=function(){return this.c?[this.x,this.y,this.c[0].x,this.c[0].y,this.c[1].x,this.c[1].y]:this.q?[this.x,this.y,this.q.x,this.q.y]:[this.x,this.y]},this.copy=function(){return new be(e)},this.clone=function(){return new be(e)},this.equals=function(t){return!!function(t,e){if(t.length!==e.length)return!1;for(var n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}(this.getValues(),t.getValues())}}function we(t,e,n){he.call(this,n),this.fillOpacity(0),this.p1=new be(t),this.p2=new be(e),this.p3=new be({x:t.x,y:e.y}),this.p4=new be({x:e.x,y:t.y}),this.type=vt,this.width=function(){return Math.abs(e.x-t.x)},this.height=function(){return Math.abs(e.y-t.y)},this.containsPoint=function(t){return!(!ht.inRange(t.x,this.p1.x,this.p2.x)||!ht.inRange(t.y,this.p1.y,this.p2.y))||(!(t.x.toFixed(3)!=this.p1.x||!ht.inRange(t.y,this.p1.y,this.p2.y))||!(t.x.toFixed(3)!=this.p2.x||!ht.inRange(t.y,this.p1.y,this.p2.y)))},this.edges=function(){},this.containsRectangle=function(t){return!!(this.containsPoint(t.p1)&&this.containsPoint(t.p2)&&this.containsPoint(t.p3)&&this.containsPoint(t.p4))},this.overlaps=function(t){return!!this.containsPoint(t.p1)||(!!this.containsPoint(t.p2)||(!!this.containsPoint(t.p3)||(!!this.containsPoint(t.p4)||(!!t.containsPoint(this.p1)||(!!t.containsPoint(this.p2)||(!!t.containsPoint(this.p3)||(!!t.containsPoint(this.p4)||(this.p1.x<=t.p1.x&&this.p2.x>=t.p2.x&&this.p1.y>=t.p1.y&&this.p1.y<=t.p2.y||(this.p1.x<=t.p1.x&&this.p2.x>=t.p2.x&&this.p2.y>=t.p1.y&&this.p2.y<=t.p2.y||(this.p1.y<=t.p1.y&&this.p2.y>=t.p2.y&&this.p1.x>=t.p1.x&&this.p1.x<=t.p2.x||this.p1.y<=t.p1.y&&this.p2.y>=t.p2.y&&this.p2.x>=t.p1.x&&this.p2.x<=t.p2.x))))))))))}}function _e(t){var e=1/0,n=-1/0,r=1/0,i=-1/0;return t.forEach((function(t){t.x<e&&(e=t.x),t.x>n&&(n=t.x),t.y<r&&(r=t.y),t.y>i&&(i=t.y),t.c&&t.c.forEach((function(t){t.x<e&&(e=t.x),t.x>n&&(n=t.x),t.y<r&&(r=t.y),t.y>i&&(i=t.y)})),t.q&&(t.q.x<e&&(e=t.q.x),t.q.x>n&&(n=t.q.x),t.q.y<r&&(r=t.q.y),t.q.y>i&&(i=t.q.y))})),new we({x:e,y:r},{x:n,y:i})}function je(t){var e=t[0],n=t[1],r=t[2],i=t[3];return{x:((e.x*n.y-n.x*e.y)*(r.x-i.x)-(e.x-n.x)*(r.x*i.y-r.y*i.x))/((e.x-n.x)*(r.y-i.y)-(e.y-n.y)*(r.x-i.x)),y:((e.x*n.y-n.x*e.y)*(r.y-i.y)-(e.y-n.y)*(r.x*i.y-r.y*i.x))/((e.x-n.x)*(r.y-i.y)-(e.y-n.y)*(r.x-i.x))}}be.type=ft,we.type=vt;var Oe=1e4;function ke(){this.intersections=function(t){var e=this;if(this.type===Ie.CUBIC){if(t.type===Ie.CUBIC){if(this.bounds.overlaps(t.bounds))return[]}else if(t.type===Ie.QUADRATIC);else if(t.type===Ie.LINEAR)return this.bezier.intersects(t).map((function(t){return e.bezier.get(t)}))}else if(this.type===Ie.QUADRATIC){if(t.type===Ie.CUBIC);else if(t.type===Ie.QUADRATIC);else if(t.type===Ie.LINEAR)return this.bezier.intersects(t).map((function(t){return e.bezier.get(t)}))}else if(this.type===Ie.LINEAR){if(t.type===Ie.CUBIC)return t.bezier.intersects(this).map((function(e){return t.bezier.get(e)}));if(t.type===Ie.QUADRATIC)return t.bezier.intersects(this).map((function(e){return t.bezier.get(e)}));if(t.type===Ie.LINEAR){var n=je([this.p1,this.p2,t.p1,t.p2]);if(n.x=Math.round(n.x*Oe)/Oe,n.y=Math.round(n.y*Oe)/Oe,t.p1.y===t.p2.y&&(n.y=t.p1.y),t.p1.x===t.p2.x&&(n.x=t.p1.x),Ce(n.x,this.p1.x,this.p2.x)&&Ce(n.x,t.p1.x,t.p2.x)&&Ce(n.y,this.p1.y,this.p2.y)&&Ce(n.y,t.p1.y,t.p2.y))return[n]}}return[]},this.intersectionsTimes=function(t){var e=this,n=[];if(this.type===Ie.CUBIC){if(t.type===Ie.CUBIC)this.bezier.intersects(t.bezier).forEach((function(t){var e=parseFloat(t.split("/")[0]);n.push(e)}));else if(t.type===Ie.QUADRATIC){this.bezier.intersects(t.bezier).forEach((function(t){var e=parseFloat(t.split("/")[0]);n.push(e)}))}else if(t.type===Ie.LINEAR){this.bezier.intersects({p1:t.p1,p2:t.p2}).forEach((function(t){n.push(t)}))}}else if(this.type===Ie.QUADRATIC){if(t.type===Ie.CUBIC)this.bezier.intersects(t.bezier).forEach((function(t){var e=parseFloat(t.split("/")[0]);n.push(e)}));else if(t.type===Ie.QUADRATIC){this.bezier.intersects(t.bezier).forEach((function(t){var e=parseFloat(t.split("/")[0]);n.push(e)}))}else if(t.type===Ie.LINEAR){this.bezier.intersects({p1:t.p1,p2:t.p2}).forEach((function(t){n.push(t)}))}}else if(this.type===Ie.LINEAR){if(t.type===Ie.CUBIC)t.bezier.intersects({p1:this.p1,p2:this.p2}).forEach((function(r){var i=t.bezier.get(r),a=e.p1.distance(i)/e.getLength();n.push(a)}));else if(t.type===Ie.QUADRATIC){t.bezier.intersects({p1:this.p1,p2:this.p2}).forEach((function(r){var i=t.bezier.get(r),a=e.p1.distance(i)/e.getLength();n.push(a)}))}else if(t.type===Ie.LINEAR){var r=je([this.p1,this.p2,t.p1,t.p2]);if(r.x=Math.round(r.x*Oe)/Oe,r.y=Math.round(r.y*Oe)/Oe,t.p1.y===t.p2.y&&(r.y=t.p1.y),t.p1.x===t.p2.x&&(r.x=t.p1.x),Ce(r.x,this.p1.x,this.p2.x)&&Ce(r.x,t.p1.x,t.p2.x)&&Ce(r.y,this.p1.y,this.p2.y)&&Ce(r.y,t.p1.y,t.p2.y)){var i=this.p1.distance(r)/this.getLength();n.push(i)}}}return n}}var Ee=1e-4;function Ce(t,e,n){return t===e||(t===n||!!ht.inRange(t,e-Ee,n+Ee))}function Pe(){this.curveCalculations={interpolate:function(t){if(this.type!==Ie.CUBIC&&this.type!==Ie.QUADRATIC)return this.type===Ie.LINEAR?this.interpolate(t):{x:0,y:0}}}}function Se(){this.offset=function(t){if(this.type===Ie.CUBIC)return[];if(this.type===Ie.QUADRATIC)return[];if(this.type===Ie.LINEAR){var e=function(t,e,n){var r=Math.atan2(t.x-e.x,t.y-e.y),i={x:t.x-Math.cos(r)*n,y:t.y+Math.sin(r)*n},a={x:e.x-Math.cos(r)*n,y:e.y+Math.sin(r)*n};return[i,a]}(this.p1,this.p2,t);return new De(e[0],e[1])}}}var Ie={LINEAR:"LINEAR",CUBIC:"CUBIC",QUADRATIC:"QUADRATIC"};function Me(t){return"POINT"===t.type}function De(t,e){ke.call(this),Pe.call(this),Se.call(this),this.p1=Me(t)?t:new be(t),this.p2=Me(e)?e:new be(e),this.type=Ie.LINEAR,this.bezier=!1,this._lut=!1,this.lut=function(){var t=this;if(!1===this._lut){this._lut=ht.range(1e3).map((function(e){return t.interpolate(e/1e3)}))}return this._lut},this.bounds=_e([t,e]),e.c?(this.type=Ie.CUBIC,this.bezier=new C.a(t.x,t.y,e.c[0].x,e.c[0].y,e.c[1].x,e.c[1].y,e.x,e.y)):e.q&&(this.type=Ie.QUADRATIC,this.bezier=new C.a(t.x,t.y,e.q.x,e.q.y,e.x,e.y)),this.cut=function(t){var e=this,n=t.segments(),r=[];if(n.forEach((function(t){var n=e.intersectionsTimes(t);n.length>0&&n.forEach((function(t){r.push(t)}))})),r.sort((function(t,e){return t-e})),0===r.length)return[this];var i=[0].concat(r).concat([1]),a=[];return i.forEach((function(t,n,r){if(n<r.length-1){var i=r[n+1];a.push(e.subSegment(t,i))}})),a},this.getValues=function(t){return this.type===Ie.CUBIC?[this.p1.x,this.p1.y,this.p2.c[0].x,this.p2.c[0].y,this.p2.c[1].x,this.p2.c[1].y,this.p2.x,this.p2.y]:this.type===Ie.QUADRATIC?[this.p1.x,this.p1.y,this.p2.q.x,this.p2.q.y,this.p2.q.x,this.p2.q.y,this.p2.x,this.p2.y]:this.type===Ie.LINEAR?[this.p1.x,this.p1.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p2.x,this.p2.y]:void 0},this.getLength=function(){var t=this.getValues();if(this.type===Ie.CUBIC)return this.bezier.length();if(this.type===Ie.QUADRATIC)return this.bezier.length();if(this.type===Ie.LINEAR){var e=t[6]-t[0],n=t[7]-t[1];return Math.sqrt(e*e+n*n)}},this.width=function(){return this.p2.x-this.p1.x},this.height=function(){return this.p2.y-this.p1.y},this.splitAt=function(n){return this.type===Ie.CUBIC||this.type===Ie.QUADRATIC?[new De({x:0,y:0},{x:0,y:0}),new De({x:0,y:0},{x:0,y:0})]:this.type===Ie.LINEAR?[new De(t,{x:this.p1.x+this.width()*n,y:this.p1.y+this.height()*n}),new De({x:this.p2.x-this.width()*(1-n),y:this.p2.y-this.height()*(1-n)},e)]:void 0},this.subSegment=function(t,e){if(this.type===Ie.CUBIC){var n=this.bezier.split(t,e);return new De(n.points[0],Object(h.a)(Object(h.a)({},n.points[3]),{},{c:[n.points[1],n.points[2]]}))}if(this.type===Ie.QUADRATIC){var r=this.bezier.split(t,e);return new De(r.points[0],Object(h.a)(Object(h.a)({},r.points[2]),{},{q:r.points[1]}))}if(this.type===Ie.LINEAR){var i=1e4;return new De({x:Math.round((this.p1.x+this.width()*t)*i)/i,y:Math.round((this.p1.y+this.height()*t)*i)/i},{x:Math.round((this.p1.x+this.width()*e)*i)/i,y:Math.round((this.p1.y+this.height()*e)*i)/i})}},this.interpolate=function(t){if(this.bezier)return this.bezier.get(t);var e=this.p1,n=this.p2;return{x:e.x-(e.x-n.x)*t,y:e.y-(e.y-n.y)*t}},this.angle=function(){if(this.bezier)return!1},this.angleAt=function(n){return this.bezier?this.bezier.derivative(n):{dx:t.x/e.x,dy:t.y/e.y}},this.extend=function(t){var e=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y;return t>0?new De(this.p1,{x:this.p2.x+e*t,y:this.p2.y+n*t}):new De({x:this.p1.x+e*t,y:this.p1.y+n*t},this.p2)},this._area=!1,this.getArea=function(){if(!1===this._area)switch(this.type){case Ie.LINEAR:this._area=0;break;case Ie.CUBIC:case Ie.QUADRATIC:var t=0,e=this.lut(),n=e[0];e.forEach((function(e,r,i){if(r<i.length-1){var a=e,o=i[r+1];t+=.5*((n.x-o.x)*(a.y-n.y)-(n.x-a.x)*(o.y-n.y))}})),this._area=t}return this._area},this.nearest=function(n){switch(this.type){case Ie.LINEAR:this.bounds.width(),this.bounds.height(),this.getLength();var r=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}(this.p1,this.p2,Math.max(0,Math.min(1,function(t,e,n){var r=e.x-t.x,i=e.y-t.y,a=n.x-t.x,o=n.y-t.y;return(a*r+o*i)/(r*r+i*i)}(t,e,n))));return r;case Ie.CUBIC:case Ie.QUADRATIC:return this.bezier.project(n)}}}function Ae(t,e,n){var r=Math.atan2(t.x-e.x,t.y-e.y);return[{x:t.x-Math.cos(r)*n,y:t.y+Math.sin(r)*n},{x:e.x-Math.cos(r)*n,y:e.y+Math.sin(r)*n}]}function Te(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;if(n>=1)return console.warn("smoothPath function requires a stepsize lower than 1."),new He([]);if(0===n)return new He(this.points.slice()).copyStyle(this);var r=ht.range(e).map((function(n){return t.interpolate(n/e)})),i=ht.range(e).map((function(t){var i=ht.range(Math.floor(e*n)).map((function(n){return r[(t+n)%e]}));return{x:ht.mean(i.map((function(t){return t.x}))),y:ht.mean(i.map((function(t){return t.y}))),z:ht.mean(i.map((function(t){return ht.get(t,"z",0)})))}}));return new He(i).copyStyle(this)}function Le(t,e,n){if(!Array.isArray(t))throw new TypeError("First argument should be an array");if(t.forEach((function(e){if(!Array.isArray(e)||e.some((function(t){return"number"!==typeof t}))||e.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")})),(t=t.filter((function(e,n){return 0===n||!e.every((function(e,r){return e===t[n-1][r]}))}))).length<2)return[];var r=t.length,i=qe(t[1],t[0]),a=qe(t[r-2],t[r-1]);return Re(t,i,a,e,n)}function Re(t,e,n,r,i){var a,s,c,u,l,h,f,d,p,m,g,y,v;if(2===t.length)return y=Ye.vectorLen(Ye.subtract(t[0],t[1]))/3,[a=[t[0],Ye.addArrays(t[0],Ye.mulItems(e,y)),Ye.addArrays(t[1],Ye.mulItems(n,y)),t[1]]];s=function(t){var e,n,r,i=[];return t.forEach((function(t,a){e=a?n+Ye.vectorLen(Ye.subtract(t,r)):0,i.push(e),n=e,r=t})),i=i.map((function(t){return t/n}))}(t);var x=ze(t,s,s,e,n,i),b=Object(o.a)(x,3);if(a=b[0],u=b[1],h=b[2],0===u||u<r)return[a];if(u<r*r)for(c=s,l=u,f=h,v=0;v<20;v++){var w=ze(t,s,c=Ne(a,t,c),e,n,i),_=Object(o.a)(w,3);if(a=_[0],u=_[1],h=_[2],u<r)return[a];if(h===f){var j=u/l;if(j>.9999&&j<1.0001)break}l=u,f=h}if(g=[],(d=Ye.subtract(t[h-1],t[h+1])).every((function(t){return 0===t}))){var O=[-(d=Ye.subtract(t[h-1],t[h]))[1],d[0]];d[0]=O[0],d[1]=O[1]}return p=Ye.normalize(d),m=Ye.mulItems(p,-1),g=(g=g.concat(Re(t.slice(0,h+1),e,p,r,i))).concat(Re(t.slice(h),m,n,r,i))}function ze(t,e,n,r,i,a){var s,c,u;s=function(t,e,n,r){var i,a,o,s,c,u,l,h,f,d,p,m,g,y,v,x,b,w=t[0],_=t[t.length-1];for(i=[w,null,null,_],a=Ye.zeros_Xx2x2(e.length),g=0,y=e.length;g<y;g++)b=1-(x=e[g]),(o=a[g])[0]=Ye.mulItems(n,3*x*(b*b)),o[1]=Ye.mulItems(r,3*b*(x*x));for(s=[[0,0],[0,0]],c=[0,0],g=0,y=t.length;g<y;g++)x=e[g],o=a[g],s[0][0]+=Ye.dot(o[0],o[0]),s[0][1]+=Ye.dot(o[0],o[1]),s[1][0]+=Ye.dot(o[0],o[1]),s[1][1]+=Ye.dot(o[1],o[1]),v=Ye.subtract(t[g],Xe.q([w,w,_,_],x)),c[0]+=Ye.dot(o[0],v),c[1]+=Ye.dot(o[1],v);u=s[0][0]*s[1][1]-s[1][0]*s[0][1],l=s[0][0]*c[1]-s[1][0]*c[0],h=c[0]*s[1][1]-c[1]*s[0][1],f=0===u?0:h/u,d=0===u?0:l/u,m=Ye.vectorLen(Ye.subtract(w,_)),f<(p=1e-6*m)||d<p?(i[1]=Ye.addArrays(w,Ye.mulItems(n,m/3)),i[2]=Ye.addArrays(_,Ye.mulItems(r,m/3))):(i[1]=Ye.addArrays(w,Ye.mulItems(n,f)),i[2]=Ye.addArrays(_,Ye.mulItems(r,d)));return i}(t,n,r,i);var l=function(t,e,n){var r,i,a,o,s,c,u,l;i=0,a=Math.floor(t.length/2);var h=Fe(e,10);for(s=0,c=t.length;s<c;s++)u=t[s],l=Be(e,n[s],h,10),(r=(o=Ye.subtract(Xe.q(e,l),u))[0]*o[0]+o[1]*o[1])>i&&(i=r,a=s);return[i,a]}(t,s,e),h=Object(o.a)(l,2);return c=h[0],u=h[1],a&&a({bez:s,points:t,params:e,maxErr:c,maxPoint:u}),[s,c,u]}function Ne(t,e,n){return n.map((function(n,r){return Ge(t,e[r],n)}))}function Ge(t,e,n){var r=Ye.subtract(Xe.q(t,n),e),i=Xe.qprime(t,n),a=Ye.mulMatrix(r,i),o=Ye.sum(Ye.squareItems(i))+2*Ye.mulMatrix(r,Xe.qprimeprime(t,n));return 0===o?n:n-a/o}var Fe=function(t,e){for(var n,r=[0],i=t[0],a=0,o=1;o<=e;o++)n=Xe.q(t,o/e),a+=Ye.vectorLen(Ye.subtract(n,i)),r.push(a),i=n;return r=r.map((function(t){return t/a}))};function Be(t,e,n,r){if(e<0)return 0;if(e>1)return 1;for(var i,a,o,s,c=1;c<=r;c++)if(e<=n[c]){o=(c-1)/r,a=c/r,s=(e-(i=n[c-1]))/(n[c]-i)*(a-o)+o;break}return s}function qe(t,e){return Ye.normalize(Ye.subtract(t,e))}var Ye=function(){function t(){Object(s.a)(this,t)}return Object(c.a)(t,null,[{key:"zeros_Xx2x2",value:function(t){for(var e=[];t--;)e.push([0,0]);return e}},{key:"mulItems",value:function(t,e){return t.map((function(t){return t*e}))}},{key:"mulMatrix",value:function(t,e){return t.reduce((function(t,n,r){return t+n*e[r]}),0)}},{key:"subtract",value:function(t,e){return t.map((function(t,n){return t-e[n]}))}},{key:"addArrays",value:function(t,e){return t.map((function(t,n){return t+e[n]}))}},{key:"addItems",value:function(t,e){return t.map((function(t){return t+e}))}},{key:"sum",value:function(t){return t.reduce((function(t,e){return t+e}))}},{key:"dot",value:function(e,n){return t.mulMatrix(e,n)}},{key:"vectorLen",value:function(t){return Math.hypot.apply(Math,Object(i.a)(t))}},{key:"divItems",value:function(t,e){return t.map((function(t){return t/e}))}},{key:"squareItems",value:function(t){return t.map((function(t){return t*t}))}},{key:"normalize",value:function(t){return this.divItems(t,this.vectorLen(t))}}]),t}(),Xe=function(){function t(){Object(s.a)(this,t)}return Object(c.a)(t,null,[{key:"q",value:function(t,e){var n=1-e,r=Ye.mulItems(t[0],n*n*n),i=Ye.mulItems(t[1],3*n*n*e),a=Ye.mulItems(t[2],3*n*e*e),o=Ye.mulItems(t[3],e*e*e);return Ye.addArrays(Ye.addArrays(r,i),Ye.addArrays(a,o))}},{key:"qprime",value:function(t,e){var n=1-e,r=Ye.mulItems(Ye.subtract(t[1],t[0]),3*n*n),i=Ye.mulItems(Ye.subtract(t[2],t[1]),6*n*e),a=Ye.mulItems(Ye.subtract(t[3],t[2]),3*e*e);return Ye.addArrays(Ye.addArrays(r,i),a)}},{key:"qprimeprime",value:function(t,e){return Ye.addArrays(Ye.mulItems(Ye.addArrays(Ye.subtract(t[2],Ye.mulItems(t[1],2)),t[0]),6*(1-e)),Ye.mulItems(Ye.addArrays(Ye.subtract(t[3],Ye.mulItems(t[2],2)),t[1]),6*e))}}]),t}();function We(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=this.points.map((function(t){return[t.x,t.y]})),n=Le(e,t),r=n.map((function(t,e,n){var r=ht.get(n,e-1,ht.last(n));ht.get(n,e+1,n[0]);return{x:t[0][0],y:t[0][1],c:[{x:r[1][0],y:r[1][1]},{x:r[2][0],y:r[2][1]}]}})),i=ht.get(n,n.length-2,!1),a=ht.last(n);return new He(r=i?r.concat([{x:a[3][0],y:a[3][1],c:[{x:a[1][0],y:a[1][1]},{x:a[2][0],y:a[2][1]}]}]):r.concat([{x:a[3][0],y:a[3][1]}])).copyStyle(this)}function Ue(){this.reduce=function(){return this},this.startPoint=function(){return this.points[0]},this.endPoint=function(){return this.points[this.points.length-1]},this.reverse=function(){return new He(ht.reverse(this.points).map((function(t,e,n){var r=!1;r=0===e?n[n.length-1]:n[e-1];var i=ht.get(r,"c",!1);return ht.isArray(i)&&(i=ht.reverse(i)),{x:t.x,y:t.y,q:ht.get(r,"q",!1),c:i}}))).copyStyle(this).closed(this.closedPath)},this.subPoints=function(t,e){return new He(this.points.filter((function(n,r){return r>=t&&r<=e}))).closed(!1)},this.offset=function(t){var e=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.02,r=[];return t.points.forEach((function(i,a){if(0===a);else{var o=t.points[a-1];if(i.c)for(var s=new C.a(t.points[a-1].x,t.points[a-1].y,t.points[a].c[0].x,t.points[a].c[0].y,t.points[a].c[1].x,t.points[a].c[1].y,i.x,i.y),c=0;c<=1;c+=n){var u=s.get(c),l=s.normal(c);r.push({x:u.x+l.x*-e,y:u.y+l.y*-e})}else if(i.q)for(var h=new C.a(o.x,o.y,i.q.x,i.q.y,i.x,i.y),f=0;f<=1;f+=n){var d=h.get(f),p=h.normal(f);r.push({x:d.x+p.x*-e,y:d.y+p.y*-e})}else{var m=Ae(o,i,e);r.push(m[0]),r.push(m[1])}}})),new He(r).fill(t.fillColor).fillOpacity(t.fillOpacityValue).stroke(t.strokeColor).strokeOpacity(t.strokeOpacityValue).closed(t.closedPath)}(this,t);return e},this._segments=!1,this.segments=function(){var t=this;if(!1===this._segments){var e=[];this.points.forEach((function(n,r,i){r<i.length-1?e.push(new De(n,i[r+1])):t.closedPath&&e.push(new De(n,i[0]))})),this._segments=e}return this._segments},this._length=!1,this.getLength=function(){return this.segments().reduce((function(t,e){return t+e.getLength()}),0)},this.getCrossings=function(t){return this.getIntersections(t)},this.getIntersections=function(t){var e=this;if(e===t)return[];var n=e.getBounds(),r=t.getBounds();if(!1===n.overlaps(r))return[];var i=e.segments(),a=t.segments(),o=[];return i.forEach((function(t){a.forEach((function(e){t.intersections(e).forEach((function(t){o.push(t)}))}))})),o},this.splitAt=function(t){for(var e=this.getLength(),n=this.segments(),r=e*t+.01,i=0;i<n.length&&r>n[i].getLength();)r-=n[i].getLength(),i++;var a=new He,o=new He;return n.forEach((function(t,e){if(e<i)a.addSegment(t);else if(e===i){var n=t.splitAt(r/t.getLength());a.addSegment(n[0]),o.addSegment(n[1])}else o.addSegment(t)})),[a,o]},this.subPath=function(t,e){var n=t,r=e;if(n>r&&(n=e,r=t),n===r)return new He;for(var i=this.getLength(),a=this.segments(),o=i*n+.01,s=i*r+.01,c=0,u=0;c<a.length&&o>a[c].getLength();)o-=a[c].getLength(),c++;for(;u<a.length&&s>a[u].getLength();)s-=a[u].getLength(),u++;var l=new He;if(c===u){var h=a[c];h=h.subSegment(o/h.getLength(),s/h.getLength()),l.addSegment(h)}else a.forEach((function(t,e){if(e===c){var n=t.subSegment(o/t.getLength(),1);l.addSegment(n)}else if(e>c&&e<u)l.addSegment(t);else if(e===u){var r=t.subSegment(0,s/t.getLength());l.addSegment(r)}}));return l},this.addSegment=function(t){0===this.points.length?(this.points.push(t.p1),this.points.push(t.p2)):(this.points[this.points.length-1].equals(t.p1)||"LINEAR"===t.type||this.points.push(t.p1),this.points.push(t.p2))},this.isClockwise=function(){return this.getArea()>=0},this.getArea=function(){var t=this._area;if(null===t){t=0;var e=this.segments(),n=this.points[0];e.forEach((function(e,r,i){var a=n,o=e.p1,s=e.p2;t+=.5*((a.x-s.x)*(o.y-a.y)-(a.x-o.x)*(s.y-a.y));var c=e.getArea();t+=c})),this._area=t}return this._area},this._area=null,this.contains=function(t){if(!ht.isNumber(t.x)||!ht.isNumber(t.y))return!1;if(!1===this.getBounds().containsPoint(t))return!1;if(!1===this.closedPath)return!1;var e=1e5,n=new He([{x:-1e5,y:t.y},{x:e,y:t.y}]),r=this.getIntersections(n);r.push({x:-1e5,y:t.y}),r.push({x:e,y:t.y}),r=ht.sortBy(r,"x");for(var i=!1,a=0;a+1<r.length;a+=1){var o=r[a],s=r[a+1];if(i){if(t.x>=o.x&&t.x<=s.x)return!0;i=!1}else i=!0}return!1},this.angleAt=function(t){var e=.99999999*t;if(this.points.length>1){this.points[0],this.points[1];!1===this._pointsFlattened&&this.flattenPoints();var n=this.totalDistance*e,r=0;if(n-this._pointsFlattened[r].distance<0)r=0;else for(;n-this._pointsFlattened[r].distance>0;)n-=this._pointsFlattened[r].distance,r++,this.closedPath?r>this._pointsFlattened.length-1&&(r=0):r>this._pointsFlattened.length-2&&(r=0);return function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.atan2(r,n)}(this._pointsFlattened[r],r===this._pointsFlattened.length-1?this._pointsFlattened[0]:this._pointsFlattened[r+1])}return!1},this.nearest=function(t){var e=t.type===ft?t:new be(t),n=this.segments();if(1===n.length)return n[0].nearest(e);if(n.length>1){var r=n.map((function(t){return t.nearest(e)}));return r.sort((function(t,n){return e.distance(t)-e.distance(n)})),r[0]}return this.points[0]},this.smoothPath=Te,this.fitCurve=We}function Ve(){function t(t,e){var n=t.segments(),r=e.segments(),i=[];n.forEach((function(t){t.cut(e).forEach((function(t){return i.push(t)}))}));var a=[];return r.forEach((function(e){e.cut(t).forEach((function(t){return a.push(t)}))})),{_1:i,_2:a}}this.union=function(n,r){var i=this,a=n,o=t(i,a),s={_1:o._1.filter((function(t){return!a.contains(t.interpolate(.5))})),_2:o._2.filter((function(t){return!i.contains(t.interpolate(.5))}))};return e(s._1.concat(s._2)).map((function(t){return new He(t).closed(!0)}))},this.intersect=function(n,r){var i=this,a=n,o=i.getBounds(),s=a.getBounds();if(a.contains(o.p1)&&a.contains(o.p2)&&a.contains(o.p3)&&a.contains(o.p4))return[a];if(i.contains(s.p1)&&i.contains(s.p2)&&i.contains(s.p3)&&i.contains(s.p4))return[a];var c=t(i,a),u={_1:c._1.filter((function(t){return a.contains(t.interpolate(.5))})),_2:c._2.filter((function(t){return i.contains(t.interpolate(.5))}))},l=u._1.concat(u._2);return 0===l.length?[]:e(l).map((function(t){return new He(t).closed(!0).copyStyle(n)}))},this.subtract=function(t,e){return[]},this.exclude=function(t,e){return[]},this.cutSegments=function(t){var e=this.segments(),n=[];return e.forEach((function(e){e.cut(t).forEach((function(t){return n.push(t)}))})),n},this.cutPath=function(t){var n=this,r=t.cutSegments(this);return 0===(r=r.filter((function(t){return n.contains(t.interpolate(.5))}))).length?[]:1===r.length?[new He([r[0].p1,r[0].p2]).copyStyle(t)]:e(r).map((function(e){return new He(e).copyStyle(t)}))};function e(t){t.forEach((function(t,e){return t.index=e}));var e=[],n=[0],r=[{x:t[0].p1.x,y:t[0].p1.y},t[0].p2];return t.forEach((function(t,i,a){var o=a.filter((function(t){return!n.includes(t.index)}));if(0!==o.length){var s=r[r.length-1],c=o.sort((function(t,e){return t.p1.distance(s)-e.p1.distance(s)}))[0],u=o.sort((function(t,e){return t.p2.distance(s)-e.p2.distance(s)}))[0];c.p1.distance(s),u.p2.distance(s);c.p1.distance(s)<u.p2.distance(s)?(c.p1.distance(s)>.01&&(e.push(r),r=[]),r.push(c.p1),r.push(c.p2),n.push(c.index)):(u.p2.distance(s)>.01&&(e.push(r),r=[]),r.push(u.p2),r.push(u.p1),n.push(u.index))}})),e.push(r),e=e.filter((function(t){return t.length>0})),e=e.map((function(t){return ht.uniqWith(t,(function(t,e){return t.curveType===e.curveType&&t.curveType===xt&&t.x===e.x&&t.y===e.y}))})),e}this.mergeSegments=e}function He(t,e,n){Ke.call(this,t,e,n),Ue.call(this),Ve.call(this),this.type=mt,this.closedPath=ht.get(n,"closedPath",!1),this.controlsFillOpacityValue=.1,this.showSegmentLengthLabels=ht.get(n,"showSegmentLengthLabels",!1),this.setShowSegmentLengthLabels=function(t){return this.showSegmentLengthLabels=t,this},this.reduce=function(){return this},this.closed=function(t){return this.closedPath=t,this}}function Je(t,e,n){return e.c?new C.a(t.x,t.y,e.c[0].x,e.c[0].y,e.c[1].x,e.c[1].y,e.x,e.y).get(n):e.q?new C.a(t.x,t.y,e.q.x,e.q.y,e.x,e.y).get(n):{x:t.x-(t.x-e.x)*n,y:t.y-(t.y-e.y)*n}}function Ze(t,e){if(e.c)return new C.a(t.x,t.y,e.c[0].x,e.c[0].y,e.c[1].x,e.c[1].y,e.x,e.y).length();if(e.q)return new C.a(t.x,t.y,e.q.x,e.q.y,e.x,e.y).length();var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}He.type=mt;var Qe=0;function Ke(t,e,n){var r=this;me.call(this),he.call(this,n);var i="GEOMETRY-".concat(Qe+=1);void 0!==e&&(i=e),this.name=i,this.id=Qe,this.unit="px",this.displayUnit="mm",this._export=!1,this.showBounds=!1,this.export=function(t){return this._export=t,this},this.clone=function(){return ht.cloneDeep(this)},this.copy=function(){return this.type===mt?new He(this.points).copyStyle(this).closed(this.closedPath).export(this._export):this.type===dt?new $e(this.points).copyStyle(this).export(this._export):ht.clone(this,!0)},this.length=function(){var t=this;return this.points.reduce((function(e,n,r,i){return r===i.length-1?t.closedPath?e+Ze(n,i[0]):e:e+Ze(n,i[r+1])}),0)},this.getBounds=function(){return _e(this.points)},this.extract=function(){var t=this.clone();return t.points.forEach((function(t){return t.removeConnections()})),t._pointsFlattened=!1,t},this.connectPoints=function(){var t=this;this.points.forEach((function(e,n,r){e.geometry=t,e.geometryIndex=n,r.length>1&&(0===n?e.nextPoint=r[n+1]:n<r.length-1?(e.previousPoint=r[n-1],e.nextPoint=r[n+1]):e.previousPoint=r[n-1])}))},this._pointsFlattened=!1,this.flattenPoints=function(){!function(t){var e=[],n=0;t.points.forEach((function(n,r,i){var a=!1;if(r===i.length-1?t.closedPath&&(a=i[0]):a=i[r+1],a)if(a.c){var o=new C.a(n.x,n.y,a.c[0].x,a.c[0].y,a.c[1].x,a.c[1].y,a.x,a.y).getLUT(50);e=e.concat(o)}else if(a.q){var s=new C.a(n.x,n.y,a.q.x,a.q.y,a.x,a.y).getLUT(50);e=e.concat(s)}else e.push(n);else e.push(n)}));var r=(e=e.map((function(t){return Object(h.a)(Object(h.a)({},t),{},{q:!1,c:!1})}))).map((function(e,r,i){return r===i.length-1?(t.closedPath&&(n+=Ze(e,i[0])),Object(h.a)(Object(h.a)({},e),{},{distance:Ze(e,i[0])})):(n+=Ze(e,i[r+1]),Object(h.a)(Object(h.a)({},e),{},{distance:Ze(e,i[r+1])}))}));t._pointsFlattened=r,t.totalDistance=n}(this)},this.simpleInterpolate=function(t){var e=.99999999*t,n=this.length();if(this.points.length>1){for(var r=n*e,i=0,a=Ze(this.points[0],this.points[1]);r-a>0;)r-=a,i++,a=Ze(this.points[i],this.points[i+1]);return Je(this.points[i],this.points[i+1],r/a)}return 1===this.points.length?this.points[0].copy():new be({x:0,y:0})},this.interpolate=function(t){var e=.99999999*t;if(this.points.length>1){this.points[0],this.points[1];!1===this._pointsFlattened&&this.flattenPoints();var n=this.totalDistance*e,r=0;if(n-this._pointsFlattened[r].distance<0)r=0;else for(;n-this._pointsFlattened[r].distance>0;)n-=this._pointsFlattened[r].distance,r++,this.closedPath?r>this._pointsFlattened.length-1&&(r=0):r>this._pointsFlattened.length-2&&(r=0);var i=n/this._pointsFlattened[r].distance;return Je(this._pointsFlattened[r],r===this._pointsFlattened.length-1?this._pointsFlattened[0]:this._pointsFlattened[r+1],i)}return 1===this.points.length?this.points[0]:new be({x:0,y:0})},void 0!==t?(this.points=t.map((function(t){return new be(t)})),this.connectPoints()):this.points=[],this.center=function(){if(this.points.length>1){var t={x:0,y:0,z:0,count:0};return this.points.forEach((function(e){t.x+=e.x,t.y+=e.y,t.z+=e.z,t.count+=1,e.c?e.c.forEach((function(e){t.x+=e.x,t.y+=e.y,t.count+=1})):e.q&&(t.x+=e.q.x,t.y+=e.q.y,t.count+=1)})),t.x=t.x/t.count,t.y=t.y/t.count,t.z=t.z/t.count,new be(t)}return this.points[0]},this.matrix=!1,this.addMatrix=function(t,e,n,i,a,o){var s=ht.get(t,"a",!1);if(s){var c=ht.get(t,"b",0),u=ht.get(t,"c",0),l=ht.get(t,"d",0),h=ht.get(t,"tx",0),f=ht.get(t,"ty",0);return r.matrix=new ge(s,c,u,l,h,f),r}return r.matrix=new ge(t,e,n,i,a,o),r},this.matrixTransform=function(){return r.points=r.points.map((function(t){return r.matrix.transformPoint(t)})),r},this.isEqual=function(t){return r.points.every((function(e,n){return e.equals(t.points[n])}))},this.addPoint=function(t){r.points.forEach((function(t){return t.selected=!1})),r.points.push(new be(t))}}function $e(t,e){Ke.call(this,t,e),this.type=dt,this.nearest=function(t){var e=this.points.slice(),n=t.type===ft?t:new be(t);return e.sort((function(t,e){return n.distance(t)-n.distance(e)})),e[0]}}function tn(t,e,n){var r=this;Ke.call(this,[e],n),he.call(this,[e],n),this._fillOpacity=1,this._fill="black",this._strokeOpacity=0,this._stroke="transparent",this.type=yt,this.x=0,this.y=0,this.z=0,e&&(e.x&&(this.x=e.x),e.y&&(this.y=e.y),e.z&&(this.z=e.z)),this.text=" ",this.multiLine=!1,t&&(this.text=t,Array.isArray(t)&&(this.multiLine=!0)),this._fontSize=24,this._lineHeight=20,this.fontSize=function(t,e){return r._fontSize=t,r._lineHeight=e||t+1*t/2,r},this._fontFamily="europa",this.fontFamily=function(t){return r._fontFamily=t,r},this._fontWeight="normal",this.fontWeight=function(t){return r._fontWeight=t,r},this._textAnchor="start",this.textAnchor=function(t){return r._textAnchor=t,r},this._alignmentBaseline="bottom",this.alignmentBaseline=function(t){return r._alignmentBaseline=t,r},this._rotation=0,this.rotation=function(t){return r._rotation=t,r},this.translate=function(t){return r.x+=_.get(t,"x",0),r.y+=_.get(t,"y",0),r.z+=_.get(t,"z",0),r},this.rotate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n={x:(r.x-e.x)*Math.cos(t)-(r.y-e.y)*Math.sin(t)+e.x,y:(r.x-e.x)*Math.sin(t)+(r.y-e.y)*Math.cos(t)+e.y};return r.x=n.x,r.y=n.y,r}}$e.type=dt,tn.type=yt;var en=function(t){return"M190 S".concat(t.bedTemperature,"\n  M109 S").concat(t.temperature,"\n  ;Sliced at: Tue 13-03-2018 09:03:51\n  ;Basic settings: Layer height: 0.15 Walls: 1.2 Fill: 15\n  G21        ;metric values\n  G90        ;absolute positioning\n  M82        ;set extruder to absolute mode\n  M107       ;start with the fan off\n  G28 X0 Y0  ;move X/Y to min endstops\n  G28 Z0     ;move Z to min endstops\n  G1 Z15.0 F3600 ;move the platform down 15mm\n  G92 E0                  ;zero the extruded length\n  G1 F200 E3              ;extrude 3mm of feed stock\n  G92 E0                  ;zero the extruded length again\n  M106 S255  ;turn fan on\n  G1 F3600\n  ;Put printing message on LCD screen\n  M117 Printing...\n\n  ;LAYER:0\n  ")},nn="\nG0 X50 Y50 Z10\nG0 X150 Y50 Z10\nG0 X150 Y150 Z10\nG0 X50 Y150 Z10\n",rn="\nG0 X110 Y110 Z100 F3000     ;End GCode\n\nM109 S30.000000             ;set heating to 0 before turning off\nM190 R30.000000             ;set heating to 0 before turning off\nM104 S0                     ;extruder heater off\nM140 S0                     ;heated bed heater off (if you have it)\nG91                                    ;relative positioning\nG1 E-1 F300                            ;retract the filament a bit before lifting the nozzle, to release some of the pressure\nG1 Z+0.5 E-5 X-20 Y-20 F3600 ;move Z up a bit and retract filament even more\nG28 X0 Y0                              ;move X/Y to min endstops, so the head is out of the way\nM84                         ;steppers off\nG90                         ;absolute positioning\nM81\n",an=300,on=3e3,sn=1600,cn=.04,un=.1;function ln(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name",n=e;this.name=n,this.gcodeSet=!1,this.layerHeight=.15,this.zOffset=.1,this.layerCount=10,this.firstLayerExtrusionCoefficient=un,this.extrusionCoefficient=cn,this.temperature=230,this.bedTemperature=50,this.firstLayerLinearMovePauseTime=100,this.linearMovePauseTime=100,this.currentPauseTimeAfterLinearMove=!1,this.baseLayersSpeedCoefficient=1,this.baseLayers=5,this.speedCoefficient=1,this.moveSpeed=on*this.speedCoefficient,this.printSpeed=an*this.speedCoefficient,this.header=en(this),this.footer=rn,this.movesGCode=nn,this.moves=[],this.generators={},this.generatorKeys=[],this.addGenerator=function(t,e){this.generators[t]=e,this.generatorKeys.push(t)},this._layerCounter=0,this.generate=function(e){var n=t.moves.slice().slice();if(t.generatorKeys.forEach((function(r){var i=t.generators[r](e);ht.isArray(i)&&(i=ht.flatten(i)),n=n.concat(i)})),!1===t.gcodeSet)return"no gcode set for this model";t.header=en(t);var r="";return t.currentPauseTimeAfterLinearMove=t.firstLayerLinearMovePauseTime,r=t.layerIncrement(0),r+=t.linearMove({x:5,y:20}),r+=t.linearPrintMove({x:5,y:1},{x:100,y:20}),r+=t.linearPrintMove({x:100,y:20},{x:100,y:21}),r+=t.linearPrintMove({x:100,y:21},{x:5,y:21}),r+=t.linearPrintMove({x:5,y:21},{x:5,y:22}),r+=t.linearPrintMove({x:5,y:22},{x:100,y:22}),ht.range(t.layerCount).forEach((function(e){t._layerCounter=e,t.moveSpeed=on*t.speedCoefficient,t.printSpeed=an*t.speedCoefficient,e<t.baseLayers&&(t.printSpeed*=t.baseLayersSpeedCoefficient),t.currentPauseTimeAfterLinearMove=e<=2?t.firstLayerLinearMovePauseTime:t.linearMovePauseTime,r+=t.layerIncrement(e),n.forEach((function(n){e>=n.layerRange[0]&&e<=n.layerRange[1]&&n.geometry.points.forEach((function(e,i,a){0===i?r+=t.linearMove(e):i===a.length-1?(r+=t.linearPrintMove(a[i-1],e),n.geometry.closedPath&&(r+=t.linearPrintMove(e,a[0]))):r+=t.linearPrintMove(a[i-1],e)}))}))})),t.header+r+t.footer},this.initialize=function(e,n){t.moves=[],t.extrusion=0,t._layerCounter=0,t.layerCount=e||10,t.layers=ht.range(t.layerCount),t.extrusionCoefficient=ht.get(n,"extrusionCoefficient",t.extrusionCoefficient),t.temperature=ht.get(n,"temperature",t.temperature),t.bedTemperature=ht.get(n,"bedTemperature",t.bedTemperature),t.linearMovePauseTime=ht.get(n,"linearMovePauseTime",t.linearMovePauseTime),t.firstLayerLinearMovePauseTime=ht.get(n,"firstLayerLinearMovePauseTime",t.firstLayerLinearMovePauseTime),t.baseLayersSpeedCoefficient=ht.get(n,"baseLayersSpeedCoefficient",t.baseLayersSpeedCoefficient),t.speedCoefficient=ht.get(n,"speedCoefficient",t.speedCoefficient),t.gcodeSet=!0},this.addMove=function(t){this.moves.push(t)},this.layerIncrement=function(e){return"G0 Z".concat((e*t.layerHeight+t.zOffset).toFixed(3)," ;layer: ").concat(e,"\nM117 layer ").concat(e,"/").concat(t.layerCount,";\n")},this.linearMove=function(e){return"G1 F".concat(sn," E").concat(t.extrusion.toFixed(3)-5,"\nG0 X").concat(e.x.toFixed(3)," Y").concat(e.y.toFixed(3)," F").concat(t.moveSpeed,"\nG1 F").concat(sn," E").concat(t.extrusion.toFixed(3),"\nG4 P").concat(t.currentPauseTimeAfterLinearMove,"\n")},this.linearPrintMove=function(e,n){var r=t.extrusionCoefficient;return t._layerCounter<=1&&(r=t.firstLayerExtrusionCoefficient),t.extrusion+=hn(e,n)*r,"G1 X".concat(n.x.toFixed(3)," Y").concat(n.y.toFixed(3)," F").concat(t.printSpeed," E").concat(t.extrusion.toFixed(3),"\n")}}function hn(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}var fn=0;function dn(t,e){var n="GROUP ".concat(fn+=1);void 0!==e&&(n=e),this.name=n,this.type=pt,this.id=fn,this.closed=!0,this.points=t.map((function(t){return new be(t)}))}function pn(t,e){this.type=jt,this.range=t,this.value=void 0!==e?e:t[0]}function mn(t){this.type=Ot,this.value=t}dn.type=pt,pn.type=jt,mn.type=Ot;var gn=we;function yn(t,e,n){if(t.beginPath(),e.points.forEach((function(r,i,a){0===i?t.moveTo(r.x*jn.x*n.scaleX+n.translateX*jn.x,r.y*jn.y*n.scaleY+n.translateY*jn.y):vn(t,r,n),i===a.length-1&&e.closedPath&&vn(t,a[0],n)})),e.showSegmentLengthLabels){var r=e.segments();t.font="18px Europa",t.textAlign="center",t.textBaseline="bottom",t.strokeStyle="transparent",t.globalAlpha=1,t.fillStyle="rgba(0,0,0,1)",t.lineWidth=0,r.forEach((function(r){var i=[],a=r.getLength(),o="".concat(ht.round(a,1)).concat(e.displayUnit);20*o.length<a*n.scaleX*jn.x&&("linear"===r.type?i=i.concat([[r.p1.x*jn.x*n.scaleX+n.translateX*jn.x,r.p1.y*jn.y*n.scaleY+n.translateY*jn.y],[r.p2.x*jn.x*n.scaleX+n.translateX*jn.x,r.p2.y*jn.y*n.scaleY+n.translateY*jn.y]]):r.lut().filter((function(t,e){return e%10===0})).forEach((function(t){i=i.concat([t.x*jn.x*n.scaleX+n.translateX*jn.x,t.y*jn.y*n.scaleY+n.translateY*jn.y])}))),t.textPath(o,i)}))}t.globalAlpha=e._strokeOpacity*e._opacity,t.shadowOffsetX=e._shadowOffsetX,t.shadowOffsetY=e._shadowOffsetY,t.shadowColor=e._shadowColor,t.shadowOpacity=e._shadowOpacity,t.shadowBlur=e._shadowBlur,t.strokeStyle=e._stroke;var i=e._strokeWidth;e._scaledStrokeWidth?i=i/jn.x*4:i*=n.scaleX,t.lineWidth=i,t.lineCap=e._strokeLinecap,t.lineJoin=e._strokeLinejoin;var a=e._strokeDasharray;ht.isNumber(a),0===a?t.setLineDash([]):t.setLineDash([a]),t.setLineDash([e._strokeDasharray*jn.x]),t.stroke(),e.closedPath&&(t.globalAlpha=e._fillOpacity*e._opacity,t.fillStyle=e._fill,t.fill()),t.closePath()}function vn(t,e,n){e.q?t.quadraticCurveTo(e.q.x*jn.x*n.scaleX+n.translateX*jn.x,e.q.y*jn.y*n.scaleY+n.translateY*jn.y,e.x*jn.x*n.scaleX+n.translateX*jn.x,e.y*jn.y*n.scaleY+n.translateY*jn.y):e.c?t.bezierCurveTo(e.c[0].x*jn.x*n.scaleX+n.translateX*jn.x,e.c[0].y*jn.y*n.scaleY+n.translateY*jn.y,e.c[1].x*jn.x*n.scaleX+n.translateX*jn.x,e.c[1].y*jn.y*n.scaleY+n.translateY*jn.y,e.x*jn.x*n.scaleX+n.translateX*jn.x,e.y*jn.y*n.scaleY+n.translateY*jn.y):t.lineTo(e.x*jn.x*n.scaleX+n.translateX*jn.x,e.y*jn.y*n.scaleY+n.translateY*jn.y)}function xn(t,e,n){e.type===dt?function(t,e,n,r){e.points.forEach((function(r,i){var a=15;e._r&&(a=e._r),r._r&&(a=r._r),t.beginPath(),t.fillStyle=e.controls.fill,e._fill&&(t.fillStyle=e._fill),t.globalAlpha=.5,t.arc(r.x*n.x,r.y*n.y,a*n.x,0,2*Math.PI),t.globalAlpha=e._fillOpacity*e._opacity,t.fill(),t.globalAlpha=e._strokeOpacity*e._opacity,t.strokeStyle=e.controls.stroke,e._stroke&&(t.strokeStyle=e._stroke),t.lineWidth=e._strokeWidth*n.x,t.lineCap=e._strokeLinecap,t.stroke(),t.closePath()}))}(t,e,n):e.type===mt||e.type===gt?yn(t,e,n):e.type===yt?function(t,e,n){t.font="".concat(e._fontWeight," ").concat(e._fontSize*n.scaleX,"px ").concat(ht.get(e,"_fontFamily","Europa")),t.fillStyle=e._fill,t.globalAlpha=e._fillOpacity*e._opacity,t.textAlign=e._textAnchor,t.textBaseline=e._alignmentBaseline,t.shadowColor=e._shadowColor,t.shadowBlur=e._shadowBlur,t.shadowOffsetX=e._shadowOffsetX,t.shadowOffsetY=e._shadowOffsetY;var r={x:e.x*jn.x*n.scaleX+n.translateX*jn.x,y:e.y*jn.y*n.scaleY+n.translateY*jn.y};0===e._rotation?e.multiLine?e.text.forEach((function(e,n){t.fillText(e,r.x,r.y)})):t.fillText(e.text,r.x,r.y):e.multiLine||(t.save(),t.translate(r.x,r.y),t.rotate(e._rotation),t.fillText(e.text,0,0),t.restore())}(t,e,n):e.type===vt&&function(t,e,n){t.beginPath(),t.globalAlpha=e._strokeOpacity*e._opacity,t.shadowOffsetX=e._shadowOffsetX,t.shadowOffsetY=e._shadowOffsetY,t.shadowColor=e._shadowColor,t.shadowBlur=e._shadowBlur,t.strokeStyle=e._stroke,t.lineWidth=e._strokeWidth*n.scaleX,t.rect(e.p1.x*n.scaleX,e.p1.y*n.scaleY,e.width()*n.scaleX,e.height()*n.scaleY),t.stroke(),t.globalAlpha=e._fillOpacity*e._opacity,t.fillStyle=e._fill,t.fill(),t.closePath()}(t,e,n)}!function(){function t(t,e,n,r){var i=n-t,a=r-e;return Math.sqrt(i*i+a*a)}CanvasRenderingContext2D.prototype.textOverflow="",CanvasRenderingContext2D.prototype.textJustify=!1,CanvasRenderingContext2D.prototype.textStrokeMin=0;var e=[],n=CanvasRenderingContext2D.prototype.save;CanvasRenderingContext2D.prototype.save=function(){e.push({textOverflow:this.textOverflow,textJustify:this.textJustify,textStrokeMin:this.textStrokeMin}),n.call(this)};var r=CanvasRenderingContext2D.prototype.restore;CanvasRenderingContext2D.prototype.restore=function(){r.call(this);var t=e.pop();this.textOverflow=t.textOverflow,this.textJustify=t.textJustify,this.textStrokeMin=t.textStrokeMin},CanvasRenderingContext2D.prototype.textPath=function(e,n){var r,i=0,a=2;function o(e){if(!r||i+r<e)for(;a<n.length&&(r=t(n[a-2],n[a-1],n[a],n[a+1]),!(i+r>e))&&!((a+=2)>=n.length);)i+=r;var o,s,c=e-i;return a>=n.length&&(a=n.length-2),c?(o=n[a-2]+(n[a]-n[a-2])*c/r,s=n[a-1]+(n[a+1]-n[a-1])*c/r):(o=n[a-2],s=n[a-1]),[o,s,Math.atan2(n[a+1]-n[a-1],n[a]-n[a-2])]}for(var s=.25*this.measureText(" ").width,c=0,u=2;u<n.length;u+=2)c+=t(n[u-2],n[u-1],n[u],n[u+1]);if(!(c<this.minWidth)){var l=e.split(" ").length-1;if("visible"!=this.textOverflow&&c<this.measureText(e).width+(e.length-1+l)*s){var h="ellipsis"==this.textOverflow?"\u2026":this.textOverflow||"",f=h.length-1;do{" "===e[e.length-1]&&l--,e=e.slice(0,-1)}while(e&&c<this.measureText(e+h).width+(e.length+f+l)*s);e+=h}var d=0;switch(this.textJustify||this.textAlign){case!0:case"center":case"end":case"right":this.textJustify?(d=0,s=(c-this.measureText(e).width)/(e.length-1+l)):(d=c-this.measureText(e).width-(e.length+l)*s,"center"==this.textAlign&&(d/=2))}for(var p=0;p<e.length;p++){var m=e[p],g=this.measureText(m).width,y=o(d+g/2);this.save(),this.textAlign="center",this.translate(y[0],y[1]),this.rotate(y[2]),this.lineWidth>.1&&this.strokeText(m,0,0),this.fillText(m,0,0),this.restore(),d+=g+s*(" "==m?2:1)}}}}();var bn=[],wn=[],_n=[],jn={x:2,y:2};function On(t){var e=t.renderScaling,n=t.width*jn.x,r=t.height*jn.y,i=t.transformMatrix,a=t.model;bn[t.canvasID]=t.geometries,void 0===wn[t.canvasID]&&(wn[t.canvasID]=new gn({x:0,y:0},{x:10*n,y:10*r}).fill(t.background).fillOpacity(1).strokeWidth(0).stroke("transparent"));var o=t.editable,s=t.animated,c=t.playing;!1===o&&!1===s&&!1===c?(_n[t.canvasID]={drawn:!1,redraw:!1},_n["model-scale-render-canvas-".concat(t.canvasID)]={drawn:!1,redraw:!1}):(_n[t.canvasID]={drawn:!1,redraw:!0},_n["model-scale-render-canvas-".concat(t.canvasID)]={drawn:!1,redraw:!0});var u=kn((function(e){var a=!1;!1===_n[t.canvasID].drawn&&(a=!0,_n[t.canvasID].drawn=!0),_n[t.canvasID].redraw&&(a=!0),a&&(e.clearRect(0,0,100*n,100*r),xn(e,wn[t.canvasID],i),bn[t.canvasID].forEach((function(t){xn(e,t,i)})))}),"2d"),l=kn((function(a){if(t.shouldRenderFrame&&"model"===e){var o=!1;!1===_n["model-scale-render-canvas-".concat(t.canvasID)].drawn&&(o=!0,_n["model-scale-render-canvas-".concat(t.canvasID)].drawn=!0),_n["model-scale-render-canvas-".concat(t.canvasID)].redraw&&(o=!0),o&&(a.clearRect(0,0,100*n,100*r),xn(a,wn[t.canvasID],i),bn[t.canvasID].forEach((function(t){xn(a,t,{scaleX:1/jn.x,scaleY:1/jn.y,skewX:0,skewY:0,translateX:0,translateY:0})})))}}));return d.a.createElement("div",{style:{overflow:"hidden"}},d.a.createElement("canvas",{id:t.canvasID,style:{width:n/2},ref:u,width:n,height:2*Math.round(r/2)}),d.a.createElement("div",{style:{display:"none"}},d.a.createElement("canvas",{id:"model-scale-render-canvas-".concat(t.canvasID),style:{width:a.size.width,height:a.size.height},ref:l,width:a.size.width,height:a.size.height})))}function kn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2d",n=Object(f.useRef)(null);return Object(f.useEffect)((function(){var r=n.current.getContext(e),i=requestAnimationFrame((function e(){i=requestAnimationFrame(e),t(r)}));return function(){return cancelAnimationFrame(i)}}),[t,e]),n}var En="\nprecision highp float;\nprecision highp int;\nattribute vec2 uv;\nattribute vec3 position;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float uTime;\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    gl_PointSize = 5.0;\n}\n",Cn="precision highp float;\n    precision highp int;\n    uniform float uTime;\n    varying vec2 vUv;\n    void main() {\n        gl_FragColor = vec4(0.1, 0.1, 0.1, 1.0);\n    }\n",Pn=[];var Sn=!1;function In(t,e,n,r,a,o){if(void 0===Pn[e]){Pn[e]=function(t,e){var n=new S.a,r=n.gl,a="transparent"===e?k()("white"):k()(e);console.log(a),r.clearColor.apply(r,Object(i.a)(a._rgb));var o=new I.a(r,{fov:14.3,near:.1,far:1e5});o.position.x=500,o.position.y=500,o.position.z=4e3,o.lookAt([500,500,0]);var s=new M.a(o,{element:t,target:new D.a(500,500,0)});return{renderer:n,gl:r,camera:o,canvasCreated:!1,scene:new A.a,program:new T.a(r,{vertex:En,fragment:Cn,uniforms:{uTime:{value:0}}}),controls:s}}(t,o);var s=Pn[e].gl;t.appendChild(s.canvas)}if(!0!==Pn[e].canvasCreated){var c=Pn[e].gl;Pn[e].canvasCreated=!0,Pn[e].scene.children=[],r.forEach((function(t){Mn(t,c,e)})),a.forEach((function(t){Mn(t,c,e)})),Pn[e].renderer.setSize(n.width,n.height),Pn[e].camera.perspective({aspect:c.canvas.width/c.canvas.height}),c.canvas.id=e,Pn[e].program.uniforms.uTime.value=0,Pn[e].gl=c}else{var u=Pn[e].gl;r.forEach((function(t){Mn(t,u,e)})),a.forEach((function(t){Mn(t,u,e)})),console.log(Pn[e]),Pn[e].renderer.render({scene:Pn[e].scene,camera:Pn[e].camera})}Pn[e].renderer.render({scene:Pn[e].scene,camera:Pn[e].camera}),!1===Sn&&(requestAnimationFrame((function t(){requestAnimationFrame(t),Pn[e].controls.update(),Pn[e].renderer.render({scene:Pn[e].scene,camera:Pn[e].camera})})),Sn=!0)}function Mn(t,e,n){if(t.type===dt||t.type===mt){var r=[],i=[],a=t.points.reduce((function(e,n,a){return e.push(n.x),e.push(n.y),e.push(n.z),r.push(a),t.type===mt&&a<t.points.length-1&&r.push(a+1),i.push(0),i.push(0),e}),[]),o=new L.a(e,{position:{size:3,data:new Float32Array(a)},uv:{size:2,data:new Float32Array(i)},index:{data:new Uint16Array(r)}}),s=t.type===dt?e.POINTS:e.LINES;new R.a(e,{mode:s,geometry:o,program:Pn[n].program}).setParent(Pn[n].scene)}}var Dn=[],An=[],Tn=function(t){var e=t.editableGeometries,n=t.displayGeometries,r=t.width,i=t.height,a=t.canvasID,o=t.backgroundColor;Dn[a]=e,An[a]=n,console.log(o);var s=Object(f.useRef)(null);return Object(f.useEffect)((function(){return In(s.current,a,{width:2*r,height:2*i},Dn[a],An[a],o),function(){!function(t){Pn[t].canvasCreated=!1}(a)}})),d.a.createElement("div",{className:"canvas-3d-view",ref:s,style:{width:r,height:i,overflow:"hidden",background:o}})},Ln=function(t){var e,n=t.size,i=t.state,a=t.model;return d.a.createElement("div",{style:(e={position:"absolute",height:n.height,zIndex:1e3,padding:10,bottom:30},Object(r.a)(e,"height",12),Object(r.a)(e,"left",20),Object(r.a)(e,"right",20),Object(r.a)(e,"pointerEvents","none"),e),className:"frame-render-bar"},d.a.createElement("p",{style:{position:"absolute",left:5}},i.startFrame),d.a.createElement("p",{style:{position:"absolute",right:5}},i.endFrame),d.a.createElement("p",{style:{position:"absolute",left:"calc(".concat(a.animation_frame/i.endFrame*99,"% + 0px)")}},a.animation_frame))},Rn=d.a.memo((function(t){var e=t.editPoint,n=t.setEditingPoint,r=t.modelDispatch,i=t.transformMatrix,a=t.callUpdateParameters,s=Object(f.useState)(e.x),c=Object(o.a)(s,2),u=c[0],l=c[1],h=Object(f.useState)(e.y),p=Object(o.a)(h,2),m=p[0],g=p[1],v=Object(f.useState)(e.id),b=Object(o.a)(v,2),w=b[0],_=b[1];function j(t){"Escape"===t.key?n(!1):"ArrowLeft"===t.key?e.previousPoint&&n({point_id:e.previousPoint.id,geometry_id:e.geometry.id,geometry_key:e.geometry.key}):"ArrowRight"===t.key&&e.nextPoint&&n({point_id:e.nextPoint.id,geometry_id:e.geometry.id,geometry_key:e.geometry.key})}return Object(f.useEffect)((function(){e.id!==w&&(_(e.id),l(e.x),g(e.y))})),d.a.createElement("div",{className:"edit-point-pan-position",style:{left:i.translateX,top:i.translateY}},d.a.createElement("div",{className:"edit-point-pop-up",style:{left:e.x*i.scaleX,top:e.y*i.scaleY}},d.a.createElement(x.a,{icon:"close",size:"tiny",floated:"right",onClick:function(){n(!1)}}),d.a.createElement(y.a,{value:u,onKeyUp:function(t){"Enter"===t.key&&(r({type:W,payload:{overrideDragging:!0,point_id:e.id,x:parseFloat(u)}}),setTimeout((function(){a()}),1)),j(t)},type:"number",size:"mini",onChange:function(t){return l(t.target.value)},label:{basic:!0,content:"x (mm)"},className:u==e.x?"normal":"italic",labelPosition:"right"}),d.a.createElement(y.a,{value:m,onKeyUp:function(t){"Enter"===t.key&&(r({type:W,payload:{overrideDragging:!0,point_id:e.id,y:parseFloat(m)}}),setTimeout((function(){a()}),1)),j(t)},type:"number",size:"mini",onChange:function(t){return g(t.target.value)},label:{basic:!0,content:"y (mm)"},className:m==e.y?"normal":"italic",labelPosition:"right"})))})),zn={count:0,shouldLogEvents:!1,initialized:!1,initializeGoogleAnalytics:function(){},initialize:function(){"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||"hyperobjects.design"===window.location.hostname&&!1===this.initialized&&this.initializeGoogleAnalytics()},event:function(t,e,n){}};var Nn=[],Gn=!1,Fn=!1,Bn=!1,qn=!1,Yn=function(t){var e=t.key,n=e;" "===n&&(n="Space")," "===e&&!0===qn&&t.preventDefault(),"Escape"===e&&Un(),Nn.includes(n)||Nn.push(n),Bn(Nn)},Xn=function(t){var e=t.key,n=e;" "===e&&(n="Space"),Nn=Nn.filter((function(t){return t!==n})),Bn(Nn)};function Wn(t,e){return Bn=t,qn=ht.get(e,"blockSpace",!1),!1===Gn&&(Gn=window.addEventListener("keydown",Yn)),!1===Fn&&(Fn=window.addEventListener("keyup",Xn)),Nn}function Un(){!1!==Gn&&(window.removeEventListener("keydown",Yn),Gn=!1),!1!==Fn&&(window.removeEventListener("keyup",Xn),Fn=!1)}var Vn=Object(p.scaleLinear)().domain([.2,.1]).range([.7,0]).clamp(!0),Hn=Object(p.scaleLinear)().domain([.2,0]).range([12,0]).clamp(!0),Jn=d.a.memo((function(t){var e=t.width,n=t.height,r=t.transformMatrix,i=t.gridLinesUnit,a=t.showTicks,o=t.gridColor,s={x:Math.ceil(e/100),y:Math.ceil(n/100)},c=Object(p.scaleLinear)().domain([0,s.x]).range([0,e]),u=Object(p.scaleLinear)().domain([0,s.y]).range([0,n]),l=0,h=0,f="start",m="end";r.translateY*r.scaleY<20?(f="end",l=r.translateY/r.scaleY):l+=10/r.scaleY,r.translateX*r.scaleX<18?(m="start",h+=r.translateX/r.scaleX):h+=10/r.scaleX;var g=o;return d.a.createElement("g",{className:"grid-lines"},ht.range(1,s.x).map((function(t){return d.a.createElement("g",{key:"x-".concat(t),transform:"translate(".concat(c(t),", 0)")},d.a.createElement("line",{x1:0,x2:0,y1:0,y2:n,className:"grid-line",stroke:o,opacity:.5,strokeWidth:.5/r.scaleX}),a&&r.scaleX>.1&&d.a.createElement("g",{transform:"translate(".concat(5/r.scaleX,", ").concat(5/r.scaleX-l,")")},d.a.createElement("text",{x:0,y:0,alignmentBaseline:"hanging",fill:g,transform:"rotate(-90)",fontSize:Hn(r.scaleX)/r.scaleX,opacity:Vn(r.scaleX),textAnchor:f},Math.round(c(t)),i)))})),ht.range(s.y).map((function(t){return d.a.createElement("g",{key:"y-".concat(t),transform:"translate(0, ".concat(u(t),")")},d.a.createElement("line",{x1:0,x2:e,y1:0,y2:0,stroke:o,opacity:.5,strokeWidth:.5/r.scaleX,className:"grid-line"}),a&&r.scaleY>.1&&d.a.createElement("text",{x:5/r.scaleX-h,y:5/r.scaleX,alignmentBaseline:"hanging",fill:g,textAnchor:m,fontSize:Hn(r.scaleX)/r.scaleX,opacity:Vn(r.scaleX)},Math.round(u(t)),i))})))})),Zn=d.a.memo((function(t){var e=t.modelBackground,n=t.svgWidth,r=t.svgHeight,i=t.group_scale_transform,a=t.group_translate_transform,o=t.width,s=t.height,c=t.transformMatrix,u=t.showBounds,l=t.showGridLines,h=t.gridLinesUnit,f=t.showTicks,p="rgba(0,0,0,0.6)";return k()(e).luminance()<.5&&(p="white"),d.a.createElement("svg",{className:"guides-svg",width:n,height:r},d.a.createElement("g",{transform:a},d.a.createElement("g",{transform:i},d.a.createElement("g",{className:"guides"},u&&d.a.createElement("rect",{width:o,height:s,className:"model-bounds",stroke:p,strokeWidth:1/c.scaleX}),l&&d.a.createElement(Jn,{width:o,height:s,transformMatrix:c,gridLinesUnit:h,showTicks:f,gridColor:p})))))})),Qn=function(t){var e=t.mouseDownPoint,n=t.mouseSelect,r=ht.min([e.x,n.x]),i=ht.min([e.y,n.y]),a=Math.abs(e.x-n.x),o=Math.abs(e.y-n.y);return d.a.createElement("rect",{className:"select-box",x:r,y:i,width:a,height:o})};function Kn(t){var e=t.scaleX,n=void 0===e?1:e,r=t.scaleY,i=void 0===r?1:r,a=t.translateX,o=void 0===a?0:a,s=t.translateY,c=void 0===s?0:s,u=t.skewX,l=void 0===u?0:u,h=t.skewY;return{scaleX:n,scaleY:i,translateX:o,translateY:c,skewX:l,skewY:void 0===h?0:h}}function $n(t,e){var n=e.x,r=e.y;return function(t,e){var n=e.x,r=e.y;return{x:t.scaleX*n+t.skewX*r+t.translateX,y:t.skewY*n+t.scaleY*r+t.translateY}}(function(t){var e=t.scaleX,n=t.scaleY,r=t.translateX,i=t.translateY,a=t.skewX,o=t.skewY,s=e*n-o*a;return{scaleX:n/s,scaleY:e/s,translateX:(n*r-a*i)/-s,translateY:(o*r-e*i)/s,skewX:a/-s,skewY:o/-s}}(t),{x:n,y:r})}function tr(t){return Kn({scaleX:ht.get(t,"scaleX",void 0),scaleY:ht.get(t,"scaleY",void 0)})}function er(t){return Kn({translateX:ht.get(t,"translateX",void 0),translateY:ht.get(t,"translateY",void 0)})}function nr(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function rr(t){switch(t.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return t[0];case 2:return nr(t[0],t[1]);default:var e=t[0],n=t[1],r=ht.drop(t,2);return rr([nr(e,n)].concat(r))}}var ir=1;function ar(t,e,n,r){if(!n.includes("Space")){var i=-1/300;n.includes("Control")&&(i=-1/300);var a=t.getMouseCoords(e),o=t.state.transformMatrix,s=ht.clamp(1+e.deltaY*i,.1,5);r.includes(o.scaleX)&&(s=r[0]===o.scaleX?ht.clamp(s,1,10):ht.clamp(s,0,1));var c=s,u=$n(o,a),l=rr([o,er({translateX:u.x,translateY:u.y}),tr({scaleX:s,scaleY:c}),er({translateX:-u.x,translateY:-u.y})]);l.scaleX=ht.clamp(l.scaleX,r[0],r[1]),l.scaleY=ht.clamp(l.scaleY,r[0],r[1]),t.setState({transformMatrix:l})}}var or=(new Option).style;var sr=window.navigator.userAgent,cr=!!sr.match(/iPad/i)||!!sr.match(/iPhone/i),ur=!!sr.match(/WebKit/i),lr=(cr&&ur&&sr.match(/CriOS/i),0),hr=[];Wn((function(t){return hr=t}));var fr=[],dr=[],pr=d.a.createContext("frame");function mr(t){return fr[t.frameID].animation_frame>=t.startFrame&&fr[t.frameID].animation_frame<=t.endFrame&&t.render}var gr=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).getMouseCoords=function(t){if(null!==r.svgRef.current){var e=r.svgRef.current.getBoundingClientRect();return{x:Math.round(t.pageX-e.left-window.scrollX),y:Math.round(t.pageY-e.top-window.scrollY)}}return!1},lr+=1,r.svgRef=d.a.createRef(),r.designerRef=d.a.createRef(),r.state={modelHasUpdated:!1,frameSelected:!1,frameInFocus:!1,render:!1,startFrame:0,endFrame:5,renderScaling:"screen",frameHasSaved:!1,frameMouseMoveCounter:0,keysPressedCounter:0,keysPressed:[],mouseDown:!1,mouse_select:!1,draggingSelection:!1,containerRendered:!1,editingPoint:!1,modelSpaceMouseCoords:{x:0,y:0},windowResizeIncrement:0,panStart:{x:0,y:0},frameID:"frame-id-".concat(lr),svgID:"svg-id-".concat(lr),canvasID:"canvas-2d-id-".concat(lr),transformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},svgWheelBlocked:!1},zn.initialize(),r.playModel=r.playModel.bind(Object(a.a)(r)),r.pauseModel=r.pauseModel.bind(Object(a.a)(r)),r.rewindModel=r.rewindModel.bind(Object(a.a)(r)),r.renderModel=r.renderModel.bind(Object(a.a)(r)),r.setStartFrame=r.setStartFrame.bind(Object(a.a)(r)),r.setEndFrame=r.setEndFrame.bind(Object(a.a)(r)),r.svgOnMouseDown=r.svgOnMouseDown.bind(Object(a.a)(r)),r.svgOnMouseUp=r.svgOnMouseUp.bind(Object(a.a)(r)),r.svgOnWheel=r.svgOnWheel.bind(Object(a.a)(r)),r.fitToFrame=r.fitToFrame.bind(Object(a.a)(r)),r.moveToZero=r.moveToZero.bind(Object(a.a)(r)),r.setEditingPoint=r.setEditingPoint.bind(Object(a.a)(r)),r.startDraggingSelection=r.startDraggingSelection.bind(Object(a.a)(r)),r.callUpdateParameters=r.callUpdateParameters.bind(Object(a.a)(r)),r.setRenderScaling=r.setRenderScaling.bind(Object(a.a)(r)),r.initializeHammerJs=r.initializeHammerJs.bind(Object(a.a)(r)),r.onTouchStart=r.onTouchStart.bind(Object(a.a)(r)),r.onTouchEnd=r.onTouchEnd.bind(Object(a.a)(r)),r}return Object(c.a)(n,[{key:"sizing",value:function(){return function(t,e,n,r){var i=t.svgPadding,a=t.model.size,o=t.width,s=t.height,c=t.scaleToContainer,u=a.width/a.height,l=o/s;if(null!==r.current){var h={width:r.current.getBoundingClientRect().width,height:r.current.getBoundingClientRect().height};c&&e.containerRendered&&h.width<o&&(s=(o=h.width)*l),t.fitInContainer&&t.maintainAspectRatio&&(o=(s=t.height)/u)}return e.render&&n.exportResolution?n.exportResolution:{width:o-2*i,height:s-2*i*(l=s/o)}}(this.props,this.state,fr[this.state.frameID],this.designerRef)}},{key:"componentDidMount",value:function(){var t=this;if(fr[this.state.frameID]=this.props.model,void 0!==this.props.model){if(dr[this.state.frameID]=this.props.model.displayGeometries(),this.props.parameters&&fr[this.state.frameID].setGeometries(this.props.parameters),this.props.updateParameters){var e=fr[this.state.frameID].extractModel();this.props.updateParameters(e)}this.setState({containerRendered:!1}),document.addEventListener("mousemove",(function(e){t.mouseMove(e)})),document.addEventListener("keydown",(function(){setTimeout(function(){this.setState({keysPressedCounter:this.state.keysPressedCounter+1,keysPressed:hr}),this.modelDispatch({type:X,payload:hr})}.bind(t),1)})),document.addEventListener("keyup",(function(){setTimeout(function(){this.setState({keysPressedCounter:this.state.keysPressedCounter+1,keysPressed:hr}),this.modelDispatch({type:X,payload:hr})}.bind(t),1)})),document.addEventListener("mouseup",(function(e){0===e.button&&(t.setState({mouseDown:!1}),fr[t.state.frameID].draggingAPoint&&t.modelDispatch({type:V}))})),window.addEventListener("resize",(function(){t.setState({zoom:t.props.height/t.props.model.size.height,windowResizeIncrement:t.state.windowResizeIncrement+1})})),window.addEventListener("wheel",(function(t){t.ctrlKey&&t.preventDefault()}),{passive:!1}),this.props.model.animated&&this.props.model.playing&&setTimeout(function(){this.animateModel()}.bind(this),10),this.props.model.autoplay&&setTimeout(function(){this.playModel()}.bind(this),10),setTimeout(function(){this.setState({containerRendered:!0}),this.fitToFrame();var t=this.sizing();this.props.sizeCallback(t)}.bind(this),10),setTimeout(function(){this.initializeHammerJs()}.bind(this),10)}else console.log("model is undefined")}},{key:"initializeHammerJs",value:function(){var t=this;ht.isNull(this.designerRef)||ht.isUndefined(this.designerRef)?setTimeout(function(){this.initializeHammerJs()}.bind(this),100+500*Math.random()):(this.hammertime=new N.a(this.designerRef.current),this.hammertime.get("pinch").set({enable:!0}),this.hammertime.on("pinch",(function(e){!function(t,e){var n=t.center,r=e.state.transformMatrix,i=t.scale,a=1+_.clamp(i-ir,-.1,.1);t.velocityX+t.velocityY>.1&&(a=1);var o=a,s=$n(r,n),c=8*t.velocityX/r.scaleX,u=8*t.velocityY/r.scaleX;ir=i;var l=rr([r,er({translateX:s.x,translateY:s.y}),tr({scaleX:a,scaleY:o}),er({translateX:-s.x+c,translateY:-s.y+u})]);e.setState({transformMatrix:l})}(e,t)})))}},{key:"onTouchStart",value:function(t){ir=1}},{key:"onTouchEnd",value:function(t){ir=1}},{key:"fitToFrame",value:function(){!function(t){var e=t.props.height/t.props.model.size.height,n=t.props.width/t.props.model.size.width,r=ht.min([e,n]),i=t.props.width/t.props.height,a=t.props.model.size,o=0,s=0;i!==a.width/a.height&&(o=t.props.width/r*.5-.5*a.width,s=t.props.height/r*.5-.5*a.height),t.setState({transformMatrix:Object(h.a)(Object(h.a)({},t.state.transformMatrix),{},{scaleX:r,scaleY:r,translateX:o*r,translateY:s*r})}),setTimeout((function(){t.setState({windowResizeIncrement:t.state.windowResizeIncrement+1})}))}(this)}},{key:"moveToZero",value:function(){var t=this;this.setState({transformMatrix:Object(h.a)(Object(h.a)({},this.state.transformMatrix),{},{translateX:0,translateY:0})}),setTimeout((function(){t.setState({windowResizeIncrement:t.state.windowResizeIncrement+1})}))}},{key:"animateModel",value:function(){var t=this,e=this.props.animationFps;if(mr(this.state)&&(e=this.props.renderFps),fr[this.state.frameID].playing)if(mr(this.state)){if("SVG"===this.props.renderType);else if("CANVAS"===this.props.renderType){var n=document.getElementById(this.state.canvasID);"model"===this.state.renderScaling&&(n=document.getElementById("model-scale-render-canvas-".concat(this.state.canvasID)));var r="".concat(fr[this.state.frameID].name,"-frame-").concat(String(fr[this.state.frameID].animation_frame).padStart(6,"0"));n.toBlob((function(n){le(n,r,(function(){t.modelDispatch({type:rt}),setTimeout(function(){this.animateModel()}.bind(t),e)}))}))}}else this.state.render&&fr[this.state.frameID].animation_frame>this.state.endFrame?this.pauseModel():(this.modelDispatch({type:rt}),setTimeout(function(){this.animateModel()}.bind(this),e))}},{key:"modelDispatch",value:function(t){this.props.logModelDispatch&&console.log(t);var e=t.type===V&&fr[this.state.frameID].draggingAPoint;t.type===ut&&(e=!0),$t(fr[this.state.frameID],t,this.props.actionsCallback);try{this.state.frameMouseMoveCounter%this.props.procedureUpdateIntervalOnMouseMove===0?(fr[this.state.frameID]=Ct(fr[this.state.frameID],t),dr[this.state.frameID]=fr[this.state.frameID].displayGeometries(),this.setState({frameMouseMoveCounter:this.state.frameMouseMoveCounter+1})):(fr[this.state.frameID]=Ct(fr[this.state.frameID],t),this.setState({frameMouseMoveCounter:this.state.frameMouseMoveCounter+1})),this.props.logModelState&&console.log(fr[this.state.frameID]),t.type!==W&&zn.event("model dispatch: ".concat(t.type),"Frame",fr[this.state.frameID].name)}catch(n){}e&&this.callUpdateParameters()}},{key:"callUpdateParameters",value:function(){if(this.props.updateParameters)try{var t=fr[this.state.frameID].extractModel();this.props.updateParameters(t)}catch(e){}}},{key:"playModel",value:function(){fr[this.state.frameID].animated?fr[this.state.frameID].playing?console.log("model is already playing"):(this.modelDispatch({type:it}),setTimeout(function(){this.animateModel()}.bind(this),10)):console.log("model is not animated")}},{key:"pauseModel",value:function(){this.setState({render:!1}),this.modelDispatch({type:at})}},{key:"rewindModel",value:function(){this.setState({render:!1}),this.modelDispatch({type:ot})}},{key:"renderModel",value:function(){fr[this.state.frameID].animation_frame<this.state.startFrame&&this.modelDispatch({type:st,payload:parseInt(this.state.startFrame)}),this.setState({render:!0}),this.playModel()}},{key:"setStartFrame",value:function(t){this.setState({startFrame:t})}},{key:"setEndFrame",value:function(t){this.setState({endFrame:t})}},{key:"setRenderScaling",value:function(t){this.setState({renderScaling:t})}},{key:"mouseMove",value:function(t){!function(t,e,n,r){var i=t.getMouseCoords(e),a=n[t.state.frameID],o=t.state.transformMatrix;if(i&&t.state.frameInFocus)if(t.props.logMouseMove&&console.log(i),r.includes("Space"))t.state.mouseDown&&t.setState({transformMatrix:Object(h.a)(Object(h.a)({},t.state.transformMatrix),{},{translateX:t.state.panStart.x+i.x-t.state.mouseDownPoint.x,translateY:t.state.panStart.y+i.y-t.state.mouseDownPoint.y})});else if(t.state.mouseDown){var s=t.state.mouse_select;if(t.state.draggingSelection){var c={x:(s.x-o.translateX)/o.scaleX,y:(s.y-o.translateY)/o.scaleY},u={x:(i.x-o.translateX)/o.scaleX,y:(i.y-o.translateY)/o.scaleY},l=u.x-c.x,f=u.y-c.y;isNaN(l)||isNaN(f)||!t.props.editable||t.modelDispatch({type:et,payload:{dx:l,dy:f}})}t.setState({mouse_select:i})}else t.props.editable&&(t.modelDispatch({type:W,payload:{x:_.clamp((i.x-o.translateX)/o.scaleX,0,a.size.width),y:_.clamp((i.y-o.translateY)/o.scaleY,0,a.size.height),model:a,mouseDown:t.state.mouseDown}}),t.setState({modelSpaceMouseCoords:{x:_.clamp((i.x-o.translateX)/o.scaleX,0,a.size.width),y:_.clamp((i.y-o.translateY)/o.scaleY,0,a.size.height)}}))}(this,t,fr,hr)}},{key:"svgOnMouseUp",value:function(t){!function(t,e,n,r){var i=t.getMouseCoords(e),a=t.state.mouseDownPoint,o=r.includes("Space");if(0===e.button){var s=t.state.transformMatrix,c=n[t.state.frameID],u={x:_.clamp((i.x-s.translateX)/s.scaleX,0,c.size.width),y:_.clamp((i.y-s.translateY)/s.scaleY,0,c.size.height)};if(a){if(t.state.draggingSelection&&t.callUpdateParameters(),Math.abs(i.x-a.x)<3&&Math.abs(i.y-a.y)<3)t.props.onClickCallback&&!1===n[t.state.frameID].selectedPoints&&(t.props.onClickCallback(u),_.isFunction(n[t.state.frameID].onPointerDownCallback)&&n[t.state.frameID].onPointerDownCallback(n[t.state.frameID],u)),t.setState({draggingSelection:!1}),t.modelDispatch({type:nt});else if(!1===t.state.draggingSelection&&!c.draggingAPoint){var l={x:_.clamp((a.x-s.translateX)/s.scaleX,0,c.size.width),y:_.clamp((a.y-s.translateY)/s.scaleY,0,c.size.height)},h=new gn(l,u);c.getEditablePointsInRectangle(h).length>0&&!1===c.draggingAPoint&&!o?t.modelDispatch({type:K,payload:h}):t.modelDispatch({type:nt})}}else t.state.draggingSelection&&(t.modelDispatch({type:nt}),t.setState({draggingSelection:!1}));t.setState({mouseDown:!1,mouse_select:!1}),c.draggingAPoint&&t.modelDispatch({type:V})}}(this,t,fr,hr)}},{key:"getAlgorithmScaling",value:function(){return{x:this.state.zoom,y:this.state.zoom}}},{key:"svgOnMouseDown",value:function(t){var e=hr.includes("Space");if("svg"===t.target.nodeName&&0===t.button){var n=this.getMouseCoords(t);n&&(e?this.setState({mouseDown:!0,panStart:{x:this.state.transformMatrix.translateX,y:this.state.transformMatrix.translateY},mouseDownPoint:n}):(this.setState({mouseDown:!0,mouseDownPoint:n}),this.modelDispatch({type:Q}))),t.preventDefault()}}},{key:"startDraggingSelection",value:function(t){var e=this.getMouseCoords(t);this.setState({mouseDown:!0,mouseDownPoint:e,draggingSelection:!0})}},{key:"setEditingPoint",value:function(t){this.setState({editingPoint:t})}},{key:"blocksvgWheelEvent",value:function(){!1===this.state.svgWheelBlocked&&void 0!==this.svgRef.current&&(this.svgRef.current.addEventListener("wheel",function(t){ar(this,t,hr,this.props.zoomDomain),t.preventDefault()}.bind(this)),this.setState({svgWheelBlocked:!0}))}},{key:"svgOnWheel",value:function(t){this.blocksvgWheelEvent(),ar(this,t,hr,this.props.zoomDomain)}},{key:"render",value:function(){var t=this;if(!fr[this.state.frameID])return d.a.createElement("div",null);var e=hr.includes("Space"),n=this.props.fromParameters?this.props.model:fr[this.state.frameID],r=!1;if(this.state.editingPoint){var i=ht.get(this.state,"editingPoint.geometry_key",!1);i&&(r=ht.find(n.geometries[i].points,(function(e){return e.id===t.state.editingPoint.point_id})))}var a=this.sizing(),o={x:this.state.transformMatrix.scaleX,y:this.state.transformMatrix.scaleY},s=[],c=[];try{s=n.editableGeometries(),!1===n.editableGeometriesVisible&&(s=[]),c=n.staticGeometries()}catch(b){console.log(b)}var u=ht.flatten(dr[this.state.frameID]),l=d.a.createElement("div",null),f="scale(".concat(o.x,", ").concat(o.y,")"),p={opacity:1,zIndex:2,position:"relative",cursor:n.cursor};this.state.keysPressed.includes("Control")&&(p.cursor="zoom-in"),e&&(p.cursor="grab");var m,g="translate(".concat(this.state.transformMatrix.translateX,", ").concat(this.state.transformMatrix.translateY,")"),y="rgba(255,255,255, 0)";"transparent"===n.background?y="rgba(255,255,255, 0)":(m=n.background,ht.isString(m)&&0!==m.length&&(or.color="",or.color=m,or.color.length>0)&&(y=n.background));var v={opacity:1,position:"absolute",background:y,top:this.props.svgPadding,zIndex:1,pointerEvents:"none"},x={padding:this.props.svgPadding,background:y};return!1===this.state.containerRendered&&(p={opacity:0},v.opacity=0),d.a.createElement("div",{style:{},className:"hyperobject-frame"},n.procedureErrors.length>0?d.a.createElement("div",{className:"procedure-errors-box"},d.a.createElement("p",null,"Model contains procedure errors:"),n.procedureErrors.map((function(t,e){return d.a.createElement("div",{key:e,className:"procedure-error"},d.a.createElement("p",null,t.message," ",d.a.createElement("span",{style:{color:"yellow"}},":",t.lineNumber)))}))):null,d.a.createElement(pr.Provider,{value:{startDraggingSelection:this.startDraggingSelection}},d.a.createElement(Mt.Provider,{value:n},d.a.createElement(se,{model:n,frame:this,editableGeometries:s,displayGeometries:u}),this.props.showZoomControls&&d.a.createElement(ce,{fitToFrame:this.fitToFrame,moveToZero:this.moveToZero}),this.props.vectorExportMenu&&d.a.createElement(ue,null),this.props.showInputsByDefault&&n.inputsList.length>0&&d.a.createElement(Kt,{modelDispatch:this.modelDispatch.bind(this)}),l,this.state.frameInFocus&&d.a.createElement("div",{style:{position:"absolute",zIndex:100,cursor:"pointer",opacity:.5,top:5,right:5,background:"rgb(245,245,245)",borderRadius:4,padding:5,pointerEvents:"auto"},onClick:function(){Un()}},"Frame focussed"),2===n.dimensions?d.a.createElement("div",{className:"svg-container",style:{padding:this.props.svgPadding,background:y},onClick:function(){t.setState({frameInFocus:!0})},onPointerEnter:function(){t.blocksvgWheelEvent(),t.setState({frameInFocus:!0}),Wn((function(t){return hr=t}),{blockSpace:!0})},onPointerLeave:function(){t.setState({frameInFocus:!1}),t.modelDispatch({type:W,payload:{x:!1,y:!1,model:n,mouseDown:t.state.mouseDown}}),hr=[],Wn((function(t){return hr=t}),{blockSpace:!1})}},r&&d.a.createElement(Rn,{editPoint:r,setEditingPoint:this.setEditingPoint,transformMatrix:this.state.transformMatrix,modelDispatch:this.modelDispatch.bind(this),callUpdateParameters:this.callUpdateParameters}),d.a.createElement("div",{ref:this.designerRef,style:{overflow:"hidden"},onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},d.a.createElement(Zn,{svgWidth:this.props.width,svgHeight:a.height,group_scale_transform:f,group_translate_transform:g,width:n.size.width,height:n.size.height,transformMatrix:this.state.transformMatrix,showBounds:this.props.showBounds,showGridLines:this.props.showGridLines&&n.showGuides,showTicks:n.showGuideTickLabels,gridLinesUnit:n.unit,modelBackground:y}),d.a.createElement("svg",{id:this.state.svgID,version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",style:p,ref:this.svgRef,onMouseDown:this.svgOnMouseDown,onTouchEnd:this.svgOnTouchEnd,onMouseUp:this.svgOnMouseUp,onWheel:this.svgOnWheel,width:this.props.width,height:a.height},this.state.mouse_select&&!this.state.draggingSelection&&d.a.createElement(Qn,{mouseDownPoint:this.state.mouseDownPoint,mouseSelect:this.state.mouse_select}),d.a.createElement("g",{transform:g},d.a.createElement("g",{transform:f},"SVG"===this.props.renderType?d.a.createElement("g",{className:"display-geometries"},u.map((function(e,r){return d.a.createElement(Jt,{key:r,geometry:Object(h.a)(Object(h.a)({},e),{},{editable:!1}),scaling:o,onGeometryClickCallback:t.props.onGeometryClickCallback,onPointClickCallback:t.props.onPointClickCallback,selectingPoints:n.selectingPoints})}))):null,d.a.createElement("g",{className:"editable-geometries"},s.map((function(e){return void 0!==e&&e.visibility?d.a.createElement(Jt,{scaling:o,modelDispatch:t.modelDispatch.bind(t),setEditingPoint:t.setEditingPoint,key:e.id,onGeometryClickCallback:t.props.onGeometryClickCallback,onPointClickCallback:t.props.onPointClickCallback,geometry:Object(h.a)(Object(h.a)({},e),{},{editable:t.props.editable}),showPointCoordinates:t.props.showPointCoordinates,selectingPoints:n.selectingPoints,startDraggingSelection:t.startDraggingSelection,modelHasUpdated:t.props.modelHasUpdated,modelSpaceMouseCoords:t.state.modelSpaceMouseCoords}):null})))))),"CANVAS"===this.props.renderType?d.a.createElement("div",{style:v},d.a.createElement(On,{model:n,shouldRenderFrame:mr(this.state),editable:this.props.editable,animated:n.animated,playing:n.playing,canvasID:this.state.canvasID,background:y,width:this.props.width,height:a.height,renderScaling:this.state.renderScaling,transformMatrix:this.state.transformMatrix,geometries:c.concat(u)})):null)):null,3===n.dimensions?d.a.createElement("div",{style:x},d.a.createElement(Tn,{width:a.width,height:a.height,editableGeometries:s,displayGeometries:c.concat(u),canvasID:this.props.canvasID,backgroundColor:y})):null)),this.state.render?d.a.createElement(Ln,{size:a,state:this.state,model:fr[this.state.frameID]}):null,d.a.createElement("style",null,"@font-face {\n            font-family: 'custom-monospace';\n            src: url(fonts/monospace.ttf);\n          }\n          ".concat(Wt.map((function(t){return'\n            @font-face {\n              font-family: "'.concat(t.name,'";\n              src: url(').concat(t.file,");\n            }\n            ")})).join(""))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.modelHasUpdated?(fr[e.frameID]=t.model,dr[e.frameID]=t.model.displayGeometries(),Object(h.a)(Object(h.a)({},e),{},{modelHasUpdated:!0})):Object(h.a)(Object(h.a)({},e),{},{modelHasUpdated:!1})}}]),n}(f.Component);gr.defaultProps={svgID:"svg-id-".concat(lr),canvasID:"canvas-id-".concat(lr),width:200,height:200,fitInContainer:!0,maintainAspectRatio:!0,updateZoomOnResize:!0,fromParameters:!1,updateParameters:!1,maintainCameraPosition:!1,sizeCallback:function(){},onClickCallback:function(){},onPointClickCallback:!1,onGeometryClickCallback:!1,actionsCallback:function(){},editable:!1,animationControls:!1,renderControls:!1,exportControls:!1,exportTypes:!1,vectorExportMenu:!1,svgPadding:0,scaleToContainer:!1,showProcedureErrors:!1,renderType:"CANVAS",showInputsByDefault:!0,logModelDispatch:!1,logModelState:!1,logMouseMove:!1,showBounds:!1,showGridLines:!1,gridLinesUnit:"mm",showZoomControls:!1,showPointCoordinates:!1,procedureUpdateIntervalOnMouseMove:1,animationFps:1e3/60,renderFps:1e3/30,zoomDomain:[.05,20]};var yr=Object(G.a)();function vr(t){return"'"+t+"'"}var xr=0;var br={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easeOutElastic:function(t){return Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}};function wr(t,e,n,r,i,a){if(n<e)return"end frame is smaller than start frame";var o,s,c,u=i-r;return r+t((c=1,(o=(a-e)/(n-e))<=(s=0)?s:o>=c?c:o))*u}B.a.extend(Y.a);var _r=gr,jr=function(t,e){var n=this,r="SET MODEL NAME",i=["default-model-class"];void 0!==t?r=t:console.warn("No model name provided");var a=new ln(r);if(void 0!==e)if(e.isArray){var o=!0;e.forEach((function(t){ht.isString(t)||(o=!1)})),o?i=e:console.warn("Not all classes are an array")}else ht.isString(e)?i=[e]:console.warn("provide either an array of strings, or a string value as second parameter");this.name=r,this.cssClasses=i,this.size={width:1e3,height:1e3,depth:0},this.exportResolution=!1,this.center=function(){return{x:this.size.width/2,y:this.size.height/2,z:this.size.depth/2}},this.dimensions=2,this.background="transparent",this.animation_frame=0,this.animated=!1,this.playing=!1,this.autoplay=!1,this.loopAnimation=!1,this.startFrame=0,this.endFrame=100,this.workspaceFramePadding=50,this.draggingAPoint=!1,this.editingPoint=!1,this.selectingPoints=!1,this.selectedPoints=!1,this.focussed=!1,this.listenToMouseMove=!1,this.mousePosition={x:0,y:0},this.unit="mm",this.showGuides=!0,this.showGuideTickLabels=!0,this.cursor="initial",this.geometries={},this.procedures={},this.editableGeometriesList=[],this.staticGeometriesList=[],this.displayGeometriesList=[],this.proceduresList=[],this.animations={},this.animationsList=[],this.views={},this.viewsList=[],this.exportAll=!1,this.imageExportScaling=1,this.gcode=a,this.procedureErrors=[],this.keysPressed=[],this.onPointerDownCallback=function(){},this.generators={path:He,group:$e},this.setSize=function(t){return this.size=Object(h.a)(Object(h.a)({},this.size),{},{width:t.width,height:t.height}),this},this.setBackground=function(t){!function(t){var e=(new Option).style;return e.color=t,e.color==t}(t)?this.background="transparent":this.background=t},this.aspectRatio=function(){return n.size.height/n.size.width},this.sourceGeometriesAsArray=function(){var t=[];for(var e in this.geometries)t.push(this.geometries[e]);return t},this._displayGeometriesCache=[],this._processingProcedures=!1,this.displayGeometries=function(){var t=this;return!1===this._processingProcedures&&(this._processingProcedures=!0,this.procedureErrors=[],this._displayGeometriesCache=this.proceduresList.map((function(e){try{return t.procedures[e](t)}catch(n){return t.procedureErrors.push(n),!1}})).filter((function(t){return void 0!==t||null===t})),this._processingProcedures=!1),this._displayGeometriesCache},this.setGeometries=function(t){for(var e in this.geometries={},t){switch(t[e].type){case dt:this.geometries[e]=new $e(t[e].points,t[e].name,t[e]),this.geometries[e].connectPoints();break;case mt:this.geometries[e]=new He(t[e].points,t[e].name,t[e]),this.geometries[e].connectPoints();break;case yt:this.geometries[e]=new tn(t[e].text,t[e].point,t[e].name)}this.geometries[e].key=e}},this.extractGeometries=function(){var t={};for(var e in this.geometries)t[e]=this.geometries[e].extract();return t},this.extractProcedures=function(){var t={};for(var e in this.procedures)t[e]=this.procedures[e].toString();return t},this.extractModel=function(){return{geometries:this.extractGeometries(),editableGeometriesList:this.editableGeometriesList,procedures:this.extractProcedures(),inputs:this.extractInputs(),size:this.size}},this.importModel=function(t){this.setGeometries(t.geometries);var e=ht.get(t,"editableGeometriesList",!1);!1===e&&(e=ht.keys(t.geometries)),this.editableGeometriesList=e,this.inputs=ht.get(t,"inputs",{}),this.inputsList=ht.keys(t.inputs),this.importProcedures(t.procedures),this.size=ht.get(t,"size",{width:1e3,height:1e3,depth:0})},this.importProcedures=function(t){var e={};for(var n in t){var r=t[n];if(ht.isFunction(r))e[n]=r;else if(ht.isString(r)){var i=ht.trim(t[n]);i=i.startsWith("function (self)")?ht.trimStart(i,"function (self)"):ht.trimStart(i,"self =>");try{i=ht.trim(i),i=ht.trimStart(i,"{"),i=ht.trimEnd(i,"}"),i=ht.replace(i,"lodash__WEBPACK_IMPORTED_MODULE_3___default.a","_"),i=ht.replace(i,'hyperobjects_language__WEBPACK_IMPORTED_MODULE_2__["Path"]',"Path"),e[n]=new Function("self",i)}catch(a){console.warn("error importing fn string: ",i),console.log(a)}}else e[n]=function(){return console.log("Unknown function type provided"),[]}}this.procedures=e,this.proceduresList=ht.keys(this.procedures)},this.staticGeometries=function(){var t=this;return this.staticGeometriesList.map((function(e){return t.geometries[e]}))},this.addEditableGeometry=function(t,e,n){e.key=t,this.geometries[t]=e,this.editableGeometriesList.push(t)},this.addStaticGeometry=function(t,e,n){e.key=t,this.geometries[t]=e,this.staticGeometriesList.push(t)},this.inputs={},this.inputsList=[],this.extractInputs=function(){return this.inputs},this.addInput=function(t,e){ht.isString(t)&&[jt,Ot].includes(ht.get(e,"type",!1))&&(this.inputs[t]=e,this.inputsList.push(t))},this.addProcedure=function(t,e,n){this.procedures[t]=e,"before"===n?this.proceduresList.unshift(t):this.proceduresList.push(t)},this.editableGeometries=function(){var t=this;return this.editableGeometriesList.map((function(e){return t.geometries[e].key=e,t.geometries[e]}))},this.getGeometries=function(t){t&&(this.animation_frame=t);var e=[],n=[];try{e=this.editableGeometries(),!1===this.editableGeometriesVisible&&(e=[]),n=this.displayGeometries()}catch(r){console.log(r)}return{editableGeometries:e,displayGeometries:ht.flatten(n)}},this.addAnimation=function(t,e){this.animations[t]=e,this.animationsList.push(t)},this.runAnimations=function(){var t=this;this.animationsList.forEach((function(e){t.animations[e](t)}))},this.getEditablePointsInRectangle=function(t){return ht.flatten(this.editableGeometries().map((function(t){return ht.isFunction(t.points)?t.points():t.points}))).filter((function(e){return t.containsPoint(e)}))},this.updateGeometryValues=function(t){var e=this,n=ht.keys(t);this.editableGeometriesList.forEach((function(r){n.includes(r)&&(e.geometries[r].points=t[r].points)}))}},Or=$e,kr=be,Er=He,Cr=De,Pr=function(t,e,n){Ke.call(this,t,e,n),Ue.call(this),Ve.call(this),this.type=gt,this.points.length>2&&(this.points=this.points.slice(0,2)),this._showExtend=!0,this.showExtend=function(t){return this._showExtend=t,this},this.extendToBounds=function(t){var e=ht.get(this,"points[0]",!1),n=ht.get(this,"points[1]",!1);return ht.every([e,n])?[new be({x:e.x-1e4,y:e.y}).rotate(-e.getAngle(n)+.5*Math.PI,e),new be({x:e.x+1e4,y:e.y}).rotate(-e.getAngle(n)+.5*Math.PI,e)]:[new be({x:0,y:0}),new be({x:0,y:0})]},this.lineIntersect=function(t){return function(t,e,n,r,i,a,o,s){var c,u,l=(s-a)*(n-t)-(o-i)*(r-e);return 0==l?null:{x:t+(c=((o-i)*(e-a)-(s-a)*(t-i))/l)*(n-t),y:e+c*(r-e),seg1:c>=0&&c<=1,seg2:(u=((n-t)*(e-a)-(r-e)*(t-i))/l)>=0&&u<=1}}(this.points[0].x,this.points[0].y,this.points[1].x,this.points[1].y,t.points[0].x,t.points[0].y,t.points[1].x,t.points[1].y)},this.angleToLine=function(t){if(2!==this.points.length)return 0;if(2!==t.points.length)return 0;var e=this.points[0].x,n=this.points[0].y,r=this.points[1].x,i=this.points[1].y,a=t.points[0].x,o=t.points[0].y,s=r-e,c=i-n,u=t.points[1].x-a,l=t.points[1].y-o,h=Math.atan2(s*l-c*u,s*u+c*l);return h<0&&(h*=-1),h}},Sr=tn,Ir=pn,Mr=mn,Dr=function(t,e){return new He([{x:t.x,y:t.y},{x:e.x,y:t.y},{x:e.x,y:e.y},{x:t.x,y:e.y}]).closed(!0)},Ar=function(t,e,n,r){var i=n+1;return void 0!==r&&(i=r),new He(ht.range(i).map((function(r){return{x:t.x+Math.cos(r/n*Math.PI*2)*e,y:t.y+Math.sin(r/n*Math.PI*2)*e}}))).closed(!0)},Tr=function(t,e,n){for(var r=.875,i=e/(n*r),a=t/(n*r),o=[],s=0;s<i;s++)for(var c=0;c<a;c++){var u=0;u=c%2===0?s*n+.5*n:s*n,o.push({x:u,y:c*n*r})}return o},Lr=yr,Rr=function(t,e){xr+=1;var n="temp-name";return e&&e.name&&(n=e.name),{id:xr,script:"\n  var Model = window.HYPEROBJECTS.Model\n  var Input = window.HYPEROBJECTS.Input\n  var InputText = window.HYPEROBJECTS.InputText\n  \n  var Point = window.HYPEROBJECTS.Point\n  var Group = window.HYPEROBJECTS.Group\n  var Path = window.HYPEROBJECTS.Path\n  var Segment = window.HYPEROBJECTS.Segment\n  var Line = window.HYPEROBJECTS.Line\n  var Text = window.HYPEROBJECTS.Text\n  var Rectangle = window.HYPEROBJECTS.shapes.Rectangle\n  var Circle = window.HYPEROBJECTS.shapes.Circle\n  var Voronoi = window.HYPEROBJECTS.shapes.Voronoi\n  var HexPattern = window.HYPEROBJECTS.shapes.HexPattern\n  var _ = window.HYPEROBJECTS.lodash\n  var animate = window.HYPEROBJECTS.animate\n  var EasingFunctions = window.HYPEROBJECTS.EasingFunctions\n\n  var ogl = window.HYPEROBJECTS.EXTRA_LIBRARIES.ogl\n  var chroma = window.HYPEROBJECTS.EXTRA_LIBRARIES.chroma\n  var d3 = window.HYPEROBJECTS.EXTRA_LIBRARIES.d3\n  var saveAs = window.HYPEROBJECTS.EXTRA_LIBRARIES.saveAs\n  var dayjs = window.HYPEROBJECTS.EXTRA_LIBRARIES.dayjs\n\n  var model = new Model(".concat(vr(n),",").concat(vr("hello"),")\n\n  model.setSize({\n    width: 1000,\n    height: 1000\n  })\n  try {\n    ").concat(t,"\n  } catch(err) {\n    window.EDITOR_ERROR = {\n      description: err.message,\n      lineNumber: 0\n    }\n  }\n  window.OUTPUTMODEL").concat(xr," = model\n  ")}},zr=function(t){for(var e=document.getElementsByClassName("dynamic-script-element");e.length>0;)e[0].parentNode.removeChild(e[0]);var n=document.createElement("script"),r=t;return n.innerHTML=r.script,n.className="dynamic-script-element",document.getElementsByTagName("body")[0].append(n),r.id},Nr=w.saveAs;function Gr(){window.HYPEROBJECTS={Model:jr,Group:Or,Path:Er,Segment:Cr,Line:Pr,Text:Sr,Point:kr,Input:Ir,InputText:Mr,shapes:{Rectangle:Dr,Circle:Ar,HexPattern:Tr,Voronoi:Lr},lodash:ht,animate:wr,EasingFunctions:br,EXTRA_LIBRARIES:{ogl:P,chroma:k.a,d3:p,saveAs:Nr,dayjs:B.a}}}}).call(this,n(90))},227:function(t,e){},299:function(t,e,n){},305:function(t,e,n){},337:function(t,e,n){},339:function(t,e,n){},341:function(t,e,n){"use strict";n.r(e);n(299);var r=n(0),i=n(68),a=n.n(i),o=n(78),s=n(33),c=n(271),u=n(1),l=function(){return Object(u.jsx)("div",{className:"main-page",children:"Main page"})},h=n(386),f=(n(305),n(242)),d=n(2),p=new d.g("quadratic");p.addEditableGeometry("quadratic-curve",new d.h([{x:100,y:100},{x:900,y:100,q:{x:500,y:800}}]));var m=new d.g("cubic");m.addEditableGeometry("cubic",new d.h([{x:100,y:500},{x:900,y:500,c:[{x:200,y:900},{x:800,y:100}]}]));var g=function(){return Object(u.jsxs)("div",{className:"curve-types-test",children:[Object(u.jsx)("h4",{children:"Quadratic curve"}),Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)(f.a,{value:"const points = [\n    {   x: 100, y: 100 },\n    {\n        x: 900, y: 100,\n        q: {\n            x: 500, y: 800\n        }\n    }\n]",width:500,height:500}),Object(u.jsx)(d.b,{model:p,width:500,height:500,editable:!0})]}),Object(u.jsx)("h4",{children:"Cubic curve"}),Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)(f.a,{value:"const points = [\n    {x: 100, y: 500},\n    {\n        x: 900, y: 500,\n        c: [\n            {x: 200, y: 900},\n            {x: 800, y: 100}\n        ]\n    }\n]",width:500,height:500}),Object(u.jsx)(d.b,{model:m,width:500,height:500,editable:!0})]})]})},y=n(21),v=n(345),x=n(266),b=n.n(x),w=new d.g("callback-test-model"),_=new d.c([{x:100,y:500},{x:200,y:400},{x:300,y:600}]).r(10);_.showBounds=!0,w.addEditableGeometry("test-points",_),w.addEditableGeometry("test-path",new d.h([{x:200,y:300},{x:400,y:200},{x:250,y:800}]).r(10)),w.addProcedure("output-path",(function(t){return new d.h([{x:500,y:100},{x:500,y:900}]).stroke("purple")}));var j=function(){var t=Object(r.useState)("select"),e=Object(y.a)(t,2),n=e[0],i=e[1],a=Object(r.useState)([]),o=Object(y.a)(a,2),s=o[0],c=o[1],l=function(t){console.log(t)},h=!1,f=!1;function p(t){var e=s.slice();e.push(t),c(e)}return"select"===n&&(l=function(t){console.log(t),p({point:t})},h=function(t){return p({geometry:t.extract()})},f=function(t,e,n){return p({geometry:t.extract(),point:e.extract(),pointIndex:n})}),console.log(s),Object(u.jsxs)("div",{className:"on-click-callbacks-test",children:[Object(u.jsx)("div",{style:{padding:50},children:Object(u.jsxs)(v.a.Group,{children:[Object(u.jsx)(v.a,{toggle:!0,active:"move"===n,onClick:function(){return i("move")},children:"Move"}),Object(u.jsx)(v.a,{toggle:!0,active:"select"===n,onClick:function(){return i("select")},children:"Select"})]})}),Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)(d.b,{model:w,editable:!0,width:800,height:800,onClickCallback:l,onGeometryClickCallback:h,onPointClickCallback:f,exportControls:!0}),Object(u.jsx)(b.a,{src:s,collapsed:!0})]})]})},O=n(66),k=new d.g("path display features"),E=new d.h([{x:100,y:100},{x:400,y:100,q:{x:500,y:200}},{x:400,y:800},{x:500,y:400,c:[{x:300,y:200},{x:800,y:500}]},{x:400,y:200}]);E.showSegmentLengthLabels=!0,k.addEditableGeometry("path",E);var C=function(t){return Object(O.a)(t),Object(u.jsx)("div",{className:"path-display-features-test",children:Object(u.jsx)(d.b,{model:k,width:800,height:800,editable:!0})})},P=new d.g,S=new d.h([{x:100,y:100,q:{x:500,y:500}},{x:600,y:500},{x:150,y:100,q:{x:50,y:900}}]).closed(!0);P.addEditableGeometry("path",S),P.addProcedure("flatten-path",(function(t){var e=t.geometries.path;return e.flattenPoints(),e._pointsFlattened.map((function(t){return new d.a(t,3,3)}))}));var I=function(){return Object(u.jsxs)("div",{className:"flatten-path-test",children:[Object(u.jsx)("h2",{children:"Flatten path"}),Object(u.jsx)("p",{children:"Call geometry.flattenPoints and the geometry._flattenedPoints array will be set. "}),Object(u.jsx)(d.b,{model:P,editable:!0,fitInContainer:!0,maintainAspectRatio:!0,width:1e3,height:1e3,showBounds:!0,showGridLines:!0,showZoomControls:!0})]})},M=new d.g("mirror-path-test");M.setSize({width:2e3,height:2e3}),M.addEditableGeometry("path",new d.h([{x:100,y:100},{x:900,y:100,c:[{x:150,y:150},{x:300,y:900}]},{x:700,y:900,q:{x:500,y:500}},{x:100,y:900}]).r(3).closed(!0)),M.addEditableGeometry("mirror-points",new d.c([{x:1e3,y:500},{x:1500,y:1e3}])),M.addProcedure("mirror",(function(t){var e=t.geometries.path.clone(),n=t.geometries["mirror-points"].points[0];return e.scale({x:-1,y:1},n).setShowSegmentLengthLabels(!0)})),M.addProcedure("mirror-two",(function(t){var e=t.procedures.mirror(t),n=t.geometries["mirror-points"].points[1];return e.scale({x:1,y:-1},n).setShowSegmentLengthLabels(!0)}));var D=function(){return Object(u.jsx)("div",{className:"mirror-path-test",children:Object(u.jsx)(d.b,{model:M,width:700,height:700,showBounds:!0,showGridLines:!0,showZoomControls:!0,maintainAspectRatio:!0,editable:!0})})},A=new d.g("reverse-path-test");A.addProcedure("test",(function(t){var e=[],n=new d.h([{x:100,y:100},{x:300,y:200,q:{x:200,y:300}},{x:500,y:100,c:[{x:300,y:500},{x:500,y:500}]},{x:700,y:150},{x:900,y:300}]).strokeWidth(3).stroke("rgb(240,100,0)");n.points.forEach((function(t,e){return t.label="p-".concat(e)})),e.push(n),n.points.forEach((function(t,n){e.push(new d.j("p-".concat(n),t,"p-".concat(n)))}));var r=n.clone().reverse().translate({x:0,y:300});return r.points.forEach((function(t,n){e.push(new d.j("p-".concat(n),t,"p-".concat(n)))})),e.push(r),e}));var T=function(){return Object(u.jsxs)("div",{className:"reverse-path-test",children:[Object(u.jsx)("p",{children:"Reverse path test"}),Object(u.jsx)(d.b,{model:A,width:700,height:700,showBounds:!0,showGridLines:!0,showZoomControls:!0,maintainAspectRatio:!0,editable:!0})]})},L=new d.g("path-contains-point-test");L.addEditableGeometry("point",new d.c([{x:500,y:500}])),L.setSize({width:2e3,height:1e3}),L.addEditableGeometry("path",new d.h([{x:100,y:100},{x:900,y:100},{x:900,y:500,c:[{x:500,y:200},{x:500,y:400}]},{x:100,y:900,q:{x:900,y:900}}]).closed(!0)),L.addProcedure("contains-test",(function(t){var e=t.geometries.point.points[0],n=t.geometries.path.clone().reverse();return!1===n.isClockwise()&&(n=n.reverse()),n.contains(e)?new d.a(e,30,10).stroke("green"):new d.a(e,20,10).stroke("red")}));var R=function(){return Object(u.jsxs)("div",{className:"path-contains-point-test",children:[Object(u.jsx)("p",{children:"Path contains point test"}),Object(u.jsx)(d.b,{model:L,width:800,height:400,showBounds:!0,showGridLines:!0,showZoomControls:!0,maintainAspectRatio:!0,editable:!0})]})},z=new d.g("styling-geometries-test");z.addEditableGeometry("source",new d.h([{x:200,y:200},{x:800,y:200}]).stroke("blue").strokeWidth(3).strokeDasharray(5)),z.addEditableGeometry("source-2",new d.h([{x:200,y:300},{x:800,y:300}]).stroke("blue").strokeWidth(3).strokeDasharray(" 10 10 50 30")),z.addEditableGeometry("source-3",new d.h([{x:200,y:400},{x:800,y:400}]).stroke("blue").strokeWidth(3)),z.addProcedure("source-1-test",(function(t){var e=t.geometries.source.copy();return[e.copy().translate({x:0,y:10}).stroke("rgb(200,200,200)"),e.copy().translate({x:0,y:20}).stroke("rgb(50,000,200)").strokeDasharray(20).strokeWidth(1),e.copy().translate({x:0,y:30}).stroke("rgb(200,0,0)").strokeDasharray(0).strokeWidth(5)]}));var N=function(){return Object(u.jsxs)("div",{className:"styling-geometries-test",children:[Object(u.jsx)("h2",{children:"Styling geometries"}),Object(u.jsx)("p",{children:"Testing applying styles to editable geometries and procedure output geometries."}),Object(u.jsx)("p",{children:"Testing both as editable geometries are rendered to SVG while generated geometries are rendered to canvas."}),Object(u.jsx)("p",{children:"Attributes to test:"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"Stroke color"}),Object(u.jsx)("li",{children:"Stroke opacity"}),Object(u.jsx)("li",{children:"Stroke dash array"}),Object(u.jsx)("li",{children:"Fill color"}),Object(u.jsx)("li",{children:"Fill opacity"}),Object(u.jsx)("li",{children:"General opacity"})]}),Object(u.jsx)("div",{style:{width:600},children:Object(u.jsx)(d.b,{width:600,height:600,model:z,editable:!0,maintainAspectRatio:!0,showBounds:!0,showGridLines:!0,showZoomControls:!0})})]})},G=n(24),F=n.n(G),B=new d.g("voronoi-test");B.addEditableGeometry("voronoi-source",new d.c(F.a.range(15).map((function(t){return{x:100+800*Math.random(),y:100+800*Math.random()}})))),B.addProcedure("voronoi",(function(t){var e=t.geometries["voronoi-source"].points;return d.k.triangles(e.map((function(t){return[t.x,t.y]}))).map((function(t){return new d.h([{x:t[0][0],y:t[0][1]},{x:t[1][0],y:t[1][1]},{x:t[2][0],y:t[2][1]}])}))}));var q=function(){return Object(u.jsxs)("div",{className:"voronoi-test",children:[Object(u.jsx)("p",{children:"Voronoi test"}),Object(u.jsx)(d.b,{width:600,height:600,model:B,editable:!0,maintainAspectRatio:!0,showBounds:!0,showGridLines:!0,showZoomControls:!0})]})},Y=new d.g("path-angle-at-test");Y.addEditableGeometry("source-path",new d.h(F.a.range(0,1,.05).map((function(t){return{x:200+600*t,y:500+200*Math.sin(t*Math.PI*2)}}))).r(2)),Y.addInput("angle-at",new d.d([0,1])),Y.addProcedure("show-angle-values",(function(t){var e=t.inputs["angle-at"].value,n=t.geometries["source-path"],r=[];return[.01,e,.99].forEach((function(t){var e=n.interpolate(t);r.push(new d.a(e,10,10));var i=n.angleAt(t);r.push(new d.j(i.toFixed(2),{x:e.x,y:e.y+30}));var a=new d.h([{x:-100,y:0},{x:100,y:0}]).rotate(i).translate(e).strokeWidth(4).strokeOpacity(.3);r.push(a)})),r}));var X=function(){return Object(u.jsxs)("div",{className:"path-angle-at-test",children:[Object(u.jsx)("p",{children:"Path angle at test"}),Object(u.jsx)(d.b,{model:Y,width:700,height:700,showBounds:!0,showGridLines:!0,showZoomControls:!0,maintainAspectRatio:!0,editable:!0})]})},W=new d.g("path-interpolation-testing"),U=new d.h([{x:500,y:500}]),V=new d.h([{x:100,y:100},{x:900,y:100}]),H=new d.h([{x:100,y:200},{x:100,y:900},{x:900,y:900}]);W.addInput("interpolation",new d.d([0,1])),W.addEditableGeometry("one-point-path",U),W.addEditableGeometry("two-point-path",V),W.addEditableGeometry("three-point-path",H),W.addProcedure("one-point-interpolate",(function(t){var e=t.geometries["one-point-path"].interpolate(t.inputs.interpolation.value);return new d.a(e,40,40).fillOpacity(0)})),W.addProcedure("two-point-interpolate",(function(t){var e=t.geometries["two-point-path"].interpolate(t.inputs.interpolation.value);return new d.a(e,40,40).fillOpacity(0)})),W.addProcedure("three-point-interpolate",(function(t){var e=t.geometries["three-point-path"].interpolate(t.inputs.interpolation.value);return new d.a(e,40,40).fillOpacity(0)}));var J=function(){return Object(u.jsxs)("div",{className:"path-interpolate-test",children:[Object(u.jsx)("p",{children:"Path interpolate test"}),Object(u.jsx)(d.b,{width:600,height:600,model:W,editable:!0,maintainAspectRatio:!0,showBounds:!0,showGridLines:!0,showZoomControls:!0})]})},Z=new d.g("sub-path-test");Z.addInput("start",new d.d([0,1],.1)),Z.addInput("end",new d.d([0,1],.9)),Z.addEditableGeometry("source",new d.h([{x:100,y:900},{x:100,y:100,q:{x:300,y:500}},{x:900,y:100},{x:900,y:900,c:[{x:500,y:100},{x:900,y:500}]}])),Z.addProcedure("sub-path",(function(t){return t.geometries.source.subPath(t.inputs.start.value,t.inputs.end.value).stroke("rgb(0,200,180)").strokeWidth(10)}));var Q=function(){return Object(u.jsxs)("div",{className:"sub-path-test",children:[Object(u.jsx)("p",{children:"Sub path test"}),Object(u.jsx)(d.b,{width:500,height:500,model:Z,editable:!0,maintainAspectRatio:!0,showBounds:!0,showGridLines:!0,showZoomControls:!0})]})},K=new d.g("text-elements-test");K.setSize({width:2e3,height:2e3}),K.addProcedure("text-translate",(function(t){return F.a.range(10).map((function(t){var e=new d.j("".concat(t,"-translate"),{x:100,y:50*t});return e.translate({x:10*t,y:0}),e.export(!0),e}))})),K.addProcedure("text-rotate",(function(t){return F.a.range(10).map((function(t){var e=new d.j("".concat(t,"-text-rotate"),{x:100,y:500});return e.rotate(t/5*Math.PI,{x:500,y:500}),e.rotation(t/5*Math.PI),e.export(!0),e}))})),K.addProcedure("big-text",(function(t){var e=new d.j("BIG TEXT",{x:450,y:500}).export(!0);return e.fontSize(600),e.fillOpacity(.01),e.stroke("black"),e.strokeWidth(5),e.strokeOpacity(1),[e]}));var $=function(){return Object(u.jsxs)("div",{className:"text-element-tests",children:[Object(u.jsx)("p",{children:"Testing transforms on text elements"}),Object(u.jsx)(d.b,{model:K,width:600,height:600,showBounds:!0,showGridLines:!0,showZoomControls:!0,exportControls:!0,maintainAspectRatio:!0,editable:!0})]})},tt=new d.g("line-test");tt.addEditableGeometry("line-1",new d.f([{x:100,y:500},{x:500,y:500}]).r(5)),tt.addEditableGeometry("line-2",new d.f([{x:450,y:200},{x:600,y:400}]).r(5)),tt.addEditableGeometry("line-3",new d.f([{x:300,y:400},{x:600,y:200}]).r(5)),tt.addEditableGeometry("line-without-points",new d.f),tt.addProcedure("procedure-line-test",(function(t){var e=t.geometries["line-1"],n=t.geometries["line-2"];return[new d.f([e.points[0],n.points[0]])]})),tt.addProcedure("intersections",(function(t){var e=t.geometries["line-1"],n=t.geometries["line-2"],r=t.geometries["line-3"],i=[e.lineIntersect(n),e.lineIntersect(r),n.lineIntersect(r)],a=[e.angleToLine(n),e.angleToLine(r),n.angleToLine(r)];return F.a.flatten(i.map((function(t,e){var n=new d.a(t,15,20),r=[t.seg1,t.seg2];return F.a.every(r)?n.fill("black").fillOpacity(1):F.a.some(r)?n.fill("rgb(0,150,250)").fillOpacity(1):n.fillOpacity(0),[n,new d.j("angle: ".concat(F.a.round(a[e],2)),t)]})))}));var et=function(){return Object(u.jsx)("div",{className:"line-test",children:Object(u.jsx)(d.b,{model:tt,editable:!0,width:800,height:800,showBounds:!0})})},nt=new d.g("path-smoothing-test");nt.addInput("step-size",new d.d([0,1],.1)),nt.addEditableGeometry("source",new d.h([{x:100,y:100},{x:700,y:100},{x:300,y:400},{x:600,y:800},{x:100,y:800}]).closed(!0).fillOpacity(.1).strokeOpacity(.2)),nt.addProcedure("smoothed-path",(function(t){var e=t.geometries.source,n=t.inputs["step-size"].value;return e.smoothPath(100,n).closed(!0).stroke("blue").strokeOpacity(1).strokeWidth(2)}));var rt=function(){return Object(u.jsx)("div",{className:"path-smoothing-test",children:Object(u.jsx)(d.b,{model:nt,editable:!0,width:600,height:600})})},it=new d.g("curve-fitting-test");it.addInput("error",new d.d([0,2250],20)),it.addEditableGeometry("source",new d.h(F.a.range(100,900,150).map((function(t,e){return{x:t,y:500+100*Math.sin(e/2)}}))).strokeOpacity(.1)),it.addProcedure("fit-curve",(function(t){return t.geometries.source.fitCurve(t.inputs.error.value).strokeOpacity(1).strokeWidth(2)}));var at=function(){return Object(u.jsxs)("div",{className:"curve-fitting-test",children:[Object(u.jsx)("p",{children:"Curve fitting test"}),Object(u.jsx)(d.b,{model:it,width:600,height:600,editable:!0})]})},ot=new d.g("constraints-test");ot.addEditableGeometry("group",new d.c([{x:100,y:100,constraints:{show:!0,x:{min:100,max:100},y:{min:100,max:900}}},{x:150,y:100,constraints:{show:!0,x:{min:150,max:250},y:{min:100,max:900}}},{x:400,y:500,constraint:new d.a({x:500,y:500},100,100)}]));var st=function(){return Object(u.jsxs)("div",{className:"constraints-test",children:[Object(u.jsx)("p",{children:"Point constraints"}),Object(u.jsx)(d.b,{model:ot,width:500,height:500,editable:!0})]})},ct=new d.g("fonts-test");ct.setSize({width:2e3,height:1e3});var ut=["roboto-extra-light","roboto-extra-light-italic","roboto-light","roboto-light-italic","roboto-regular","roboto-medium","roboto-medium-italic","roboto-semi-bold","roboto-semi-bold-italic","roboto-bold","roboto-bold-italic"],lt=["europa-light","europa-light-italic","europa","europa-italic","europa-bold","europa-bold-italic","futura","custom-monospace"],ht=["source-code-pro-extra-light","source-code-pro-extra-light-italic","source-code-pro-light","source-code-pro-light-italic","source-code-pro-regular","source-code-pro-medium","source-code-pro-medium-italic","source-code-pro-semi-bold","source-code-pro-semi-bold-italic","source-code-pro-bold","source-code-pro-bold-italic","source-code-pro-black","source-code-pro-black-italic"];ct.addProcedure("fonts",(function(t){var e=[];return ut.forEach((function(t,n){e.push(new d.j(t,{x:100,y:100+50*n}).fontFamily(t).fontSize(60).export(!0))})),lt.forEach((function(t,n){e.push(new d.j(t,{x:600,y:100+50*n}).fontFamily(t).fontSize(60).export(!0))})),ht.forEach((function(t,n){e.push(new d.j(t,{x:1e3,y:100+50*n}).fontFamily(t).fontSize(60).export(!0))})),e}));var ft=function(){return Object(u.jsx)("div",{className:"fonts-test",children:Object(u.jsx)(d.b,{model:ct,width:700,height:700,showZoomControls:!0,exportControls:!0,showBounds:!0})})},dt=[{menuItem:"Curve types",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(g,{})})}},{menuItem:"Click callbacks",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(j,{})})}},{menuItem:"Path display features",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(C,{})})}},{menuItem:"Flatten path",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(I,{})})}},{menuItem:"Mirror path",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(D,{})})}},{menuItem:"Reverse path",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(T,{})})}},{menuItem:"Path contains point",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(R,{})})}},{menuItem:"Constraints",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(st,{})})}},{menuItem:"Interpolation",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(J,{})})}},{menuItem:"Styling",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(N,{})})}},{menuItem:"Voronoi",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(q,{})})}},{menuItem:"Path angle at",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(X,{})})}},{menuItem:"Sub path",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(Q,{})})}},{menuItem:"Path smoothing",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(rt,{})})}},{menuItem:"Curve fitting",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(at,{})})}},{menuItem:"Lines",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(et,{})})}},{menuItem:"Text elements",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)($,{})})}},{menuItem:"Fonts",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(ft,{})})}}],pt=function(){return Object(u.jsxs)("div",{className:"geometries-page",children:[Object(u.jsx)("h1",{children:"Geometries tests"}),Object(u.jsx)(h.a,{menu:{pointing:!0,vertical:!0,fluid:!0},panes:dt})]})},mt=function(){return Object(u.jsx)("div",{className:"procedures-page",children:"Procedures Page"})},gt=n(25),yt=new d.g("inputs-test-model");yt.addInput("test-input",new d.d([0,1],.5)),yt.addInput("second-test-input",new d.d([100,500],150)),yt.addInput("text-input",new d.e("abc")),yt.addProcedure("testing-inputs",(function(t){var e=t.inputs["test-input"].value,n=t.inputs["second-test-input"].value;return new d.a({x:n,y:500},300*e,100)})),yt.addProcedure("text-input-test",(function(t){var e=t.inputs["text-input"].value;return Object(gt.a)(e).map((function(t,e){return new d.j(t,{x:10+25*e,y:100}).fontSize(50).fill("black").fontFamily("custom-monospace").textAnchor("middle")}))}));var vt=function(){return Object(u.jsx)("div",{className:"inputs-test",children:Object(u.jsx)(d.b,{model:yt,editable:!0,width:800,height:800,updateParameters:function(t,e){return console.log(t,e)}})})},xt=function(){return Object(u.jsxs)("div",{className:"inputs-page",children:[Object(u.jsx)("h2",{children:"Inputs Page"}),Object(u.jsx)(vt,{})]})},bt=new d.g("test-model");bt.addEditableGeometry("test-points",new d.c([{x:100,y:500},{x:200,y:400},{x:300,y:600}]).r(10)),bt.addEditableGeometry("test-path",new d.h(F.a.range(10).map((function(t){return{x:10+50*t,y:300+500*Math.random()}}))).r(5).controlsFill("black").controlsFillOpacity(.3).controlsStrokeOpacity(0).controlsStroke("transparent")),bt.addEditableGeometry("one-point-path-23o 02f",new d.h([{x:500,y:500}])),F.a.range(10).forEach((function(t){bt.addEditableGeometry("testing-multiple-paths-".concat(t),new d.h([{x:500,y:500+5*t}]))})),bt.addProcedure("test-procedure",(function(t){for(var e=[],n=0;n<10;n++)e.push(t.geometries["test-path"].clone().rotate(.01*n,t.geometries["test-path"].center()).stroke("rgb(120,20,150)").strokeOpacity(1).strokeWidth(2));return e}));var wt=bt.extractModel(),_t=JSON.stringify(wt),jt=new d.g("copied-model");jt.importModel(JSON.parse(_t)),console.log(jt);var Ot=function(){var t=Object(r.useState)(!1),e=Object(y.a)(t,2),n=e[0],i=e[1];return Object(r.useEffect)((function(){if(n){var t=setTimeout((function(){i(!1)}));return function(){return clearTimeout(t)}}})),Object(u.jsx)("div",{className:"export-import-test",children:Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)("div",{style:{width:200},children:F.a.keys(bt.geometries).map((function(t){return Object(u.jsx)("p",{children:t},t)}))}),Object(u.jsx)("div",{style:{margin:10,padding:0,border:"1px solid rgb(230,230,230)"},children:Object(u.jsx)(d.b,{model:jt,editable:!0,width:800,height:800,modelHasUpdated:n,updateParameters:function(t){console.log(t)},actionsCallback:function(t,e){console.log("clicked on: ",t," action: ",e)},onClickCallback:function(t){console.log(t)}})})]})})},kt=new d.g("gcode-test"),Et=new d.a({x:110,y:110},70,20).r(3);kt.setSize({width:220,height:220}),kt.addEditableGeometry("path",Et),kt.addEditableGeometry("small-circle",new d.a({x:110,y:110},50,6).r(3)),kt.gcode.initialize(15),kt.gcode.addMove({geometry:Et,layerRange:[0,15]}),kt.gcode.addGenerator("create-shapes",(function(t){return console.log(t),{geometry:t.geometries["small-circle"],layerRange:[0,10]}}));var Ct=function(){return Object(u.jsxs)("div",{className:"gcode-test",children:[Object(u.jsx)("h2",{children:"Gcode test"}),Object(u.jsx)(d.b,{model:kt,editable:!0,width:800,height:800,exportControls:!0,showBounds:!0,showGridLines:!0})]})},Pt=new d.g("rendering-test-model");Pt.setSize({width:4e3,height:4e3}),Pt.background="black",Pt.animated=!0,Pt.addEditableGeometry("source",new d.h([{x:1e3,y:1e3},{x:3e3,y:3e3}]).stroke("blue").strokeWidth(50).strokeLinecap("round").export(!0).scaledStrokeWidth(!1)),Pt.addProcedure("test-lines",(function(t){var e=t.center();return t.animation_frame%2===0?e.x-=100:e.x+=100,F.a.range(10).map((function(t){return new d.a(e,100+40*(1+t),100,100).strokeWidth(5+t).fillOpacity(0).stroke("rgb(0, ".concat(255-10*t,", ").concat(20*t,")")).scaledStrokeWidth(!1).export(!0)}))}));var St=function(){return Object(u.jsxs)("div",{className:"rendering-test",children:[Object(u.jsx)("h2",{children:"Rendering test"}),Object(u.jsx)("p",{children:"Should be a toggle to render the model at screen resolution or at model resolution and final image export should conform to that."}),Object(u.jsx)(d.b,{model:Pt,editable:!0,width:800,height:800,exportControls:!0,renderControls:!0,animationControls:!0,showBounds:!0,showGridLines:!0})]})},It=new d.g("export-menu-test");It.addEditableGeometry("points",new d.c([{x:300,y:500},{x:700,y:500}])),It.addProcedure("circles",(function(t){var e=[];return t.geometries.points.points.forEach((function(t,n){F.a.range(5).forEach((function(r){e.push(new d.a(t,10+40*r,3+2*n).export(!0))}))})),e}));var Mt=function(){return Object(u.jsxs)("div",{className:"export-menu-test",children:[Object(u.jsx)("h2",{children:"Export menu"}),Object(u.jsx)("p",{children:"Advanced menu for exporting SVG and PDF vector files."}),Object(u.jsx)(d.b,{model:It,editable:!0,width:600,height:600,exportControls:!0,showBounds:!0,showGridLines:!0,vectorExportMenu:!0,showZoomControls:!0})]})},Dt=new d.g("pdf-export-test");Dt.setSize({width:2e3,height:5500}),Dt.addProcedure("test-path",(function(t){return new d.h([{x:100,y:100,q:{x:0,y:1e3}},{x:1500,y:1e3,c:[{x:1e3,y:0},{x:1e3,y:2e3}]},{x:300,y:400,q:{x:500,y:1500}}]).export(!0).closed(!0)})),Dt.addProcedure("test-path-2",(function(t){return new d.h([{x:100,y:100,q:{x:0,y:1e3}},{x:1500,y:1e3,c:[{x:1e3,y:0},{x:1e3,y:2e3}]},{x:300,y:400,c:[{x:1500,y:500},{x:0,y:1500}]}]).export(!0).closed(!0).translate({x:0,y:1e3})}));var At=function(){return Object(u.jsxs)("div",{className:"export-pdf-test",children:[Object(u.jsx)("p",{children:"Export PDF test"}),Object(u.jsx)(d.b,{model:Dt,editable:!0,width:800,height:800,exportControls:!0,exportTypes:["pdf","png","svg"],renderType:"SVG",showBounds:!0,showGridLines:!0})]})},Tt=new d.g("download-file-api-test");Tt.addEditableGeometry("test-points",new d.c([{x:100,y:500},{x:900,y:500}])),Tt.animated=!0,Tt.addAnimation("test-download",(function(t){if(1===t.animation_frame){var e=t.geometries["test-points"].points.map((function(t){return{x:t.x,y:t.y}})),n=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(d.n)(n,"test-points.json")}}));var Lt=function(){return Object(u.jsx)("div",{className:"download-file-api-test",children:Object(u.jsx)(d.b,{model:Tt,editable:!0,exportControls:!0,renderControls:!0,animationControls:!0,width:800,height:800})})},Rt=[{menuItem:"Model import/export API",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(Ot,{})})}},{menuItem:"Gcode",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(Ct,{})})}},{menuItem:"Rendering to png",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(St,{})})}},{menuItem:"PDF export",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(At,{})})}},{menuItem:"Vector export menu",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(Mt,{})})}},{menuItem:"File save API",render:function(){return Object(u.jsx)(h.a.Pane,{attached:!1,children:Object(u.jsx)(Lt,{})})}}],zt=function(){return Object(u.jsxs)("div",{className:"import-export-page",children:[Object(u.jsx)("h1",{children:"Import export tests"}),Object(u.jsx)(h.a,{menu:{pointing:!0,vertical:!0,fluid:!0},panes:Rt})]})},Nt=new d.g("model-logging-test");Nt.addEditableGeometry("test-points",new d.c([{x:100,y:100},{x:900,y:900}]));var Gt=function(t){return Object(O.a)(t),Object(u.jsxs)("div",{className:"model-logging-test",children:[Object(u.jsx)("h2",{children:"Model Logging Test"}),Object(u.jsx)(d.b,{model:Nt,editable:!0,width:500,height:500,logModelDispatch:!0,logModelState:!0,logMouseMove:!1})]})},Ft=function(t){return Object(O.a)(t),Object(u.jsx)("div",{className:"models-page",children:Object(u.jsx)(Gt,{})})},Bt=n(268),qt=n.n(Bt),Yt=new d.g("zoom-pan-test");Yt.background="rgb(255,220,50)",Yt.animated=!0,Yt.autoplay=!0,Yt.setSize({width:1e3,height:2e3}),Yt.params={},Yt.params.player={x:500,y:1e3},Yt.addEditableGeometry("test-path",new d.h(F.a.range(3).map((function(t){return{x:10+5*t,y:50+900*Math.random()}}))).r(4).strokeDasharray(3).export(!0)),Yt.addProcedure("test-procedure",(function(t){return new d.h(t.geometries["test-path"].points).translate({x:50,y:50}).strokeDasharray(5).stroke("rgb(0,150,50)").strokeWidth(1).fill("blue").export(!0)})),Yt.addProcedure("keys-pressed-test",(function(t){var e="Keys pressed: ";return t.keysPressed.forEach((function(t){e+=" ".concat(t)})),new d.j(e,{x:100,y:1800}).fontSize(100)})),Yt.addProcedure("text-output",(function(t){return new d.j("TEST",{x:500,y:500}).fontSize(80).export(!0)})),Yt.addProcedure("monospace-text-output",(function(t){return new d.j("Monospace FONT",{x:500,y:600}).fontSize(80).export(!0).fontFamily("custom-monospace")})),Yt.addProcedure("animation-frame",(function(t){return new d.j("animation frame: ".concat(t.animation_frame),{x:10,y:30}).export(!0).fontSize(40)})),Yt.addProcedure("follow-mouse",(function(t){return new d.a(t.mousePosition,5,20)})),Yt.addProcedure("cursor-change",(function(t){var e=new d.i({x:700,y:700},{x:800,y:800});return e.contains(t.mousePosition)?(e.fillOpacity(1),t.cursor="pointer"):(t.cursor="initial",e.fillOpacity(0)),e})),Yt.addProcedure("player-object",(function(t){return new d.a(t.params.player,40,40).fill("rgb(30,70,255)")})),Yt.addAnimation("player-movement",(function(t){var e=t.keysPressed;e.includes("ArrowUp")&&(t.params.player.y-=3),e.includes("ArrowDown")&&(t.params.player.y+=3),e.includes("ArrowLeft")&&(t.params.player.x-=3),e.includes("ArrowRight")&&(t.params.player.x+=3)})),Yt.onPointerDownCallback=function(t,e){console.log(t,e),t.params.player.x=e.x,t.params.player.y=e.y};var Xt=function(t){Object(O.a)(t);var e=Object(r.useRef)(null),n=Object(r.useState)(!1),i=Object(y.a)(n,2),a=i[0],o=i[1],s=Object(r.useState)(!1),c=Object(y.a)(s,2),l=c[0],h=c[1],f=qt()(e),p=F.a.max([f.width,100]),m=window.innerHeight-300;return Object(r.useEffect)((function(){l&&setTimeout((function(){h(!1)}),10)})),Object(u.jsxs)("div",{className:"zoom-pan-frame-test",children:[Object(u.jsx)("h2",{children:"Zoom pan frame test"}),Object(u.jsx)("p",{style:{fontFamily:"custom-monospace"},children:"Font test"}),Object(u.jsx)("div",{children:Object(u.jsx)(v.a,{toggle:!0,active:a,onClick:function(){return o(!a)},children:"Model log"})}),Object(u.jsx)("div",{ref:e,children:Object(u.jsx)("div",{style:{width:p,height:m,border:"1px solid rgb(220,220,220)"},children:p>100&&Object(u.jsx)(d.b,{model:Yt,editable:!0,fitInContainer:!0,maintainAspectRatio:!0,width:p,height:m,showBounds:!0,showGridLines:!0,showZoomControls:!0,logModelDispatch:a,logModelState:a,modelHasUpdated:l,onClickCallback:function(t){Yt.geometries["test-path"].addPoint(t),Yt.playing=!0,h(!0)},updateParameters:function(t){Yt.updateGeometryValues(t.geometries)},showPointCoordinates:!0,exportControls:!0,animationControls:!0,exportTypes:["svg","png","pdf"]})})})]})},Wt=function(){return Object(u.jsx)("div",{className:"frame-page",children:Object(u.jsx)(Xt,{})})},Ut=n(336);Object(d.o)();var Vt=function(t){Object(O.a)(t);var e=Object(d.m)('model.addEditableGeometry("test", new Path([{x: 10, y: 10}, {x: 50, y: 50}]))');console.log(e);var n=Ut.parseModule(e.script,{tolerant:!1,loc:!0});if(n.hasOwnProperty("errors"))console.log("syntax errors"),console.log(n.errors);else{var r=Object(d.l)(e);console.log(r),setTimeout((function(){console.log(window["OUTPUTMODEL".concat(r)])}),10)}return Object(u.jsx)("div",{className:"scripting-page",children:"Scriptingpage"})},Ht=n(385),Jt=n(384),Zt=!1;var Qt=function(){var t=Object(r.useState)(5),e=Object(y.a)(t,2),n=e[0],i=e[1],a=Object(r.useState)(12),o=Object(y.a)(a,2),s=o[0],c=o[1],l=Object(r.useState)(!1),h=Object(y.a)(l,2),f=h[0],p=h[1];return Object(u.jsxs)("div",{style:{position:"relative"},className:"editable-points-performance-test",children:[Object(u.jsx)("p",{children:"Editable points performance test"}),Object(u.jsxs)("div",{style:{position:"absolute",top:0,right:0,zIndex:10},className:"ui form",children:[Object(u.jsx)(Ht.a.Field,{children:Object(u.jsx)(Jt.a,{value:n,type:"number",onChange:function(t){return i(t.target.value)},label:"groups",labelPosition:"right",size:"mini"})}),Object(u.jsx)(Ht.a.Field,{children:Object(u.jsx)(Jt.a,{value:s,type:"number",onChange:function(t){return c(t.target.value)},label:"points per group",labelPosition:"right",size:"mini"})}),Object(u.jsx)(Ht.a.Field,{children:Object(u.jsx)(v.a,{onClick:function(){p(!1),Zt=!1,function(t,e){Zt=new d.g("editable-points-performance-test"),F.a.range(t).forEach((function(n){var r=n/t,i=new d.h(F.a.range(e).map((function(t){var e=!1,n=!1,i={x:800*r+100*Math.random(),y:1e3*Math.random()};return Math.random()<.3&&(e={x:800*r+100*Math.random(),y:1e3*Math.random()}),!1===e&&Math.random()<.6&&(n=[{x:800*r+100*Math.random(),y:1e3*Math.random()},{x:800*r+100*Math.random(),y:1e3*Math.random()}]),e?i.q=e:n&&(i.c=n),i}))).r(5).controlsFill("rgb(".concat(245*r,", 0, ").concat(255-255*r,")")).controlsFillOpacity(1);console.log("geometry: ",n),Zt.addEditableGeometry("group-".concat(n),i)}))}(n,s),setTimeout((function(){console.log(Zt),p(!0)}),500)},children:"Generate"})})]}),f&&Zt&&Object(u.jsx)(d.b,{width:1e3,height:1e3,model:Zt,editable:!0,fitInContainer:!0,maintainAspectRatio:!0,showBounds:!0,showGridLines:!0,showZoomControls:!0})]})},Kt=function(t){return Object(O.a)(t),Object(u.jsxs)("div",{className:"performance-page",children:[Object(u.jsx)("h1",{children:"Performance testing"}),Object(u.jsx)(Qt,{})]})},$t=new d.g("full-screen-test");$t.addProcedure("test",(function(t){return new d.a(t.center(),100,100)}));var te=function(){var t=window.innerWidth-1,e=window.innerHeight-1;return Object(u.jsx)("div",{className:"full-screen-test-page",children:Object(u.jsx)(d.b,{model:$t,width:t,height:e,fitInContainer:!0,maintainAspectRatio:!0,showBounds:!0,showGridLines:!0,showZoomControls:!0,exportControls:!0})})},ee=(n(337),n(338),n(339),function(){return window.location.href.includes("/full-screen-test")?Object(u.jsx)(te,{}):Object(u.jsx)("div",{className:"app",children:Object(u.jsxs)(o.a,{children:[Object(u.jsxs)(c.a,{children:[Object(u.jsx)(c.a.Item,{children:Object(u.jsx)("h3",{children:"Hyperobjects Language test suite"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/",children:"Home"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/models",children:"Models"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/import-export",children:"Import/Export"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/geometries",children:"Geometries"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/procedures",children:"Procedures"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/inputs",children:"Inputs"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/frame",children:"Frame"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/scripting",children:"Scripting"})}),Object(u.jsx)(c.a.Item,{children:Object(u.jsx)(o.b,{to:"/performance",children:"Perfomance"})})]}),Object(u.jsx)("div",{className:"page-content",children:Object(u.jsxs)(s.c,{children:[Object(u.jsx)(s.a,{path:"/models",children:Object(u.jsx)(Ft,{})}),Object(u.jsx)(s.a,{path:"/import-export",children:Object(u.jsx)(zt,{})}),Object(u.jsx)(s.a,{path:"/geometries",children:Object(u.jsx)(pt,{})}),Object(u.jsx)(s.a,{path:"/procedures",children:Object(u.jsx)(mt,{})}),Object(u.jsx)(s.a,{path:"/inputs",children:Object(u.jsx)(xt,{})}),Object(u.jsx)(s.a,{path:"/frame",children:Object(u.jsx)(Wt,{})}),Object(u.jsx)(s.a,{path:"/scripting",children:Object(u.jsx)(Vt,{})}),Object(u.jsx)(s.a,{path:"/performance",children:Object(u.jsx)(Kt,{})}),Object(u.jsx)(s.a,{path:"/",children:Object(u.jsx)(l,{})})]})})]})})});a.a.render(Object(u.jsx)(ee,{}),document.getElementById("root"))}},[[341,1,2]]]);
//# sourceMappingURL=main.101d3de1.chunk.js.map